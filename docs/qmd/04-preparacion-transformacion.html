<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>4&nbsp; Preparación y transformación de datos – R para preparación y visualización de datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../qmd/05-combinar-datos.html" rel="next">
<link href="../qmd/03-visualizacion-avanzada.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-9314ff3336016d4581b64e0c7f525964.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.33/datatables.js"></script><script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">R para preparación y visualización de datos</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@gorkang"> <i class="bi bi-mastodon" role="img" aria-label="Mastodon">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/gorkang/R_preparacion_visualizacion_datos" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../R-para-preparación-y-visualización-de-datos.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/04-preparacion-transformacion.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Preparación y transformación de datos</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introducción</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/00-configuracion-sistema.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preparando nuestro sistema</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/01-introduccion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/02-visualizacion-basica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introducción a la visualización de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/03-visualizacion-avanzada.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Visualización avanzada</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/04-preparacion-transformacion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Preparación y transformación de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/05-combinar-datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Combinar datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/06-analisis-datos-exploratorio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Análisis de datos exploratorio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/07-analisis-datos-inferencial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Análisis de datos inferencial</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/08-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Trabajo con Quarto para reportes reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/09-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Control de cambios con Git y Github</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/10-experimentos-reproducibles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/11-ejercicios.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Ejercicios</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paquetes usados</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#paquetes-para-este-cap%C3%ADtulo" id="toc-paquetes-para-este-capítulo" class="nav-link active" data-scroll-target="#paquetes-para-este-cap%C3%ADtulo">Paquetes para este capítulo</a></li>
  <li><a href="#proyecto-de-rstudio-del-curso" id="toc-proyecto-de-rstudio-del-curso" class="nav-link" data-scroll-target="#proyecto-de-rstudio-del-curso">Proyecto de RStudio del curso</a></li>
  <li>
<a href="#importar-y-exportar-datos" id="toc-importar-y-exportar-datos" class="nav-link" data-scroll-target="#importar-y-exportar-datos"><span class="header-section-number">4.1</span> Importar y exportar datos</a>
  <ul>
<li>
<a href="#importar-un-solo-archivo" id="toc-importar-un-solo-archivo" class="nav-link" data-scroll-target="#importar-un-solo-archivo"><span class="header-section-number">4.1.1</span> Importar un solo archivo</a>
  <ul>
<li><a href="#archivos-csv" id="toc-archivos-csv" class="nav-link" data-scroll-target="#archivos-csv"><span class="header-section-number">4.1.1.1</span> Archivos CSV</a></li>
  <li>
<a href="#otros-tipos-de-archivos" id="toc-otros-tipos-de-archivos" class="nav-link" data-scroll-target="#otros-tipos-de-archivos"><span class="header-section-number">4.1.1.2</span> Otros tipos de archivos</a>
  <ul class="collapse">
<li><a href="#archivos-excel" id="toc-archivos-excel" class="nav-link" data-scroll-target="#archivos-excel">Archivos excel</a></li>
  <li><a href="#archivos-spss" id="toc-archivos-spss" class="nav-link" data-scroll-target="#archivos-spss">Archivos SPSS</a></li>
  <li><a href="#archivos-libreoffice" id="toc-archivos-libreoffice" class="nav-link" data-scroll-target="#archivos-libreoffice">Archivos Libreoffice</a></li>
  <li><a href="#google-sheets" id="toc-google-sheets" class="nav-link" data-scroll-target="#google-sheets">Google sheets</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#ejercicios---importar-datos" id="toc-ejercicios---importar-datos" class="nav-link" data-scroll-target="#ejercicios---importar-datos">Ejercicios - Importar datos</a></li>
  <li>
<a href="#importar-m%C3%BAltiples-archivos" id="toc-importar-múltiples-archivos" class="nav-link" data-scroll-target="#importar-m%C3%BAltiples-archivos"><span class="header-section-number">4.1.2</span> Importar múltiples archivos</a>
  <ul>
<li><a href="#incluir-nombres-de-archivos" id="toc-incluir-nombres-de-archivos" class="nav-link" data-scroll-target="#incluir-nombres-de-archivos"><span class="header-section-number">4.1.2.1</span> Incluir nombres de archivos</a></li>
  <li><a href="#con-parametros" id="toc-con-parametros" class="nav-link" data-scroll-target="#con-parametros"><span class="header-section-number">4.1.2.2</span> Con parametros</a></li>
  </ul>
</li>
  <li><a href="#ejercicios---importar-m%C3%BAltiples-archivos" id="toc-ejercicios---importar-múltiples-archivos" class="nav-link" data-scroll-target="#ejercicios---importar-m%C3%BAltiples-archivos">Ejercicios - Importar múltiples archivos</a></li>
  <li><a href="#limpiar-nombres-de-columnas" id="toc-limpiar-nombres-de-columnas" class="nav-link" data-scroll-target="#limpiar-nombres-de-columnas"><span class="header-section-number">4.1.3</span> Limpiar nombres de columnas</a></li>
  <li>
<a href="#exportar-datos" id="toc-exportar-datos" class="nav-link" data-scroll-target="#exportar-datos"><span class="header-section-number">4.1.4</span> Exportar datos</a>
  <ul>
<li><a href="#archivos-csv-1" id="toc-archivos-csv-1" class="nav-link" data-scroll-target="#archivos-csv-1"><span class="header-section-number">4.1.4.1</span> Archivos CSV</a></li>
  <li><a href="#otros-archivos" id="toc-otros-archivos" class="nav-link" data-scroll-target="#otros-archivos"><span class="header-section-number">4.1.4.2</span> Otros Archivos</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#preparaci%C3%B3n-y-transformaci%C3%B3n-de-datos" id="toc-preparación-y-transformación-de-datos" class="nav-link" data-scroll-target="#preparaci%C3%B3n-y-transformaci%C3%B3n-de-datos"><span class="header-section-number">4.2</span> Preparación y transformación de datos</a>
  <ul>
<li><a href="#the-pipe" id="toc-the-pipe" class="nav-link" data-scroll-target="#the-pipe"><span class="header-section-number">4.2.1</span> The pipe</a></li>
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data"><span class="header-section-number">4.2.2</span> Tidy data</a></li>
  <li>
<a href="#verbos-dplyr" id="toc-verbos-dplyr" class="nav-link" data-scroll-target="#verbos-dplyr"><span class="header-section-number">4.2.3</span> Verbos dplyr</a>
  <ul>
<li><a href="#tabla-resumen-dplyr" id="toc-tabla-resumen-dplyr" class="nav-link" data-scroll-target="#tabla-resumen-dplyr">Tabla resumen dplyr</a></li>
  <li><a href="#filtrar-y-ordenar-filas" id="toc-filtrar-y-ordenar-filas" class="nav-link" data-scroll-target="#filtrar-y-ordenar-filas"><span class="header-section-number">4.2.3.1</span> Filtrar y ordenar filas</a></li>
  <li><a href="#seleccionar-ordenar-y-renombrar-columnas" id="toc-seleccionar-ordenar-y-renombrar-columnas" class="nav-link" data-scroll-target="#seleccionar-ordenar-y-renombrar-columnas"><span class="header-section-number">4.2.3.2</span> Seleccionar, ordenar y renombrar columnas</a></li>
  <li><a href="#ejercicios---verbos-dplyr-simples" id="toc-ejercicios---verbos-dplyr-simples" class="nav-link" data-scroll-target="#ejercicios---verbos-dplyr-simples">Ejercicios - verbos dplyr simples</a></li>
  <li><a href="#selecci%C3%B3n-avanzada-con-select_helpers" id="toc-selección-avanzada-con-select_helpers" class="nav-link" data-scroll-target="#selecci%C3%B3n-avanzada-con-select_helpers"><span class="header-section-number">4.2.3.3</span> Selección avanzada con select_helpers()</a></li>
  <li><a href="#modificar-y-a%C3%B1adir-variables" id="toc-modificar-y-añadir-variables" class="nav-link" data-scroll-target="#modificar-y-a%C3%B1adir-variables"><span class="header-section-number">4.2.3.4</span> Modificar y añadir variables</a></li>
  <li><a href="#res%C3%BAmenes-agrupados" id="toc-resúmenes-agrupados" class="nav-link" data-scroll-target="#res%C3%BAmenes-agrupados"><span class="header-section-number">4.2.3.5</span> Resúmenes agrupados</a></li>
  <li><a href="#ejercicios---verbos-dplyr" id="toc-ejercicios---verbos-dplyr" class="nav-link" data-scroll-target="#ejercicios---verbos-dplyr">Ejercicios - verbos dplyr</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#verbos-avanzados-y-otras-criaturas-ind%C3%B3mitas" id="toc-verbos-avanzados-y-otras-criaturas-indómitas" class="nav-link" data-scroll-target="#verbos-avanzados-y-otras-criaturas-ind%C3%B3mitas"><span class="header-section-number">4.3</span> Verbos avanzados y otras criaturas indómitas</a>
  <ul>
<li><a href="#wide-to-long-simple" id="toc-wide-to-long-simple" class="nav-link" data-scroll-target="#wide-to-long-simple"><span class="header-section-number">4.3.1</span> Wide to long simple</a></li>
  <li>
<a href="#long-to-wide-simple" id="toc-long-to-wide-simple" class="nav-link" data-scroll-target="#long-to-wide-simple"><span class="header-section-number">4.3.2</span> Long to wide simple</a>
  <ul>
<li><a href="#para-que-sirve-tener-los-datos-en-formato-long" id="toc-para-que-sirve-tener-los-datos-en-formato-long" class="nav-link" data-scroll-target="#para-que-sirve-tener-los-datos-en-formato-long"><span class="header-section-number">4.3.2.1</span> ¿Para que sirve tener los datos en formato long?</a></li>
  </ul>
</li>
  <li><a href="#wide-to-long-complex" id="toc-wide-to-long-complex" class="nav-link" data-scroll-target="#wide-to-long-complex"><span class="header-section-number">4.3.3</span> Wide to long complex</a></li>
  <li><a href="#long-to-wide-complex" id="toc-long-to-wide-complex" class="nav-link" data-scroll-target="#long-to-wide-complex"><span class="header-section-number">4.3.4</span> Long to wide complex</a></li>
  <li><a href="#ejercicios---wide-to-long" id="toc-ejercicios---wide-to-long" class="nav-link" data-scroll-target="#ejercicios---wide-to-long">Ejercicios - wide to long</a></li>
  </ul>
</li>
  <li>
<a href="#separate-omit-ifelse-case_when-tipos-de-variables" id="toc-separate-omit-ifelse-case_when-tipos-de-variables" class="nav-link" data-scroll-target="#separate-omit-ifelse-case_when-tipos-de-variables"><span class="header-section-number">4.4</span> Separate, omit, ifelse, case_when, tipos de variables…</a>
  <ul>
<li><a href="#ejercicios---verbos-avanzados-dplyr" id="toc-ejercicios---verbos-avanzados-dplyr" class="nav-link" data-scroll-target="#ejercicios---verbos-avanzados-dplyr">Ejercicios - verbos avanzados dplyr</a></li>
  </ul>
</li>
  <li>
<a href="#regular-expressions" id="toc-regular-expressions" class="nav-link" data-scroll-target="#regular-expressions"><span class="header-section-number">4.5</span> Regular expressions</a>
  <ul>
<li><a href="#ayuda-con-regular-expressions" id="toc-ayuda-con-regular-expressions" class="nav-link" data-scroll-target="#ayuda-con-regular-expressions"><span class="header-section-number">4.5.1</span> Ayuda con regular expressions</a></li>
  <li><a href="#ejercicios---calcular-puntajes-de-escalas-usando-regular-expressions" id="toc-ejercicios---calcular-puntajes-de-escalas-usando-regular-expressions" class="nav-link" data-scroll-target="#ejercicios---calcular-puntajes-de-escalas-usando-regular-expressions">Ejercicios - Calcular puntajes de escalas usando regular expressions</a></li>
  </ul>
</li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#bibliograf%C3%ADa" id="toc-bibliografía" class="nav-link" data-scroll-target="#bibliograf%C3%ADa">Bibliografía</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Preparación y transformación de datos</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>En este capítulo vamos a aprender a importar y exportar todo tipo de archivos. También veremos como, filtrar, crear nuevas variables, seleccionar columnas, transformar bases de datos, etc.</p>
<hr>
<section id="paquetes-para-este-capítulo" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="paquetes-para-este-capítulo">Paquetes para este capítulo</h4>
<p>Como en cada capítulo, crea un nuevo script de R (CNTRL+ SHIFT + N), guárdalo con el nombre/número del capítulo (i.e.&nbsp;<code>capitulo4.R</code>), copia y pega las líneas de abajo y ejecútalas.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">'dplyr'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'dplyr'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">'dplyr'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/rstudio/DT">"DT"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"DT"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/rstudio/DT">"DT"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org">"ggplot2"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org">"ggplot2"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://googlesheets4.tidyverse.org">"googlesheets4"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"googlesheets4"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://googlesheets4.tidyverse.org">"googlesheets4"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://haven.tidyverse.org">"haven"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"haven"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://haven.tidyverse.org">"haven"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://here.r-lib.org/">"here"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"here"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://here.r-lib.org/">"here"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/sfirke/janitor">"janitor"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"janitor"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/sfirke/janitor">"janitor"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://purrr.tidyverse.org/">"purrr"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"purrr"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://purrr.tidyverse.org/">"purrr"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://readr.tidyverse.org">'readr'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'readr'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://readr.tidyverse.org">'readr'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://readxl.tidyverse.org">"readxl"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://readxl.tidyverse.org">"readxl"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://docs.ropensci.org/readODS/">"readODS"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"readODS"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://docs.ropensci.org/readODS/">"readODS"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://tidyr.tidyverse.org">"tidyr"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyr"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyr.tidyverse.org">"tidyr"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://waldo.r-lib.org">"waldo"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"waldo"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://waldo.r-lib.org">"waldo"</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://ropensci.r-universe.dev/writexl">"writexl"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"writexl"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://ropensci.r-universe.dev/writexl">"writexl"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gadenbuie/regexplain">'regexplain'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"gadenbuie/regexplain"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gadenbuie/regexplain">'regexplain'</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr></section><section id="proyecto-de-rstudio-del-curso" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="proyecto-de-rstudio-del-curso">Proyecto de RStudio del curso</h4>
<p>En <a href="https://gorkang.github.io/R_preparacion_visualizacion_datos/#como-empezar">como empezar</a> se mostró como tener un proyecto de RStudio con todos los materiales del curso. Si no lo tienes, este es el momento de hacerlo, ya que vamos a necesitar varios de los archivos del proyecto:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://usethis.r-lib.org">'usethis'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'usethis'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://usethis.r-lib.org">'usethis'</a></span><span class="op">)</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/zip-utils.html">use_course</a></span><span class="op">(</span><span class="st">"gorkang/R_preparacion_visualizacion_datos"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="importar-y-exportar-datos" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="importar-y-exportar-datos">
<span class="header-section-number">4.1</span> Importar y exportar datos</h2>
<p>Hasta ahora hemos trabajado con data frames como <code>mpg</code> o <code>gaminder</code>, que forman parte de la instalación de alguno de los paquetes de R. Pero habitualmente trabajaremos con datos propios, por lo que necesitaremos leer uno o varios archivos.</p>
<p>RStudio tiene un menú para ayudar a importar datos <img src="../data/images/import-data.png" class="img-fluid">. No obstante, aquí aprenderemos a hacerlo todo en código, para que nuestros scripts sean auto-contenidos.</p>
<p>Podemos ver algunas de las funciones de esta sección y cómo usarlas en la <a href="https://github.com/rstudio/cheatsheets/raw/main/data-import.pdf">Cheatsheet importar datos</a></p>
<section id="importar-un-solo-archivo" class="level3" data-number="4.1.1"><h3 data-number="4.1.1" class="anchored" data-anchor-id="importar-un-solo-archivo">
<span class="header-section-number">4.1.1</span> Importar un solo archivo</h3>
<p>Empezaremos por la situación básica más común, cómo importar un solo archivo. Vamos a ver con más detalle los archivos CSV (<em>comma separated values</em>). Las funciones para importar archivos Excel, Libreoffice, SPSS, etc. tienen parámetros similares.</p>
<section id="archivos-csv" class="level4" data-number="4.1.1.1"><h4 data-number="4.1.1.1" class="anchored" data-anchor-id="archivos-csv">
<span class="header-section-number">4.1.1.1</span> Archivos CSV</h4>
<p>Usaremos las siguientes funciones del paquete <code>readr</code>:</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Funciones para leer archivos csv
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv()</a></code>: valores separados por coma (“,”)<br>
</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv2()</a></code>: valores separados por punto y coma (“;”), típicamente usado en países de habla Hispana<br>
</li>
<li>
<code>readr::read_delim( , delim = "|")</code>: valores separados por un delimitador arbitrario</li>
</ul>
</div>
</div>
<p>Leemos el archivo <code>02-read-csv.csv</code> de la carpeta <code>data/files/</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">DF_name</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Generalmente haremos esto en dos pasos. Primero guardaremos la ubicación del archivo en una variable, y después usaremos esa variable como parámetro de la función que lee los datos:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Guardamos en la variable `name_of_file` la ubicación del archivo</span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="st">"data/files/02-read-csv.csv"</span></span>
<span></span>
<span><span class="co"># Usamos la función read_csv() para leer el archivo</span></span>
<span><span class="va">DF_name</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">name_of_file</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En este manual verás que usamos <code>name_of_file =  here::here("mi/archivo.csv")</code>. La función <code><a href="https://here.r-lib.org//reference/here.html">here::here</a></code> nos ayuda a evitar problemas con la ruta a los archivos (nos devuelve la <a href="https://stackoverflow.com/a/10288252/1873521">ruta absoluta</a>). Esto suele ser importante cuando trabajamos con quarto or rmarkdown, pero normalmente lo podemos ignorar.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># En name_of_file almacenamos la ruta absoluta al archivo</span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Leemos el archivo que esta en name_of_file</span></span>
<span><span class="va">DF_name</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">name_of_file</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DF_name</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1     4 41904      1    47         8       80 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 2     5 95041      2    21         6       90 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; 3     6 74594      2    29         6       10 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4    15 72903      2    27         7       75 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; 5    16 21260      1    29         5       35 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 6    18 50315      2    28         6       14 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si usamos un <a href="https://github.com/gorkang/R_preparacion_visualizacion_datos">repositorio online para almacenar los archivos</a>, podemos leer directamente de una URL.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">URL</span> <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/gorkang/R_preparacion_visualizacion_datos/master/data/files/02-read-csv.csv"</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">URL</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La función <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> tiene varios parámetros muy útiles como <code>skip</code> o <code>col_types</code> (si el cursor está encima de la función, F1 os llevará a la ayuda).</p>
<ul>
<li><p>Con <code>skip</code> podemos saltarnos líneas del inicio del archivo. Muy útil cuando las hojas de datos no empiezan en la primera fila.</p></li>
<li><p>Con <code>col_types</code> podemos especificar el tipo de datos que contiene cada columna (texto, números, factores…). Al ser explícitos con el tipo de datos evitamos sorpresas, y de paso reducimos el output de la Consola.</p></li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  </span>
<span><span class="co"># En name_of_file almacenamos la ruta completa al archivo</span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Leemos el archivo que esta en name_of_file</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">name_of_file</span>, </span>
<span>         skip <span class="op">=</span> <span class="fl">0</span>,</span>
<span>         col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span></span>
<span>           .default <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>           condition <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>           condition2 <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character</a></span><span class="op">(</span><span class="op">)</span></span>
<span>           <span class="op">)</span></span>
<span>         <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1     4 41904      1    47         8       80 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 2     5 95041      2    21         6       90 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; 3     6 74594      2    29         6       10 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4    15 72903      2    27         7       75 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; 5    16 21260      1    29         5       35 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 6    18 50315      2    28         6       14 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="otros-tipos-de-archivos" class="level4" data-number="4.1.1.2"><h4 data-number="4.1.1.2" class="anchored" data-anchor-id="otros-tipos-de-archivos">
<span class="header-section-number">4.1.1.2</span> Otros tipos de archivos</h4>
<p>Para otros tipos de archivos usaremos otras funciones.</p>
<section id="archivos-excel" class="level5 unnumbered"><h5 class="unnumbered anchored" data-anchor-id="archivos-excel">Archivos excel</h5>
<p>Para leer archivos Excel podemos usar <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> del paquete <a href="https://readxl.tidyverse.org">readxl</a>. Cada una de estas funciones tiene parámetros que nos pueden resultar muy útiles. Por ejemplo, <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> tiene el parámetro <code>sheet</code>, que nos permite seleccionar qué hoja del archivo excel leer.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-xlsx.xlsx"</span><span class="op">)</span></span>
<span><span class="fu">readxl</span><span class="fu">::</span><span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="va">name_of_file</span>, sheet <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="archivos-spss" class="level5 unnumbered"><h5 class="unnumbered anchored" data-anchor-id="archivos-spss">Archivos SPSS</h5>
<p>Para archivos .sav usamos <code><a href="https://haven.tidyverse.org/reference/read_spss.html">haven::read_sav()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-sav.sav"</span><span class="op">)</span></span>
<span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://haven.tidyverse.org/reference/read_spss.html">read_sav</a></span><span class="op">(</span><span class="va">name_of_file</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="archivos-libreoffice" class="level5 unnumbered"><h5 class="unnumbered anchored" data-anchor-id="archivos-libreoffice">Archivos Libreoffice</h5>
<p>Para archivos .ods usamos <code><a href="https://docs.ropensci.org/readODS/reference/read_ods.html">readODS::read_ods()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-ods.ods"</span><span class="op">)</span></span>
<span><span class="va">df_ODS</span> <span class="op">=</span> <span class="fu">readODS</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/readODS/reference/read_ods.html">read_ods</a></span><span class="op">(</span><span class="va">name_of_file</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Vemos las primeras filas</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">df_ODS</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="google-sheets" class="level5 unnumbered"><h5 class="unnumbered anchored" data-anchor-id="google-sheets">Google sheets</h5>
<p>Para poder leer una gsheet debemos:</p>
<ol type="1">
<li>Crear un enlace para compartirla: <code>"Share" -&gt; "General access" -&gt; "Anyone with the link"</code><br>
</li>
<li>Extraemos el identificador de la google sheet:<br>
</li>
</ol>
<ul>
<li>De <code>https://docs.google.com/spreadsheets/d/1v3cCKaQ3akGEH8Z2Plu7qpq93GNk6Y6v337iI4KyZ2I/edit?usp=sharing</code><br>
</li>
<li>Usaremos: <code>1v3cCKaQ3akGEH8Z2Plu7qpq93GNk6Y6v337iI4KyZ2I</code>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://googlesheets4.tidyverse.org">"googlesheets4"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"googlesheets4"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://googlesheets4.tidyverse.org">"googlesheets4"</a></span><span class="op">)</span></span>
<span><span class="va">name_of_sheet</span> <span class="op">=</span> <span class="st">"1v3cCKaQ3akGEH8Z2Plu7qpq93GNk6Y6v337iI4KyZ2I"</span></span>
<span><span class="fu">googlesheets4</span><span class="fu">::</span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/range_read.html">read_sheet</a></span><span class="op">(</span><span class="va">name_of_sheet</span><span class="op">)</span>   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section></section><section id="ejercicios---importar-datos" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios---importar-datos">Ejercicios - Importar datos</h3>
<p>En el repositorio <a href="https://osf.io/jdn37/">R para preparación y visualización de datos - DNSC - UAI</a> de la Open Science Foundation podrás ver una carpeta llamada <code>OSF_files</code>. Si no tenéis conexión a Internet, podéis encontrar los archivos en <code>data/files/OSF_files</code>.</p>
<p>Descarga e importa los archivos que ahí aparecen, asegurándote que los nombres de columna se leen adecuadamente:</p>
<ul>
<li>02-extralines-1.xlsx</li>
<li>02-extralines-2.xlsx</li>
<li>02-extralines-3.xlsx</li>
<li>02-spanish.csv</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solución
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">La función <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> tiene parámetros como <code>skip</code>, que permite no leer las primeras n lineas, o <code>sheet</code>, con la que puedes indicar que pestaña leer.</span></p>
<p>Recuerda que estás leyendo archivos excel o csv, por lo que puedes verlos en Libreoffice o Excel para saber como son.</p>
</div>
</div>
</div>
</section><section id="importar-múltiples-archivos" class="level3" data-number="4.1.2"><h3 data-number="4.1.2" class="anchored" data-anchor-id="importar-múltiples-archivos">
<span class="header-section-number">4.1.2</span> Importar múltiples archivos</h3>
<p>En ocasiones tenemos múltiples archivos en una carpeta (e.g.&nbsp;uno por participante) y queremos combinarlos todos en un solo data frame.</p>
<p>Por suerte, las funciones como <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> admiten un vector con varios archivos.</p>
<p>Para importar todos los archivos que están en la carpeta <code>data/files/02-CSVs</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Directorio donde se encuentran los archivos</span></span>
<span><span class="va">name_of_folder</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-CSVs"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Listamos los archivos a leer</span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">name_of_folder</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Leemos todos los archivos, combinándolos en un data frame</span></span>
<span><span class="va">full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">files</span><span class="op">)</span></span>
<span></span>
<span><span class="va">full</span></span>
<span><span class="co">#&gt; # A tibble: 1,600 × 9</span></span>
<span><span class="co">#&gt;   Sex   Priming    trialN Block Adjective  Valence  Answer Arrow    rT</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 male  Collective      1 we    ofensivo   negative yes    left    623</span></span>
<span><span class="co">#&gt; 2 male  Collective      2 we    resentido  negative no     right  1235</span></span>
<span><span class="co">#&gt; 3 male  Collective      3 we    ego�sta    negative yes    left    335</span></span>
<span><span class="co">#&gt; 4 male  Collective      4 we    indiscreto negative yes    left    355</span></span>
<span><span class="co">#&gt; 5 male  Collective      5 we    sumiso     negative yes    left    618</span></span>
<span><span class="co">#&gt; 6 male  Collective      6 we    agradable  positive yes    left    328</span></span>
<span><span class="co">#&gt; # ℹ 1,594 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lamentablemente, cuando leamos otro tipo de archivos (e.g.&nbsp;<code>.xlsx</code>), no podemos usar la función <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>. Veamos una manera de hacer leer múltiples archivos que se puede usar con cualquier función para leer datos.</p>
<p>Usaremos <code><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_df()</a></code> del paquete <a href="https://purrr.tidyverse.org/">purrr</a>, que aplica la función que queramos a cada uno de los archivos que le indiquemos, uno a uno:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Directorio donde se encuentran los archivos</span></span>
<span><span class="va">name_of_folder</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-CSVs"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Listamos los archivos a leer</span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">name_of_folder</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Leemos todos los archivos de uno en uno, combinándolos en un data frame</span></span>
<span><span class="va">full</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_df</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">read_csv</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mostramos lo que contiene full</span></span>
<span><span class="va">full</span></span>
<span><span class="co">#&gt; # A tibble: 1,600 × 9</span></span>
<span><span class="co">#&gt;   Sex   Priming    trialN Block Adjective  Valence  Answer Arrow    rT</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 male  Collective      1 we    ofensivo   negative yes    left    623</span></span>
<span><span class="co">#&gt; 2 male  Collective      2 we    resentido  negative no     right  1235</span></span>
<span><span class="co">#&gt; 3 male  Collective      3 we    ego�sta    negative yes    left    335</span></span>
<span><span class="co">#&gt; 4 male  Collective      4 we    indiscreto negative yes    left    355</span></span>
<span><span class="co">#&gt; 5 male  Collective      5 we    sumiso     negative yes    left    618</span></span>
<span><span class="co">#&gt; 6 male  Collective      6 we    agradable  positive yes    left    328</span></span>
<span><span class="co">#&gt; # ℹ 1,594 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="incluir-nombres-de-archivos" class="level4" data-number="4.1.2.1"><h4 data-number="4.1.2.1" class="anchored" data-anchor-id="incluir-nombres-de-archivos">
<span class="header-section-number">4.1.2.1</span> Incluir nombres de archivos</h4>
<p>Habitualmente será importante saber a que archivo pertenecen los datos que hemos leído.</p>
<p>Podemos incluir los nombres de archivo en una columna:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Nombre de la carpeta</span></span>
<span><span class="va">name_of_folder</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-CSVs"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Listamos los archivos dentro de esa carpeta</span></span>
<span><span class="va">files_simple</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">name_of_folder</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Asignamos nombres a los elementos del vector</span></span>
<span><span class="va">files</span> <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span><span class="op">(</span><span class="va">files_simple</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html">basename</a></span><span class="op">(</span><span class="va">files_simple</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Con el parámetro .id, almacenamos los nombres en la columna "file"</span></span>
<span><span class="va">full2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_df</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">read_csv</span>, .id <span class="op">=</span> <span class="st">"file"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="con-parametros" class="level4" data-number="4.1.2.2"><h4 data-number="4.1.2.2" class="anchored" data-anchor-id="con-parametros">
<span class="header-section-number">4.1.2.2</span> Con parametros</h4>
<p>Añadimos parámetros a la función de lectura. En este caso, definimos el tipo de columna esperado con la función <code>col_types()</code>. Con esto nos aseguraremos que si alguno de los archivos tiene el tipo de datos “incorrecto”, aparecerán warnings en la importación:</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">name_of_folder</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-CSVs"</span><span class="op">)</span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">name_of_folder</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_df</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">read_csv</span>,</span>
<span>               <span class="co"># Ponemos los parámetros separados por comas, después de la función</span></span>
<span>               col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span></span>
<span>                 .default <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                 Sex <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_factor.html">col_factor</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                 trialN <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                 Valence <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_factor.html">col_factor</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                 rT <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span></span>
<span>                 <span class="op">)</span></span>
<span>               <span class="op">)</span></span>
<span></span>
<span><span class="va">full</span></span>
<span><span class="co">#&gt; # A tibble: 1,600 × 9</span></span>
<span><span class="co">#&gt;   Sex   Priming    trialN Block Adjective  Valence  Answer Arrow    rT</span></span>
<span><span class="co">#&gt;   &lt;fct&gt; &lt;chr&gt;       &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;fct&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 male  Collective      1 we    ofensivo   negative yes    left    623</span></span>
<span><span class="co">#&gt; 2 male  Collective      2 we    resentido  negative no     right  1235</span></span>
<span><span class="co">#&gt; 3 male  Collective      3 we    ego�sta    negative yes    left    335</span></span>
<span><span class="co">#&gt; 4 male  Collective      4 we    indiscreto negative yes    left    355</span></span>
<span><span class="co">#&gt; 5 male  Collective      5 we    sumiso     negative yes    left    618</span></span>
<span><span class="co">#&gt; 6 male  Collective      6 we    agradable  positive yes    left    328</span></span>
<span><span class="co">#&gt; # ℹ 1,594 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Otra manera de hacer exactamente lo mismo con <code><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_df()</a></code>. El código es algo más complejo, pero nos da más flexibilidad, y podemos usar las funciones del mismo modo que habitualmente.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">name_of_folder</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-CSVs"</span><span class="op">)</span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">name_of_folder</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">full2</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_df</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">files</span><span class="op">)</span>, <span class="op">~</span> <span class="op">{</span></span>
<span>  <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html">cli_alert_info</a></span><span class="op">(</span><span class="st">"Reading file {basename(files[.x])}"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">files</span><span class="op">[</span><span class="va">.x</span><span class="op">]</span>, col_types <span class="op">=</span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span>.default <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_character</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>                                        Sex <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_factor.html">col_factor</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                        trialN <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                        Valence <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_factor.html">col_factor</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                                        rT <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html">col_double</a></span><span class="op">(</span><span class="op">)</span></span>
<span>                                        <span class="op">)</span></span>
<span>           <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Comprobamos que no hay diferencias</span></span>
<span><span class="fu">waldo</span><span class="fu">::</span><span class="fu"><a href="https://waldo.r-lib.org/reference/compare.html">compare</a></span><span class="op">(</span><span class="va">full</span>, <span class="va">full2</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ No differences</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="ejercicios---importar-múltiples-archivos" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios---importar-múltiples-archivos">Ejercicios - Importar múltiples archivos</h3>
<ol type="1">
<li>Cuando más arriba importamos los archivos que están en la carpeta <code>data/files/02-CSVs</code>:</li>
</ol>
<ul>
<li>¿Qué archivos importamos exactamente?</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
¿Ves algún problema en lo que hicimos?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">Revisa el número de filas y el contenido de la variable <code>files</code>.</span></p>
</div>
</div>
</div>
<p>El resultado final debería ser así:</p>
<div class="cell">
<pre><code>#&gt; # A tibble: 1,200 × 9
#&gt;   Sex   Priming    trialN Block Adjective  Valence  Answer Arrow    rT
#&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
#&gt; 1 male  Collective      1 we    ofensivo   negative yes    left    623
#&gt; 2 male  Collective      2 we    resentido  negative no     right  1235
#&gt; 3 male  Collective      3 we    ego�sta    negative yes    left    335
#&gt; 4 male  Collective      4 we    indiscreto negative yes    left    355
#&gt; 5 male  Collective      5 we    sumiso     negative yes    left    618
#&gt; 6 male  Collective      6 we    agradable  positive yes    left    328
#&gt; # ℹ 1,194 more rows</code></pre>
</div>
<ol start="2" type="1">
<li>Leed los archivos .xlsx de la carpeta <code>data/files/02-XLSs</code>, combinándolos en un único DF. El resultado final debería ser como se ve a continuación:</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pista
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Tendréis que usar <code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code> usando el parámetro <code>pattern</code></p>
<ul>
<li>Te recomiendo abrir los archivos excel para ver su estructura, las pestañas que tienen… ahí te darás cuenta de que necesitas otros parámetros de <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx()</a></code> como <code>sheet</code> o <code>skip</code>
</li>
</ul>
</div>
</div>
</div>
<div class="cell">
<pre><code>#&gt; # A tibble: 1,200 × 9
#&gt;   Sex   Priming    trialN Block Adjective  Valence  Answer Arrow    rT
#&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
#&gt; 1 male  Collective      1 we    ofensivo   negative yes    left    623
#&gt; 2 male  Collective      2 we    resentido  negative no     right  1235
#&gt; 3 male  Collective      3 we    ego�sta    negative yes    left    335
#&gt; 4 male  Collective      4 we    indiscreto negative yes    left    355
#&gt; 5 male  Collective      5 we    sumiso     negative yes    left    618
#&gt; 6 male  Collective      6 we    agradable  positive yes    left    328
#&gt; # ℹ 1,194 more rows</code></pre>
</div>
</section><section id="limpiar-nombres-de-columnas" class="level3" data-number="4.1.3"><h3 data-number="4.1.3" class="anchored" data-anchor-id="limpiar-nombres-de-columnas">
<span class="header-section-number">4.1.3</span> Limpiar nombres de columnas</h3>
<p>El paquete {janitor} tiene una función muy útil llamada <code><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names()</a></code> que aplica algunas reglas sencillas para estandarizar los nombres de columnas:</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">DF_name</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "...1"         "ID"           "Genero"       "Edad"        </span></span>
<span><span class="co">#&gt; [5] "Educacion"    "FollowUP"     "condition"    "condition2"  </span></span>
<span><span class="co">#&gt; [9] "PPV_DECLARED"</span></span>
<span></span>
<span><span class="va">DF_names_clean</span> <span class="op">=</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="va">DF_name</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">DF_names_clean</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "x1"           "id"           "genero"       "edad"        </span></span>
<span><span class="co">#&gt; [5] "educacion"    "follow_up"    "condition"    "condition2"  </span></span>
<span><span class="co">#&gt; [9] "ppv_declared"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="exportar-datos" class="level3" data-number="4.1.4"><h3 data-number="4.1.4" class="anchored" data-anchor-id="exportar-datos">
<span class="header-section-number">4.1.4</span> Exportar datos</h3>
<p>Muchas veces guardaremos los datos una vez procesados. Esto se puede hacer con la familia de funciones <code>write_*</code>.</p>
<p>Siguiendo el ejercicio anterior, después de leer los archivos excel de una carpeta y limpiar los nombres de columna, queremos guardar el data frame resultante en la carpeta <code>data_clean</code> (¡es importante asegurarnos que esa carpeta existe!).</p>
<section id="archivos-csv-1" class="level4" data-number="4.1.4.1"><h4 data-number="4.1.4.1" class="anchored" data-anchor-id="archivos-csv-1">
<span class="header-section-number">4.1.4.1</span> Archivos CSV</h4>
<p>Si queremos que el archivo guardado sea un <code>csv</code>, usaremos <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv()</a></code> del paquete {<code>readr</code>}.</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Lo que hicimos antes, leemos todos los archivos excel de un directorio</span></span>
<span><span class="va">name_of_folder</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-XLSs"</span><span class="op">)</span></span>
<span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="va">name_of_folder</span>, pattern <span class="op">=</span> <span class="st">"xls"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">DF_all</span> <span class="op">=</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_df</a></span><span class="op">(</span><span class="va">files</span>, <span class="va">read_xlsx</span>, sheet <span class="op">=</span> <span class="fl">2</span>, skip <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="va">DF_all</span>, <span class="st">"data_clean/DF_all.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="otros-archivos" class="level4" data-number="4.1.4.2"><h4 data-number="4.1.4.2" class="anchored" data-anchor-id="otros-archivos">
<span class="header-section-number">4.1.4.2</span> Otros Archivos</h4>
<p>La función a usar cambiará en función del formato que queramos:</p>
<ul>
<li>
<code>xlsx</code>: <code><a href="https://docs.ropensci.org/writexl//reference/write_xlsx.html">writexl::write_xlsx()</a></code><br>
</li>
<li>
<code>sav</code>: <code><a href="https://haven.tidyverse.org/reference/read_spss.html">haven::write_sav()</a></code><br>
</li>
<li>
<code>ods</code>: <code><a href="https://docs.ropensci.org/readODS/reference/write_ods.html">readODS::write_ods()</a></code>
</li>
<li>
<code>rds</code>: <code><a href="https://readr.tidyverse.org/reference/read_rds.html">readr::write_rds()</a></code>
</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu">writexl</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/writexl//reference/write_xlsx.html">write_xlsx</a></span><span class="op">(</span><span class="va">DF_all</span>, <span class="st">"data_clean/DF_all.xlsx"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://haven.tidyverse.org/reference/read_spss.html">write_sav</a></span><span class="op">(</span><span class="va">DF_all</span>, <span class="st">"data_clean/DF_all.sav"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">readODS</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/readODS/reference/write_ods.html">write_ods</a></span><span class="op">(</span><span class="va">DF_all</span>, <span class="st">"data_clean/DF_all.ods"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds</a></span><span class="op">(</span><span class="va">DF_all</span>, <span class="st">"data_clean/DF_all.rds"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section></section><section id="preparación-y-transformación-de-datos" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="preparación-y-transformación-de-datos">
<span class="header-section-number">4.2</span> Preparación y transformación de datos</h2>
<p>Para la preparación y transformación de datos usaremos fundamentalmente <code>dplyr</code>. Hay otros paquetes <a href="https://h2oai.github.io/db-benchmark/">más rápidos</a> como <code>data.table</code>. Si trabajas con datos gigantescos (millones de filas), sin duda notarás la diferencia. La desventaja es que la sintaxis es (habitualmente) menos intuitiva.</p>
<section id="the-pipe" class="level3" data-number="4.2.1"><h3 data-number="4.2.1" class="anchored" data-anchor-id="the-pipe">
<span class="header-section-number">4.2.1</span> The pipe</h3>
<p>Con ggplot enlazábamos instrucciones (capas) usando <code>+</code>. Cuando trabajemos con datos, usaremos “tuberias” (pipes) <code>|&gt;</code>.</p>
<p>Las pipes <code>|&gt;</code> o <code>%&gt;%</code> (CONTROL + SHIFT + M) nos permiten enlazar operaciones de transformación de datos de manera sencilla. Simplemente encadenamos instrucciones, poniendo una pipe para que cada instrucción llegue a la siguiente linea.</p>
<p>Imaginad que queremos realizar una serie de operaciones sobre unos datos, y guardarlos en un data frame llamado DATOS_limpios. Partimos de unos DATOS_originales, seleccionamos las columnas que nos interesan y filtramos los datos.</p>
<p>De manera esquemática:</p>
<pre><code>DATOS_limpios = 
  DATOS_originales |&gt; 
  seleccionamos_columnas(parámetros) |&gt; 
  filtramos_datos(parámetros)
</code></pre>
</section><section id="tidy-data" class="level3" data-number="4.2.2"><h3 data-number="4.2.2" class="anchored" data-anchor-id="tidy-data">
<span class="header-section-number">4.2.2</span> Tidy data</h3>
<p>Existen tres sencillas reglas que definen la <em>Tidy data</em>:</p>
<ol type="1">
<li>Cada variable tiene su columna propia</li>
<li>Cada observación tiene su fila propia</li>
<li>Cada valor tiene su celda propia</li>
</ol>
<p>Las ventajas fundamentales son:</p>
<ul>
<li>Uso de una manera consistente de trabajar, que se alinea con el tidyverse<br>
</li>
<li>Facilidad para trabajar con la lógica vectorizada</li>
</ul>
<hr>
<p>Por ejemplo. De manera muy sencilla y rápida podemos crear una nueva columna realizando algún cómputo arbitrario con los valores de otra columna.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Computa ratio por 100,000</span></span>
<span><span class="va">table1</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>rate_per_100K <span class="op">=</span> <span class="va">cases</span> <span class="op">/</span> <span class="va">population</span> <span class="op">*</span> <span class="fl">100000</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   country      year  cases population rate_per_100K</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Afghanistan  1999    745   19987071          3.73</span></span>
<span><span class="co">#&gt; 2 Afghanistan  2000   2666   20595360         12.9 </span></span>
<span><span class="co">#&gt; 3 Brazil       1999  37737  172006362         21.9 </span></span>
<span><span class="co">#&gt; 4 Brazil       2000  80488  174504898         46.1 </span></span>
<span><span class="co">#&gt; 5 China        1999 212258 1272915272         16.7 </span></span>
<span><span class="co">#&gt; 6 China        2000 213766 1280428583         16.7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O contar el número de casos por valor de una variable.</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Cuenta cuantos registros tenemos por año</span></span>
<span><span class="va">table1</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;    year     n</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  1999     3</span></span>
<span><span class="co">#&gt; 2  2000     3</span></span>
<span></span>
<span><span class="co"># Cuenta cuantos registros tenemos por año y país</span></span>
<span><span class="va">table1</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">country</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;    year country         n</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  1999 Afghanistan     1</span></span>
<span><span class="co">#&gt; 2  1999 Brazil          1</span></span>
<span><span class="co">#&gt; 3  1999 China           1</span></span>
<span><span class="co">#&gt; 4  2000 Afghanistan     1</span></span>
<span><span class="co">#&gt; 5  2000 Brazil          1</span></span>
<span><span class="co">#&gt; 6  2000 China           1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>También podemos hacer cosas algo más complejas, por ejemplo, aplicar funciones como <code>across</code> o <code>where(is.numeric)</code> para sumar todas las columnas de tipo numérico.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">table1</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>suma_absurda <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   country      year  cases population suma_absurda</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Afghanistan  1999    745   19987071     19989815</span></span>
<span><span class="co">#&gt; 2 Afghanistan  2000   2666   20595360     20600026</span></span>
<span><span class="co">#&gt; 3 Brazil       1999  37737  172006362    172046098</span></span>
<span><span class="co">#&gt; 4 Brazil       2000  80488  174504898    174587386</span></span>
<span><span class="co">#&gt; 5 China        1999 212258 1272915272   1273129529</span></span>
<span><span class="co">#&gt; 6 China        2000 213766 1280428583   1280644349</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Y, como no, <code>ggplot</code> funciona con datos <code>tidy</code>, en formato long.</p>
</section><section id="verbos-dplyr" class="level3" data-number="4.2.3"><h3 data-number="4.2.3" class="anchored" data-anchor-id="verbos-dplyr">
<span class="header-section-number">4.2.3</span> Verbos dplyr</h3>
<p>Usaremos <a href="https://dplyr.tidyverse.org/">{dplyr}</a>, un paquete muy potente para la manipulación de datos. Su sintaxis, además, es bastante intuitiva (¡son verbos en inglés!).</p>
<p>Podemos ver más detalle y ejemplos en la <a href="https://github.com/rstudio/cheatsheets/raw/main/data-transformation.pdf">Cheatsheet de dplyr</a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Verbos esenciales
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>filter(): filtrar filas<br>
</li>
<li>arrange(): ordenar filas<br>
</li>
<li>select(): seleccionar columnas<br>
</li>
<li>rename(): renombrar columnas<br>
</li>
<li>mutate(): crear columnas, modificar columnas, etc.</li>
</ul>
</div>
</div>
<section id="tabla-resumen-dplyr" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="tabla-resumen-dplyr">Tabla resumen dplyr</h4>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-74cfae68c7f2192b61f0" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-74cfae68c7f2192b61f0">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13"],["Filtrar","Ordenar","Seleccionar/eliminar variables","Renombrar variables","Separar contenidos de variable","Extraer valores únicos","Crear/modificar variables","Omitir NAs","Wide to long","Long to wide","Combinar bases de datos","Recodificar valores","Recodificar valores"],["filter()","arrange()","select()","rename()","separate()","distinct()","mutate()","drop_na()","pivot_longer()","pivot_wider()","left_join()","ifelse()","case_when()"],["datos |&gt; filter(Sexo == 1)","datos |&gt; arrange(Sexo)","datos |&gt; select(-Sexo)","datos |&gt; rename(Genero = Sexo)","datos |&gt; separate(var_name, c('First', 'Second'), sep = '_')","datos |&gt; distinct(Edad, .keep_all = T)","datos |&gt; mutate(Viejo = Edad &gt; 30)","datos |&gt; drop_na(Sexo)","datos |&gt; pivot_longer(4:6, names_to = 'Condition', values_to = 'VD')","datos |&gt; pivot_wider(names_from = Condition, values_from = VD)","left_join(datos1, datos2, by = 'ID')","datos |&gt;  mutate(Edad = ifelse(Edad &gt; 30, 'Viejo', 'Joven'))","datos |&gt;  mutate(Edad = case_when(Edad &gt; 30 ~ 'Viejo', 'Joven')"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>tarea<\/th>\n      <th>funcion<\/th>\n      <th>ejemplo<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":20,"dom":"t","columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"tarea","targets":1},{"name":"funcion","targets":2},{"name":"ejemplo","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,20,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="filtrar-y-ordenar-filas" class="level4" data-number="4.2.3.1"><h4 data-number="4.2.3.1" class="anchored" data-anchor-id="filtrar-y-ordenar-filas">
<span class="header-section-number">4.2.3.1</span> Filtrar y ordenar filas</h4>
<p>A partir de los siguientes datos:</p>
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span></span>
<span><span class="va">DF_name</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">name_of_file</span><span class="op">)</span></span>
<span><span class="va">DF_name</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1     4 41904      1    47         8       80 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 2     5 95041      2    21         6       90 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; 3     6 74594      2    29         6       10 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4    15 72903      2    27         7       75 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; 5    16 21260      1    29         5       35 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 6    18 50315      2    28         6       14 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Podemos usar el verbo <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> para mostrar las filas que cumplan cualquier regla lógica o combinación de reglas (e.g.&nbsp;Genero == 1 &amp; Edad &gt;= 30).</p>
<p>En el ejemplo siguiente, nos quedamos con las filas donde el valor de Educación sea mayor de 8:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Educacion</span> <span class="op">&gt;</span> <span class="fl">8</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1   157 12207      1    26         9       57 PPV_Cond2 100RInt   </span></span>
<span><span class="co">#&gt; 2   287 60873      1    72        10       51 PPV_Cond3 100RAmp   </span></span>
<span><span class="co">#&gt; 3   381 64486      2    19         9       80 PPV_Cond4 100RAmp   </span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si queremos usar varias condiciones lógicas, las reparamos de <code>&amp;</code> (AND).</p>
<p>Aquí nos quedamos con las filas donde el valor de Educación sea mayor de 8 <strong>Y</strong> el Genero sea igual a 1 (fíjate que usamos <code>==</code> para indicar la condición lógica de igualdad):</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Educacion</span> <span class="op">&gt;</span> <span class="fl">8</span> <span class="op">&amp;</span> <span class="va">Genero</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1   157 12207      1    26         9       57 PPV_Cond2 100RInt   </span></span>
<span><span class="co">#&gt; 2   287 60873      1    72        10       51 PPV_Cond3 100RAmp   </span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>También podemos ordenar las filas usando <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> solo o en combinación con <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code>.</p>
<p>Por ejemplo, ordenamos a partir de Educación, de menor a mayor:</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Educacion</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Genero</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1   350 20439      2    41         1       81 PPV_Cond4 90LAmp    </span></span>
<span><span class="co">#&gt; 2   399 81379      1    36         1       90 PPV_Cond4 90RAmp    </span></span>
<span><span class="co">#&gt; 3    42 20361      2    37         2       60 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4   364 19201      2    21         2       67 PPV_Cond4 90LAmp    </span></span>
<span><span class="co">#&gt; 5   412 60292      1    28         2       90 PPV_Cond4 100LAmp   </span></span>
<span><span class="co">#&gt; 6    44 92735      2    30         3       95 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si queremos ordenar a partir de dos o más criterios, simplemente los separamos por coma. Además, si queremos que alguno de ellos sea de manera descendente (por defecto es ascendente), envolvemos el nombre de columna en <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code>.</p>
<p>Abajo, ordenamos educación de manera ascendente, y de Género descendente:</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">Educacion</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Genero</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1   350 20439      2    41         1       81 PPV_Cond4 90LAmp    </span></span>
<span><span class="co">#&gt; 2   399 81379      1    36         1       90 PPV_Cond4 90RAmp    </span></span>
<span><span class="co">#&gt; 3    42 20361      2    37         2       60 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4   364 19201      2    21         2       67 PPV_Cond4 90LAmp    </span></span>
<span><span class="co">#&gt; 5   412 60292      1    28         2       90 PPV_Cond4 100LAmp   </span></span>
<span><span class="co">#&gt; 6    44 92735      2    30         3       95 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="seleccionar-ordenar-y-renombrar-columnas" class="level4" data-number="4.2.3.2"><h4 data-number="4.2.3.2" class="anchored" data-anchor-id="seleccionar-ordenar-y-renombrar-columnas">
<span class="header-section-number">4.2.3.2</span> Seleccionar, ordenar y renombrar columnas</h4>
<p>Seleccionamos las columnas que queremos listando las variables en el orden deseado dentro del verbo <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>:</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Genero</span>, <span class="va">Edad</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 2</span></span>
<span><span class="co">#&gt;   Genero  Edad</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1      1    47</span></span>
<span><span class="co">#&gt; 2      2    21</span></span>
<span><span class="co">#&gt; 3      2    29</span></span>
<span><span class="co">#&gt; 4      2    27</span></span>
<span><span class="co">#&gt; 5      1    29</span></span>
<span><span class="co">#&gt; 6      2    28</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eliminamos columnas precediendo las variables a eliminar con <code>-</code> dentro de <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>:</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">...1</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 8</span></span>
<span><span class="co">#&gt;      ID Genero  Edad Educacion FollowUP condition condition2 PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904      1    47         8       80 PPV_Cond1 90LInt               99</span></span>
<span><span class="co">#&gt; 2 95041      2    21         6       90 PPV_Cond1 90RInt               99</span></span>
<span><span class="co">#&gt; 3 74594      2    29         6       10 PPV_Cond1 100LInt              99</span></span>
<span><span class="co">#&gt; 4 72903      2    27         7       75 PPV_Cond1 100RInt               1</span></span>
<span><span class="co">#&gt; 5 21260      1    29         5       35 PPV_Cond1 90LInt               24</span></span>
<span><span class="co">#&gt; 6 50315      2    28         6       14 PPV_Cond1 90RInt               NA</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ordenamos y eliminamos columnas listando las variables en el orden deseado dentro del verbo <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> y precediendo las variables a eliminar con <code>-</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="va">Edad</span>, <span class="va">Genero</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">-</span><span class="va">...1</span><span class="op">)</span> </span>
<span><span class="co">#&gt; # A tibble: 103 × 8</span></span>
<span><span class="co">#&gt;      ID  Edad Genero Educacion FollowUP condition condition2 PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904    47      1         8       80 PPV_Cond1 90LInt               99</span></span>
<span><span class="co">#&gt; 2 95041    21      2         6       90 PPV_Cond1 90RInt               99</span></span>
<span><span class="co">#&gt; 3 74594    29      2         6       10 PPV_Cond1 100LInt              99</span></span>
<span><span class="co">#&gt; 4 72903    27      2         7       75 PPV_Cond1 100RInt               1</span></span>
<span><span class="co">#&gt; 5 21260    29      1         5       35 PPV_Cond1 90LInt               24</span></span>
<span><span class="co">#&gt; 6 50315    28      2         6       14 PPV_Cond1 90RInt               NA</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para renombrar variables usamos el verbo <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code>. Es importante recordar que en hay que indicar <code>rename(NOMBRE_NUEVO = NOMBRE_ANTIGUO)</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>Identificador <span class="op">=</span> <span class="va">ID</span>,</span>
<span>         Sexo <span class="op">=</span> <span class="va">Genero</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1 Identificador  Sexo  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1     4         41904     1    47         8       80 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 2     5         95041     2    21         6       90 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; 3     6         74594     2    29         6       10 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4    15         72903     2    27         7       75 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; 5    16         21260     1    29         5       35 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 6    18         50315     2    28         6       14 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="ejercicios---verbos-dplyr-simples" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios---verbos-dplyr-simples">Ejercicios - verbos dplyr simples</h4>
<ul>
<li>Cuenta los registros por año en el data frame <code>mpg</code><br>
</li>
<li>Filtra los datos para quedarnos solo con los del año 1999</li>
<li>Renombra la variable displ para que se llame “engine displacement”
<ul>
<li>Si aparece el error <code>Error: unexpected symbol in ...</code>, puedes ver la ayuda de la función ?make.names, o <a href="https://stackoverflow.com/questions/22842232/dplyr-nonstandard-column-names-white-space-punctuation-starts-with-numbers">este post</a>
</li>
</ul>
</li>
<li>Ordena los datos (no las columnas) por consumo en ciudad <code>cty</code> y clase de vehículo <code>class</code>
</li>
<li>Crea un data frame que no contenga la variable <code>model</code>
</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Soluciones
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;"> - <code>mpg |&gt; count(year)</code><br>
- <code>mpg |&gt; filter(year == 1999)</code><br>
- <code>mpg |&gt; rename(engine displacement = displ)</code> #ERROR<br>
- <code>mpg |&gt; rename(engine_displacement = displ)</code> #SOLUCION1<br>
- mpg |&gt; rename(`engine displacement` = displ) #SOLUCION2<br>
- <code>mpg |&gt; arrange(cty, class)</code><br>
- <code>mpg |&gt; select(-model)</code> </span></p>
</div>
</div>
</div>
</section><section id="selección-avanzada-con-select_helpers" class="level4" data-number="4.2.3.3"><h4 data-number="4.2.3.3" class="anchored" data-anchor-id="selección-avanzada-con-select_helpers">
<span class="header-section-number">4.2.3.3</span> Selección avanzada con select_helpers()</h4>
<p>El <code><a href="https://tidyselect.r-lib.org/reference/everything.html">everything()</a></code> que usamos dentro de <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> más arriba es uno de los <code>select_helpers()</code> existentes. Estos nos ayudan a realizar operaciones de selección de variables sin necesidad de escribir a mano todas las variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
select_helpers()
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>starts_with(): Empieza con un prefijo (e.g.&nbsp;starts_with(“CI_”))<br>
</li>
<li>ends_with(): Acaba con un sufijo<br>
</li>
<li>contains(): Contiene una cadena de texto específica<br>
</li>
<li>matches(): Matches a regular expression<br>
</li>
<li>num_range(): Matches a numerical range like x01, x02, x03<br>
</li>
<li>one_of(): Matches variable names in a character vector<br>
</li>
<li>everything(): Matches all variables<br>
</li>
<li>last_col(): Select last variable</li>
</ul>
</div>
</div>
<p>Trabajaremos con los datos del paper <a href="https://osf.io/egxy5/">Cognitive and Socio-affective Predictors of Social Adaptation</a>, de Neely et al.&nbsp;Estos se pueden encontrar en un repositorio público de la OSF. Empezaremos con la base RAW en formato wide. Leemos la base y mostramos los títulos de las 291 columnas:</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="va">df_wide</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/gorkang/cognitive-and-socio-affective-predictors-of-social-adaptation/master/data-raw/sa-raw-anonymised.csv"</span><span class="op">)</span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">df_wide</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; ID dem_genero dem_edad dem_nivedu WVOC_01_cod WVOC_02_cod WVOC_03_cod WVOC_04_cod WVOC_05_cod WVOC_06_cod WVOC_07_cod WVOC_08_cod WVOC_09_cod WVOC_10_cod WVOC_11_cod WVOC_12_cod WVOC_13_cod WVOC_14_cod WVOC_15_cod WVOC_16_cod WVOC_17_cod WVOC_18_cod WVOC_19_cod WVOC_20_cod WVOC_21_cod WVOC_22_cod WVOC_23_cod WVOC_24_cod WVOC_25_cod WVOC_26_cod WVOC_27_cod WVOC_28_cod WVOC_29_cod WVOC_30_cod WVOC_31_cod WVOC_32_cod WVOC_33_cod WVOC_TOTAL WVOC_TOTAL_STD WMAT_01_cod WMAT_01_raw WMAT_02_cod WMAT_02_raw WMAT_03_cod WMAT_03_raw WMAT_04_cod WMAT_04_raw WMAT_05_cod WMAT_05_raw WMAT_06_cod WMAT_06_raw WMAT_07_cod WMAT_07_raw WMAT_08_cod WMAT_08_raw WMAT_09_cod WMAT_09_raw WMAT_10_cod WMAT_10_raw WMAT_11_cod WMAT_11_raw WMAT_12_cod WMAT_12_raw WMAT_13_cod WMAT_13_raw WMAT_14_cod WMAT_14_raw WMAT_15_cod WMAT_15_raw WMAT_16_cod WMAT_16_raw WMAT_17_cod WMAT_17_raw WMAT_18_cod WMAT_18_raw WMAT_19_cod WMAT_19_raw WMAT_20_cod WMAT_20_raw WMAT_21_cod WMAT_21_raw WMAT_22_cod WMAT_22_raw WMAT_23_cod WMAT_23_raw WMAT_24_cod WMAT_24_raw WMAT_25_cod WMAT_25_raw WMAT_26_cod WMAT_26_raw WMAT_A WMAT_B WMAT_C wmat_total wmat_total_std bfbs_01_cod bfbs_01_conf bfbs_01_raw bfbs_03_cod bfbs_03_conf bfbs_03_raw bfbs_04_cod bfbs_04_conf bfbs_04_raw bfbs_10_cod bfbs_10_conf bfbs_10_raw bfbs_12_cod bfbs_12_conf bfbs_12_raw bfbs_14_cod bfbs_14_conf bfbs_14_raw bfbs_17_cod bfbs_17_conf bfbs_17_raw bfbs_23_cod bfbs_23_conf bfbs_23_raw bfbs_conf_total bfbs_cong_conf bfbs_cong_total bfbs_creib_conf bfbs_creib_total bfbs_incong_conf bfbs_incon_total bfbs_increib_conf bfbs_increib_total bfbs_invalid_conf bfbs_invalid_total bfbs_total bfbs_valid_conf bfbs_valid_total EA_01_raw EA_02_raw EA_03_raw EA_04_raw EA_05_raw EA_06_raw EA_07_raw EA_08_raw EA_09_raw EA_10_raw EA_11_raw EA_12_raw EA_13_raw EA_14_raw EA_15_raw EA_16_raw EA_17_raw EA_18_raw EA_19_raw EA_20_raw EA_21_raw EA_22_raw EA_23_raw EA_24_raw EA_azar_TOTAL EA_control_interno_TOTAL EA_otros_poderosos_TOTAL EAR_01_raw EAR_02_raw EAR_03_raw EAR_04_raw EAR_05_raw EAR_06_raw EAR_07_raw EAR_08_raw EAR_09_raw EAR_10_raw EAR_TOTAL ECRRS_ansiedad_TOTAL ECRRS_evitacion_TOTAL ECRRS_madre_01_raw ECRRS_madre_02_raw ECRRS_madre_03_raw ECRRS_madre_04_raw ECRRS_madre_05_raw ECRRS_madre_06_raw ECRRS_madre_07_raw ECRRS_madre_08_raw ECRRS_madre_09_raw ECRRS_madre_ansiedad_TOTAL ECRRS_madre_evitacion_TOTAL ECRRS_mejoramig_01_raw ECRRS_mejoramig_02_raw ECRRS_mejoramig_03_raw ECRRS_mejoramig_04_raw ECRRS_mejoramig_05_raw ECRRS_mejoramig_06_raw ECRRS_mejoramig_07_raw ECRRS_mejoramig_08_raw ECRRS_mejoramig_09_raw ECRRS_mejoramigo_ansiedad_TOTAL ECRRS_mejoramigo_evitacion_TOTAL ECRRS_padre_01_raw ECRRS_padre_02_raw ECRRS_padre_03_raw ECRRS_padre_04_raw ECRRS_padre_05_raw ECRRS_padre_06_raw ECRRS_padre_07_raw ECRRS_padre_08_raw ECRRS_padre_09_raw ECRRS_padre_ansiedad_TOTAL ECRRS_padre_evitacion_TOTAL ECRRS_pareja_01_raw ECRRS_pareja_02_raw ECRRS_pareja_03_raw ECRRS_pareja_04_raw ECRRS_pareja_05_raw ECRRS_pareja_06_raw ECRRS_pareja_07_raw ECRRS_pareja_08_raw ECRRS_pareja_09_raw ECRRS_pareja_ansiedad_TOTAL ECRRS_pareja_evitacion_TOTAL GHQ_01 GHQ_02 GHQ_03 GHQ_04 GHQ_05 GHQ_06 GHQ_07 GHQ_08 GHQ_09 GHQ_10 GHQ_11 GHQ_12 GHQ_autoestima_TOTAL GHQ_estres_TOTAL GHQ_exito_afrontamiento_TOTAL GHQ_TOTAL wdig_dir_total wdig_inv_total WDIGSIMB_TOTAL wdig_total wdig_total_std lkns_01_cod lkns_01_raw lkns_02_cod lkns_02_raw lkns_03_cod lkns_03_raw lkns_04_cod lkns_04_raw lkns_05_cod lkns_05_raw lkns_06_cod lkns_06_raw lkns_07_cod lkns_07_raw lkns_08_cod lkns_08_raw lkns_09_cod lkns_09_raw lkns_10_cod lkns_10_raw lkns_11_cod lkns_11_raw lkns_total SASS_01_raw SASS_02_raw SASS_03_raw SASS_04_raw SASS_05_raw SASS_06_raw SASS_07_raw SASS_08_raw SASS_09_raw SASS_10_raw SASS_11_raw SASS_12_raw SASS_13_raw SASS_14_raw SASS_15_raw SASS_16_raw SASS_17_raw SASS_18_raw SASS_19_raw SASS_20_raw SASS_21_raw SASS_TOTAL SASS_trabajo bayes_all_accuracy bayes_all_confidence bayes_pictorial_qualitative_accuracy bayes_pictorial_quantitative_accuracy bayes_text_qualitative_accuracy bayes_text_quantitative_accuracy</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains()</a></code> seleccionamos variables que contienen la cadena de texto <code>dem</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="va">df_wide</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"dem"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 232 × 3</span></span>
<span><span class="co">#&gt;   dem_genero dem_edad dem_nivedu</span></span>
<span><span class="co">#&gt;        &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1          1       38          4</span></span>
<span><span class="co">#&gt; 2          0       67          2</span></span>
<span><span class="co">#&gt; 3          0       24          4</span></span>
<span><span class="co">#&gt; 4          0       30          4</span></span>
<span><span class="co">#&gt; 5          0       38          3</span></span>
<span><span class="co">#&gt; 6          0       45          4</span></span>
<span><span class="co">#&gt; # ℹ 226 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Usando <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with()</a></code> seleccionamos variables que acaban con la cadena de texto <code>cod</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="va">df_wide</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"cod"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 232 × 79</span></span>
<span><span class="co">#&gt;      ID WVOC_01_cod WVOC_02_cod WVOC_03_cod WVOC_04_cod WVOC_05_cod</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1           2           2           2           1           2</span></span>
<span><span class="co">#&gt; 2     2           2           2           2           1           0</span></span>
<span><span class="co">#&gt; 3     3           2           2           2           1           2</span></span>
<span><span class="co">#&gt; 4     4           2           1           1           1           2</span></span>
<span><span class="co">#&gt; 5     5           2           2           1           1           0</span></span>
<span><span class="co">#&gt; 6     6           1           1           2           1           2</span></span>
<span><span class="co">#&gt; # ℹ 226 more rows</span></span>
<span><span class="co">#&gt; # ℹ 73 more variables: WVOC_06_cod &lt;dbl&gt;, WVOC_07_cod &lt;dbl&gt;, …</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finalmente, <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code> nos permite usar todo la potencia de las <a href="04-preparacion-transformacion.html#regular-expressions">expresiones regulares</a>. En este caso, también le pedimos variables que acaban con la cadena de texto <code>cod</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="va">df_wide</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"cod$"</span><span class="op">)</span><span class="op">)</span> <span class="co"># $: fin de la cadena de texto</span></span>
<span><span class="co">#&gt; # A tibble: 232 × 79</span></span>
<span><span class="co">#&gt;      ID WVOC_01_cod WVOC_02_cod WVOC_03_cod WVOC_04_cod WVOC_05_cod</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1           2           2           2           1           2</span></span>
<span><span class="co">#&gt; 2     2           2           2           2           1           0</span></span>
<span><span class="co">#&gt; 3     3           2           2           2           1           2</span></span>
<span><span class="co">#&gt; 4     4           2           1           1           1           2</span></span>
<span><span class="co">#&gt; 5     5           2           2           1           1           0</span></span>
<span><span class="co">#&gt; 6     6           1           1           2           1           2</span></span>
<span><span class="co">#&gt; # ℹ 226 more rows</span></span>
<span><span class="co">#&gt; # ℹ 73 more variables: WVOC_06_cod &lt;dbl&gt;, WVOC_07_cod &lt;dbl&gt;, …</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="modificar-y-añadir-variables" class="level4" data-number="4.2.3.4"><h4 data-number="4.2.3.4" class="anchored" data-anchor-id="modificar-y-añadir-variables">
<span class="header-section-number">4.2.3.4</span> Modificar y añadir variables</h4>
<p>Seguimos usando verbos de {dplyr}. Para crear nuevas variables o modificarlas reemplazando los valores usaremos <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>. Dentro de mutate podemos hacer cualquier operación con una o más variables.</p>
<p>Primero leemos nuestra base:</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">name_of_file</span> <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span></span>
<span><span class="va">DF_name</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="va">name_of_file</span><span class="op">)</span></span>
<span><span class="va">DF_name</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1     4 41904      1    47         8       80 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 2     5 95041      2    21         6       90 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; 3     6 74594      2    29         6       10 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4    15 72903      2    27         7       75 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; 5    16 21260      1    29         5       35 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 6    18 50315      2    28         6       14 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si usamos una variable ya existente, en este caso <code>PPV_DECLARED</code>, sus valores se sobrescriben:</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PPV_DECLARED <span class="op">=</span> <span class="va">PPV_DECLARED</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 9</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1     4 41904      1    47         8       80 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 2     5 95041      2    21         6       90 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; 3     6 74594      2    29         6       10 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4    15 72903      2    27         7       75 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; 5    16 21260      1    29         5       35 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 6    18 50315      2    28         6       14 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: PPV_DECLARED &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si usamos una variable no existente (<code>PPV_DECLARED_PCT</code>), la creamos:</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>PPV_DECLARED_PCT <span class="op">=</span> <span class="va">PPV_DECLARED</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 10</span></span>
<span><span class="co">#&gt;    ...1    ID Genero  Edad Educacion FollowUP condition condition2</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1     4 41904      1    47         8       80 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 2     5 95041      2    21         6       90 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; 3     6 74594      2    29         6       10 PPV_Cond1 100LInt   </span></span>
<span><span class="co">#&gt; 4    15 72903      2    27         7       75 PPV_Cond1 100RInt   </span></span>
<span><span class="co">#&gt; 5    16 21260      1    29         5       35 PPV_Cond1 90LInt    </span></span>
<span><span class="co">#&gt; 6    18 50315      2    28         6       14 PPV_Cond1 90RInt    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: PPV_DECLARED &lt;dbl&gt;, PPV_DECLARED_PCT &lt;dbl&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="resúmenes-agrupados" class="level4" data-number="4.2.3.5"><h4 data-number="4.2.3.5" class="anchored" data-anchor-id="resúmenes-agrupados">
<span class="header-section-number">4.2.3.5</span> Resúmenes agrupados</h4>
<p>La combinación de verbos <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> y <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> es una de las más usadas. Con esta podemos calcular promedios, medianas, etc. por condición de manera sencilla.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> nos permite ‘resumir’ datos, calculando promedios, medianas, o cualquier otro estadístico de interés. En este caso, vemos el promedio de la variable <code>PPV_DECLARED</code> usando <code>mean(PPV_DECLARED, na.rm = TRUE)</code>. El parámetro <code>na.rm = TRUE</code> ignora los valores <code>NA</code> que pueda haber en la base:</p>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>Promedio_PPV <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>            N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span><span class="co">#&gt;   Promedio_PPV     N</span></span>
<span><span class="co">#&gt;          &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1         68.1   103</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si incluimos <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> en la pipeline, esos ‘resúmenes’ se mostraran para cada valor de la variable por la que agrupamos:</p>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Genero</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>Promedio_PPV <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>            N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   Genero Promedio_PPV     N</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt;        &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1      1         65.9    40</span></span>
<span><span class="co">#&gt; 2      2         69.4    63</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Podemos agrupar por múltiples variables, y calcular tantas cosas como queramos. En ese caso la media, mediana, desviación estándar y el numero de observaciones:</p>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Genero</span>, <span class="va">condition</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>promedio_PPV <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            mediana_PPV <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            SD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 6</span></span>
<span><span class="co">#&gt; # Groups:   Genero [2]</span></span>
<span><span class="co">#&gt;   Genero condition promedio_PPV mediana_PPV    SD     N</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1      1 PPV_Cond1         63.8          88  43.1     9</span></span>
<span><span class="co">#&gt; 2      1 PPV_Cond2         50.2          46  10.3    13</span></span>
<span><span class="co">#&gt; 3      1 PPV_Cond3         75.6          80  32.5     5</span></span>
<span><span class="co">#&gt; 4      1 PPV_Cond4         79.1          91  20.0    13</span></span>
<span><span class="co">#&gt; 5      2 PPV_Cond1         72.6          99  43.8    19</span></span>
<span><span class="co">#&gt; 6      2 PPV_Cond2         49.4          46  16.3     8</span></span>
<span><span class="co">#&gt; # ℹ 2 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="ejercicios---verbos-dplyr" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios---verbos-dplyr">Ejercicios - verbos dplyr</h4>
<ol type="1">
<li>Usando la base df_wide (puedes usar el código de abajo), haz las siguientes cosas, una a una:</li>
</ol>
<pre><code>df_wide = read_csv("https://raw.githubusercontent.com/gorkang/cognitive-and-socio-affective-predictors-of-social-adaptation/master/data-raw/sa-raw-anonymised.csv")  
</code></pre>
<ul>
<li>Filtra el DF para quedarnos solo con edades entre 18 y 50 años<br>
</li>
<li>Ordena los datos por genero y edad, esta última decreciente<br>
</li>
<li>Selecciona las columnas para quedarnos solo con ID, variables demográficas, y respuestas crudas (raw)<br>
</li>
<li>Crea una nueva variable llamada <code>niv_edu_porc</code>, en la que calcules el nivel educativo al que han llegado dividido por el máximo de la base de datos, pero en porcentaje (nivel educativo persona / nivel educativo máximo; en porcentaje)</li>
</ul>
<ol start="2" type="1">
<li><p>Ahora combina el resultado de todas las operaciones anteriores en un DF</p></li>
<li><p>Calcula el promedio y desviación típica de edad para cada género</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pistas
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li>
<p>Paso a paso:</p>
<ul>
<li>
<code>filter(CONDICION1 &amp; CONDICION2)</code> o <code>filter(CONDICION1, CONDICION2)</code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> o <code>arrange(desc())</code>
</li>
<li>
<code>select(starts_with("ALGUN_PATRON"))</code> o <code>select(ends_with("ALGUN_PATRON"))</code>
</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> usando también <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>
</li>
</ul>
</li>
<li><p><code>DF_resultado = df_wide |&gt; operacion1 |&gt; operation2 |&gt; ...</code></p></li>
<li><p><code>group_by() |&gt; summarize()</code></p></li>
</ol>
</div>
</div>
</div>
</section></section></section><section id="verbos-avanzados-y-otras-criaturas-indómitas" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="verbos-avanzados-y-otras-criaturas-indómitas">
<span class="header-section-number">4.3</span> Verbos avanzados y otras criaturas indómitas</h2>
<section id="wide-to-long-simple" class="level3" data-number="4.3.1"><h3 data-number="4.3.1" class="anchored" data-anchor-id="wide-to-long-simple">
<span class="header-section-number">4.3.1</span> Wide to long simple</h3>
<p>Empecemos con un ejemplo muy sencillo. 2 participantes, cada uno en una condición, y 2 ítems.</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">df_simple_wide</span> <span class="op">=</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>    ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Participante1"</span>, <span class="st">"Participante2"</span><span class="op">)</span>,</span>
<span>    condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"calor"</span>, <span class="st">"frio"</span><span class="op">)</span>,</span>
<span>    Item1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22</span>, <span class="fl">33</span><span class="op">)</span>,</span>
<span>    Item2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">88</span>, <span class="fl">99</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">df_simple_wide</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span><span class="co">#&gt;   ID            condition Item1 Item2</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Participante1 calor        22    88</span></span>
<span><span class="co">#&gt; 2 Participante2 frio         33    99</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pasamos esta base de datos ‘ancha’ (una fila por participante), a una base en formato ‘largo’ (una fila por observación) usando la función <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code>. Solo tenemos que indicar el rango de columnas, asignar nombre a la columna donde enviaremos los nombres de las columnas, y asignar nombre a la columna donde estarán los valores:</p>
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">df_simple_long</span> <span class="op">=</span> <span class="va">df_simple_wide</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">Item1</span><span class="op">:</span><span class="va">Item2</span>,</span>
<span>               names_to <span class="op">=</span> <span class="st">"Item"</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"Response"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">df_simple_long</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 4</span></span>
<span><span class="co">#&gt;   ID            condition Item  Response</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Participante1 calor     Item1       22</span></span>
<span><span class="co">#&gt; 2 Participante1 calor     Item2       88</span></span>
<span><span class="co">#&gt; 3 Participante2 frio      Item1       33</span></span>
<span><span class="co">#&gt; 4 Participante2 frio      Item2       99</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="long-to-wide-simple" class="level3" data-number="4.3.2"><h3 data-number="4.3.2" class="anchored" data-anchor-id="long-to-wide-simple">
<span class="header-section-number">4.3.2</span> Long to wide simple</h3>
<p>Siguiendo con el ejemplo anterior, podemos devolver la base en formato ‘largo’ a ‘ancho’ de nuevo usando <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code>:</p>
<div class="cell">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">df_simple_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Item</span>, values_from <span class="op">=</span> <span class="va">Response</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span><span class="co">#&gt;   ID            condition Item1 Item2</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Participante1 calor        22    88</span></span>
<span><span class="co">#&gt; 2 Participante2 frio         33    99</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="para-que-sirve-tener-los-datos-en-formato-long" class="level4" data-number="4.3.2.1"><h4 data-number="4.3.2.1" class="anchored" data-anchor-id="para-que-sirve-tener-los-datos-en-formato-long">
<span class="header-section-number">4.3.2.1</span> ¿Para que sirve tener los datos en formato long?</h4>
<p>Hay algunos análisis para los que necesitamos formato long (e.g.&nbsp;anovas, modelos mixtos…), muchas gráficas con <code>ggplot</code> asumen formato long, y varias cosas se simplifican cuando los datos están en formato largo.</p>
<p>Por ejemplo, si queremos usar resúmenes agrupados para obtener la media, mediana, desviación estándar… por ítem, con el formato WIDE necesitaremos 3 lineas de código para cada ítem que tenga nuestra base (imagina con 100 ítems…). Con el formato long, el código de abajo es suficiente.</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># En formato wide podríamos usar cosas como:  </span></span>
<span>  <span class="co"># skimr::skim(df_simple_wide)</span></span>
<span></span>
<span><span class="co"># Añadir para cada ítem 3 líneas</span></span>
<span><span class="va">df_simple_wide</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_Item1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Item1</span><span class="op">)</span>,</span>
<span>            mean_Item2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Item2</span><span class="op">)</span>,</span>
<span>            <span class="co"># ...</span></span>
<span>            median_Item1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">Item1</span><span class="op">)</span>,</span>
<span>            median_Item2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">Item2</span><span class="op">)</span>,</span>
<span>            <span class="co"># ...</span></span>
<span>            sd_Item1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">Item1</span><span class="op">)</span>,</span>
<span>            sd_Item2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">Item2</span><span class="op">)</span>,</span>
<span>            <span class="co"># ...</span></span>
<span>            N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span></span>
<span>            <span class="co"># NO aparece N por ítem</span></span>
<span>            <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 7</span></span>
<span><span class="co">#&gt;   mean_Item1 mean_Item2 median_Item1 median_Item2 sd_Item1 sd_Item2     N</span></span>
<span><span class="co">#&gt;        &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1       27.5       93.5         27.5         93.5     7.78     7.78     2</span></span>
<span></span>
<span><span class="co"># Sirve para 1 ítem o para 10 millones de ítems</span></span>
<span><span class="va">df_simple_long</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Item</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>MEAN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Response</span><span class="op">)</span>,</span>
<span>            MEDIAN <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">Response</span><span class="op">)</span>,</span>
<span>            SD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">Response</span><span class="op">)</span>,</span>
<span>            N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span><span class="co">#&gt;   Item   MEAN MEDIAN    SD     N</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 Item1  27.5   27.5  7.78     2</span></span>
<span><span class="co">#&gt; 2 Item2  93.5   93.5  7.78     2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="wide-to-long-complex" class="level3" data-number="4.3.3"><h3 data-number="4.3.3" class="anchored" data-anchor-id="wide-to-long-complex">
<span class="header-section-number">4.3.3</span> Wide to long complex</h3>
<p>Ahora pasemos a un ejemplo mas complejo. Leemos la base de datos y seleccionamos las puntuaciones a los 11 ítems de la lipkus numeracy scale de 232 participantes, ademas de datos demográficos. Usamos <code><a href="https://rdrr.io/pkg/DT/man/datatable.html">DT::datatable()</a></code> para visualizar la base de manera interactiva.</p>
<div class="cell">
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Leemos documento en formato WIDE</span></span>
<span><span class="va">df_wide_complex</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/gorkang/cognitive-and-socio-affective-predictors-of-social-adaptation/master/data-raw/sa-raw-anonymised.csv"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Seleccionamos solo algunas de las filas</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ID</span>,</span>
<span>         <span class="va">dem_genero</span>,</span>
<span>         <span class="va">dem_edad</span>,</span>
<span>         <span class="va">dem_nivedu</span>,</span>
<span>         <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"lkns_[0-9]{2}_raw"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">df_wide_complex</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-c01c30d07c8447bee182" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c01c30d07c8447bee182">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232],[1,0,0,0,0,0,1,1,1,1,0,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,1,1,1,1,1,1,1,0,1,0,0,0,1,1,1,0,1,0,0,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0],[38,67,24,30,38,45,58,47,52,49,57,33,34,31,59,38,19,65,55,76,57,39,50,24,36,58,18,19,20,18,28,33,57,45,48,36,33,19,32,65,40,34,34,48,25,20,23,34,18,19,19,38,23,19,30,67,54,19,45,51,65,56,25,56,23,55,22,23,46,26,41,38,35,52,43,61,34,45,43,56,21,22,46,68,49,62,60,54,45,59,54,58,61,39,35,46,43,18,18,18,49,31,56,26,28,50,40,60,51,51,54,23,50,44,68,56,45,51,57,65,40,59,44,40,42,70,41,55,53,50,28,33,22,26,19,18,54,54,52,73,61,53,28,53,55,54,49,27,27,33,27,33,48,45,27,51,45,70,47,36,40,24,62,47,54,51,50,40,89,48,45,30,38,36,63,33,20,31,44,32,23,20,64,21,56,52,53,47,47,67,47,18,23,34,40,41,39,41,37,50,52,22,79,62,48,59,53,29,42,27,52,28,32,58,51,63,56,24,43,51,22,50,34,24,27,53,43,25,52,61,45,24],[4,2,4,4,3,4,3,4,3,4,1,5,1,3,3,5,3,5,1,2,2,3,1,4,4,2,3,5,2,3,3,4,2,3,2,4,3,2,4,1,5,2,2,3,3,4,3,4,3,4,3,4,4,5,4,1,1,2,1,2,1,1,5,1,4,3,3,2,3,4,4,3,2,3,1,3,4,3,5,3,5,3,1,3,1,1,1,3,4,1,3,3,1,4,1,3,1,3,3,3,3,1,2,3,4,1,3,4,4,1,3,3,2,4,1,3,2,2,1,1,3,1,1,2,3,3,3,4,2,3,2,4,4,4,5,3,3,1,2,1,3,1,4,2,2,2,5,4,4,4,3,4,4,4,5,4,3,5,3,4,4,3,1,3,3,1,2,4,1,5,2,1,3,2,1,4,4,3,3,2,2,5,3,3,1,3,3,2,4,1,3,4,4,4,3,3,1,4,3,1,1,1,1,4,1,3,1,4,3,1,1,1,5,2,4,1,1,4,4,1,2,3,5,3,2,1,3,3,4,1,5,2],[500,0,700,500,6,40,0,500,600,600,500,500,500,800,6,500,500,0,800,2000,80,500,500,500,500,100,700,500,500,400,500,300,4,0,800,600,600,100,200,6,100,100,700,30,500,900,500,500,300,800,50,500,500,500,500,800,80,450,0,600,800,100,500,0,500,10,5,100,30,100,500,500,500,500,20,500,600,500,50,500,500,500,0,500,100,0,500,100,600,500,600,100,800,6000,100,500,20,2,500,500,80,650,20,500,600,500,80,500,450,2,600,100,800,300,100,300,700,50,100,800,100,0,0,6,500,500,500,800,500,500,400,500,500,500,500,300,300,200,30,800,300,500,100,300,600,100,500,350,500,600,100,500,20,300,500,600,300,800,200,200,0,0,50,100,100,0,500,500,200,6,500,0,600,400,300,30,500,500,600,50,200,300,0,600,20,100,500,0,700,600,500,600,0,600,100,500,200,500,600,800,500,600,200,500,300,500,100,500,40,100,300,500,500,200,30,500,2,500,500,30,6,500,330,10,500,500,100,500,500,0,100,100],[10,0,100,30,2,200,0,100,1,500,100,10,10,10,1,10,1,0,50,0,20,10,500,1,10,100,2,1,1,2,50,100,1,0,0,200,200,50,1,10,100,500,100,0,1,100,100,10,400,500,5,10,10,1,1,1,2,500,0,3,1,100,400,0,5,3,3,4,10,50,5,1,200,10,10,1,1,2,10,1,0.1,1,0,1,20,0,1,100,2,0,1,1,1,1,5,1,1,1,1,100,5,1,2,1,10,10,5,3000,10,500,10,100,1,100,200,1,1,3,15,500,10,0,0,10,2,100,100,100,700,10,100,80,1,1,1,50,30,20,10,100,1,1,1,10,1,100,100,100,100,1,1,1,1,0,1000,5,10,1,5,1,0,0,5000,100,1,0,20,1,1,10,10,2,10,1,2,5,1,0,10,100,50,10,0,100,10,1,10,0,1,1,1,10,0,1,10,10,1,10,100,600,2,100,3,500,300,10,10,1,10,3,2,500,0,150,0,0,5,10,1,0,1,1,1,1,100,1,5,20,10,0,10,30],[10,0,0.1,1,3,2,0,0.1,1,70,100,0.1,10,1,1,1,50,0,10,0,1,10,30,1,1,1,1,1,1,1,100,1,10,0,1,30,100,10,2,50,1,5,100,0,1,10,30,1,50,10,1,9.99,0.1,0.1,1,1,2,39,0,1,1,1,10,0,1,2,10,20,10,1,1,10,3,1,30,1,1,1,1,1,0.1,10,0,1,5,0,1,2,2,1,1,100,1,50,0,20,50,1,1,50,1,1,1,1,0.01,1,10,2000,10,1,1,1,0,1,200,1,1,2,2,80,1,0,0,5,2,10,100,900,100,1,1,10,1,1,1,15,1,100,1,1,1,1,1,1,2,1,1,50,1,1,1000,1,1,0,1,1,1,1,1,1,0,0,1,1,1,0,1,1,1,5,2,100,1,0,0,10,1,1,10,1,1,10,0,1,1,1,10,0,0.1,1,1,0.1,0,1,10,1,1,1,5,2,1,1,1,1,1,1,1,1,30,50,2,100,0,1,0,0,1,10,5,0,1,1,1,1,20,1,5,5,1,0,1,10],["b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","a) 1 de cada 100","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","b) 1 de cada 1000","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","a) 1 de cada 100","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","b) 1 de cada 1000","a) 1 de cada 100","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","b) 1 de cada 1000","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","a) 1 de cada 100","a) 1 de cada 100","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","a) 1 de cada 100","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","b) 1 de cada 1000","b) 1 de cada 1000","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","a) 1 de cada 100","c) 1 de cada 10","c) 1 de cada 10","b) 1 de cada 1000","c) 1 de cada 10"],["b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","b)10%","c) 5%","a) 1%","b)10%","c) 5%","c) 5%","b)10%","b)10%","c) 5%","a) 1%","b)10%","b)10%","b)10%","a) 1%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","a) 1%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","a) 1%","b)10%","c) 5%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","a) 1%","c) 5%","b)10%","b)10%","c) 5%","a) 1%","a) 1%","c) 5%","b)10%","c) 5%","c) 5%","b)10%","b)10%","b)10%","a) 1%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","c) 5%","c) 5%","b)10%","a) 1%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","a) 1%","a) 1%","a) 1%","b)10%","a) 1%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","b)10%","a) 1%","b)10%","c) 5%","b)10%","a) 1%","b)10%","b)10%","b)10%","a) 1%","b)10%","b)10%","b)10%","c) 5%","c) 5%","a) 1%","a) 1%","b)10%","a) 1%","b)10%","b)10%","a) 1%","b)10%","c) 5%","a) 1%","b)10%","c) 5%","a) 1%","a) 1%","b)10%","b)10%","c) 5%","b)10%","a) 1%","b)10%","b)10%","b)10%","a) 1%","b)10%","b)10%","b)10%","b)10%","a) 1%","b)10%","a) 1%","b)10%","b)10%","b)10%","b)10%","c) 5%","c) 5%","c) 5%","b)10%","c) 5%","b)10%","b)10%","b)10%","c) 5%","b)10%","b)10%","b)10%","b)10%","b)10%","c) 5%","b)10%","a) 1%","b)10%","b)10%","b)10%","c) 5%","a) 1%","b)10%","b)10%","b)10%","b)10%","a) 1%","c) 5%","b)10%","b)10%","b)10%","c) 5%"],[2,0,2,2,2,2,0,2,3,2,2,2,2,3,2,2,3,0,20,0,2,2,2,2,2,1,2,2,2,2,2,1,10,0,2,2,2,2,2,2,2,2,2,0,2,2,2,2,50,2,10,1.5,2,2,2,2,2,2,2,2,2,2,3,0,2,10,2,2,2,2,2,2,2,2,50,2,2,2,2,200,2,2,0,2,2,0,2,2,2,0,2,2,20,3,2,2,2,3,2,2,2,10,10,2,2,2,2,0,2,1,2,2,2,2,50,2,2,8,2,30,2,0,0,2,2,50,20,10,10,2,2,2,2,2,2,2,2,20,2,2,2,2,2,2,2,2,2,2,2,2,200,2,2,0,2,2,1,2,2,2,0,0,1,2,4,0,2,2,10,2,2,2,2,0,0,2,2,2,2,2,20,2,0,0,1,2,2,0,2,1,2,2,0,2,10,2,20,50,2,2,5,0,4,2,50,2,2,2,5,2,2,2,0,2,0,0,1,2,2,0,2,2,2,2,2,2,2,2,2,0,2,5],["0","0","2 de cada 100","2","3","2","0","2 de cada 100","2%","200","1","2 de cada 100","2","3","2 de cada 100","2 de cada 100","200","0","200","0","2 de cada 100","2 de 100","200","2","2","200","2","2 de cada 100","20","2","2 de 100","100","2","0","200","2 de cada 100","200","200","2 de 100","2","2 de cada 100","2","2","0","2","2 de cada 100","2 de cada 100","2 de cada 200","50","50","20","2 de cada 100","2 de cada 100","2 de cada 100","2 de cada 100","50","200","50","2","200","1000","200","2 de cada 100","0","2 de cada 100","100","200","2","2","2 de cada 100","2 de cada 100","2 de cada 100","2 de cada 100","2 de cada 100","el doble","2 de cada 100","2 de cada 100","20","2","200","2de100","2 de cada 100","0","2 de cada 100","4","0","2 de cada 100","2 de cada 100","2%","50%","200","200","20","300","2 de 100","200","el doble %","1 cada 1000","2 de cada 100","200","2 de cada 100","10","10 de cada 100","2","2 de cada 100","2 de cada 100","1 de cada 200","3%","2 de cada 100","100%","20 de cada 100","2 de cada 100","2 de cada 100","2 de cada 100","20%","2","2 de cada 100","1 de cada 100","2","20%","2","0","0","90","200","2","20","200","1 de cada 100","2 de cada 100","30%","2 de cada 200","2 de cada 100","200","2 de cada 200","2 de cada 100","2 de 100","200","2","200","2","2","2","2 de cada 100","2 de cada 100","2 de cada 100","2","1 de cada 200","2 de cada 100","2 de cada 100","200","2 de 100","200","0","1 cada 200","20 de cada 200","1 de cada 10","2","2","2 de 100","0","0","200","2","1000","0","2 de cada 100","200","1","200","2","200","2 de cada 100","0","0","2","2 de cada 100","200","2","2 de cada 100","40","2 de cada 100","0","200","el doble","2","2","0","2 de cada 100","2%","200","2 de cada 100","0","2 de cada 100","0","2","20","2 de cada 100","2 de cada 100","2 de 200","10%","0","200","2","0","2","2","2 de cada 100","50%","2 de 50","el doble","100","0","10","0","0","3","2","2","0","2 DE 100","2","1 de cada 200","2 de cada 100","0","2 DE 100","200","200","2 de cada 100","0","50","15"],[0,0,10,10,50,50,0,10,10,50,50,10,10,10,10,10,50,0,10,0,10,10,40,90,10,100,20,10,20,10,10,10,10,0,10,30,10,10,5,30,10,10,10,0,10,10,20,10,100,30,20,10,10,10,10,10,20,80,10,10,90,0,10,0,10,100,50,5,20,35,10,10,10,10,10,10,10,10,10,10,10,10,0,10,5,0,90,20,5,5,10,15,10,1,20,1000,10,20,10,10,10,50,5,10,10,10,20,1000,10,100,10,10,10,10,30,10,10,8,4,5,5,0,0,50,10,10,50,30,100,2,20,20,10,10,10,10,60,3,1,30,10,10,50,10,10,10,10,10,10,10,10,10,10,0,10,10,10,10,10,10,0,0,1,10,1,0,20,10,50,10,5,10,10,10,5,10,10,10,8,10,10,10,0,10,10,50,10,0,10,10,10,10,0,10,1,10,10,10,50,80,60,60,50,10,0,10,10,10,15,30,5,50,0,50,0,0,50,10,100,10,20,2,10,10,10,100,10,10,10,0,10,20],[0,0,100,1,500,20,0,100,1,500,500,1,10,100,100,100,400,0,10,0,100,100,60,10,100,1000,5,100,100,100,100,100,10,0,100,300,100,10,100,20,100,10,100,0,10,100,100,1,200,100,200,100,100,100,100,100,200,90,10,100,900,0,100,0,100,100,500,30,10,350,100,100,10,100,20,100,100,100,100,100,100,100,0,100,100,0,9000,30,1,1,100,150,10,6,100,10000,30,100,100,30,100,600,10,10,100,100,200,15,100,100,100,100,100,100,300,100,100,500,800,30,10,0,0,100,100,100,500,300,100,20,100,100,100,100,100,100,500,300,1,400,100,10,500,100,100,100,10,30,100,100,100,100,100,0,100,100,100,10,1,100,0,0,100,100,100,0,500,10,400,10,800,100,100,0,10,1,100,100,10,100,100,100,0,100,100,500,100,0,100,100,100,5,0,100,100,10,10,100,100,700,90,500,500,100,0,100,100,100,30,200,4,100,0,400,0,0,50,100,10,100,50,10,100,100,100,10,5,100,100,0,100,5],[0,0,20,20,10,10,0,20,1,20,10,20,20,20,20,80,30,0,20,0,20,20,30,80,2,80,25,25,30,20,20,5,0,0,20,40,20,40,10,10,20,20,20,0,20,20,10,50,25,20,10,20,20,20,2,20,20,10,20,20,10,0,20,0,20,100,10,10,20,25,2,20,0,2,30,20,20,20,20,5,20,2,0,20,10,0,90,20,2,20,20,2,20,8,2,20,50,10,20,30,20,10,10,20,20,20,20,22,20,40,20,2,20,20,40,20,2,8,15,20,80,0,0,10,2,20,50,200,100,2,30,80,5,25,20,20,3,20,2,5,20,20,5,0,20,20,20,50,20,20,20,20,2,0,20,20,2,20,20,2,0,0,2,2,2,0,30,20,60,10,50,20,20,0,6,2,20,10,20,2,20,20,0,20,10,20,20,0,20,20,20,40,0,80,2,20,25,2,20,20,10,400,20,2,0,20,80,20,20,10,15,20,0,100,0,0,30,20,2,0,10,20,2,20,20,20,10,20,20,0,20,30],[0,0,5,1,5000,500,0,20,1,5,500,5,0,5,5,1,3,0,500,0,100,5,60,1,5,100,50,5,1,5,50,5,0,0,5,1000,2,1000,10,500,4,10,50,0,5,1,2,5,300,100,5000,5,1,5,1,50,5,99,0,5,900,0,10,0,0,100,2,100,5,2000,1,5,10,0,20,5,5,5,5,5,1,1,0,5,10,0,1,0.0005,1,1,5,5000,500,1,5,5,50,10,1,5,10,8000,10,0,5,5,2,12000,5,80,5,5,1,500,400,1,5,900,5,30,50,0,0,20,5,5,5000,50,5000,1,10,5,1,3,5,5,500,100,5,6000,100,0,10,10,5,500,50,100,5,1,1,5,0,0,5,1,10,500,5,1,0,0,0,0,1,0,1,3000,10,10,600,5,1,1,10,5,1,1,100,5,10,0,0,5,1000,1,5,0,5,1,5,1,0,10,5,5,2,1,1000,700,90,10000,300,5,0,5,5,1,2,0,0,5,0,5000,0,0,100,50,5,1,100,1,5,5,1,50,1,100,1,0,0,11]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>ID<\/th>\n      <th>dem_genero<\/th>\n      <th>dem_edad<\/th>\n      <th>dem_nivedu<\/th>\n      <th>lkns_01_raw<\/th>\n      <th>lkns_02_raw<\/th>\n      <th>lkns_03_raw<\/th>\n      <th>lkns_04_raw<\/th>\n      <th>lkns_05_raw<\/th>\n      <th>lkns_06_raw<\/th>\n      <th>lkns_07_raw<\/th>\n      <th>lkns_08_raw<\/th>\n      <th>lkns_09_raw<\/th>\n      <th>lkns_10_raw<\/th>\n      <th>lkns_11_raw<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,10,12,13,14,15]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"ID","targets":1},{"name":"dem_genero","targets":2},{"name":"dem_edad","targets":3},{"name":"dem_nivedu","targets":4},{"name":"lkns_01_raw","targets":5},{"name":"lkns_02_raw","targets":6},{"name":"lkns_03_raw","targets":7},{"name":"lkns_04_raw","targets":8},{"name":"lkns_05_raw","targets":9},{"name":"lkns_06_raw","targets":10},{"name":"lkns_07_raw","targets":11},{"name":"lkns_08_raw","targets":12},{"name":"lkns_09_raw","targets":13},{"name":"lkns_10_raw","targets":14},{"name":"lkns_11_raw","targets":15}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>De nuevo, para pasar de formato ‘ancho’ a ‘largo’ completamos los mismos parámetros que antes. Lo único que añadimos es <code>values_transform = list(Response = as.character)</code> para poder incluir en la columna <code>Response</code> tanto valores numéricos como caracteres.</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">df_long_complex</span> <span class="op">=</span></span>
<span>  <span class="va">df_wide_complex</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="va">lkns_01_raw</span><span class="op">:</span><span class="va">lkns_11_raw</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"Item"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>    values_transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Response <span class="op">=</span> <span class="va">as.character</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Podemos usar select_helpers!</span></span>
<span>  <span class="co"># Reemplaza lkns_01_raw:lkns_11_raw por matches("lkns")</span></span>
<span></span>
<span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">df_long_complex</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ce2c03df847f1788f638" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ce2c03df847f1788f638">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","1059","1060","1061","1062","1063","1064","1065","1066","1067","1068","1069","1070","1071","1072","1073","1074","1075","1076","1077","1078","1079","1080","1081","1082","1083","1084","1085","1086","1087","1088","1089","1090","1091","1092","1093","1094","1095","1096","1097","1098","1099","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1120","1121","1122","1123","1124","1125","1126","1127","1128","1129","1130","1131","1132","1133","1134","1135","1136","1137","1138","1139","1140","1141","1142","1143","1144","1145","1146","1147","1148","1149","1150","1151","1152","1153","1154","1155","1156","1157","1158","1159","1160","1161","1162","1163","1164","1165","1166","1167","1168","1169","1170","1171","1172","1173","1174","1175","1176","1177","1178","1179","1180","1181","1182","1183","1184","1185","1186","1187","1188","1189","1190","1191","1192","1193","1194","1195","1196","1197","1198","1199","1200","1201","1202","1203","1204","1205","1206","1207","1208","1209","1210","1211","1212","1213","1214","1215","1216","1217","1218","1219","1220","1221","1222","1223","1224","1225","1226","1227","1228","1229","1230","1231","1232","1233","1234","1235","1236","1237","1238","1239","1240","1241","1242","1243","1244","1245","1246","1247","1248","1249","1250","1251","1252","1253","1254","1255","1256","1257","1258","1259","1260","1261","1262","1263","1264","1265","1266","1267","1268","1269","1270","1271","1272","1273","1274","1275","1276","1277","1278","1279","1280","1281","1282","1283","1284","1285","1286","1287","1288","1289","1290","1291","1292","1293","1294","1295","1296","1297","1298","1299","1300","1301","1302","1303","1304","1305","1306","1307","1308","1309","1310","1311","1312","1313","1314","1315","1316","1317","1318","1319","1320","1321","1322","1323","1324","1325","1326","1327","1328","1329","1330","1331","1332","1333","1334","1335","1336","1337","1338","1339","1340","1341","1342","1343","1344","1345","1346","1347","1348","1349","1350","1351","1352","1353","1354","1355","1356","1357","1358","1359","1360","1361","1362","1363","1364","1365","1366","1367","1368","1369","1370","1371","1372","1373","1374","1375","1376","1377","1378","1379","1380","1381","1382","1383","1384","1385","1386","1387","1388","1389","1390","1391","1392","1393","1394","1395","1396","1397","1398","1399","1400","1401","1402","1403","1404","1405","1406","1407","1408","1409","1410","1411","1412","1413","1414","1415","1416","1417","1418","1419","1420","1421","1422","1423","1424","1425","1426","1427","1428","1429","1430","1431","1432","1433","1434","1435","1436","1437","1438","1439","1440","1441","1442","1443","1444","1445","1446","1447","1448","1449","1450","1451","1452","1453","1454","1455","1456","1457","1458","1459","1460","1461","1462","1463","1464","1465","1466","1467","1468","1469","1470","1471","1472","1473","1474","1475","1476","1477","1478","1479","1480","1481","1482","1483","1484","1485","1486","1487","1488","1489","1490","1491","1492","1493","1494","1495","1496","1497","1498","1499","1500","1501","1502","1503","1504","1505","1506","1507","1508","1509","1510","1511","1512","1513","1514","1515","1516","1517","1518","1519","1520","1521","1522","1523","1524","1525","1526","1527","1528","1529","1530","1531","1532","1533","1534","1535","1536","1537","1538","1539","1540","1541","1542","1543","1544","1545","1546","1547","1548","1549","1550","1551","1552","1553","1554","1555","1556","1557","1558","1559","1560","1561","1562","1563","1564","1565","1566","1567","1568","1569","1570","1571","1572","1573","1574","1575","1576","1577","1578","1579","1580","1581","1582","1583","1584","1585","1586","1587","1588","1589","1590","1591","1592","1593","1594","1595","1596","1597","1598","1599","1600","1601","1602","1603","1604","1605","1606","1607","1608","1609","1610","1611","1612","1613","1614","1615","1616","1617","1618","1619","1620","1621","1622","1623","1624","1625","1626","1627","1628","1629","1630","1631","1632","1633","1634","1635","1636","1637","1638","1639","1640","1641","1642","1643","1644","1645","1646","1647","1648","1649","1650","1651","1652","1653","1654","1655","1656","1657","1658","1659","1660","1661","1662","1663","1664","1665","1666","1667","1668","1669","1670","1671","1672","1673","1674","1675","1676","1677","1678","1679","1680","1681","1682","1683","1684","1685","1686","1687","1688","1689","1690","1691","1692","1693","1694","1695","1696","1697","1698","1699","1700","1701","1702","1703","1704","1705","1706","1707","1708","1709","1710","1711","1712","1713","1714","1715","1716","1717","1718","1719","1720","1721","1722","1723","1724","1725","1726","1727","1728","1729","1730","1731","1732","1733","1734","1735","1736","1737","1738","1739","1740","1741","1742","1743","1744","1745","1746","1747","1748","1749","1750","1751","1752","1753","1754","1755","1756","1757","1758","1759","1760","1761","1762","1763","1764","1765","1766","1767","1768","1769","1770","1771","1772","1773","1774","1775","1776","1777","1778","1779","1780","1781","1782","1783","1784","1785","1786","1787","1788","1789","1790","1791","1792","1793","1794","1795","1796","1797","1798","1799","1800","1801","1802","1803","1804","1805","1806","1807","1808","1809","1810","1811","1812","1813","1814","1815","1816","1817","1818","1819","1820","1821","1822","1823","1824","1825","1826","1827","1828","1829","1830","1831","1832","1833","1834","1835","1836","1837","1838","1839","1840","1841","1842","1843","1844","1845","1846","1847","1848","1849","1850","1851","1852","1853","1854","1855","1856","1857","1858","1859","1860","1861","1862","1863","1864","1865","1866","1867","1868","1869","1870","1871","1872","1873","1874","1875","1876","1877","1878","1879","1880","1881","1882","1883","1884","1885","1886","1887","1888","1889","1890","1891","1892","1893","1894","1895","1896","1897","1898","1899","1900","1901","1902","1903","1904","1905","1906","1907","1908","1909","1910","1911","1912","1913","1914","1915","1916","1917","1918","1919","1920","1921","1922","1923","1924","1925","1926","1927","1928","1929","1930","1931","1932","1933","1934","1935","1936","1937","1938","1939","1940","1941","1942","1943","1944","1945","1946","1947","1948","1949","1950","1951","1952","1953","1954","1955","1956","1957","1958","1959","1960","1961","1962","1963","1964","1965","1966","1967","1968","1969","1970","1971","1972","1973","1974","1975","1976","1977","1978","1979","1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025","2026","2027","2028","2029","2030","2031","2032","2033","2034","2035","2036","2037","2038","2039","2040","2041","2042","2043","2044","2045","2046","2047","2048","2049","2050","2051","2052","2053","2054","2055","2056","2057","2058","2059","2060","2061","2062","2063","2064","2065","2066","2067","2068","2069","2070","2071","2072","2073","2074","2075","2076","2077","2078","2079","2080","2081","2082","2083","2084","2085","2086","2087","2088","2089","2090","2091","2092","2093","2094","2095","2096","2097","2098","2099","2100","2101","2102","2103","2104","2105","2106","2107","2108","2109","2110","2111","2112","2113","2114","2115","2116","2117","2118","2119","2120","2121","2122","2123","2124","2125","2126","2127","2128","2129","2130","2131","2132","2133","2134","2135","2136","2137","2138","2139","2140","2141","2142","2143","2144","2145","2146","2147","2148","2149","2150","2151","2152","2153","2154","2155","2156","2157","2158","2159","2160","2161","2162","2163","2164","2165","2166","2167","2168","2169","2170","2171","2172","2173","2174","2175","2176","2177","2178","2179","2180","2181","2182","2183","2184","2185","2186","2187","2188","2189","2190","2191","2192","2193","2194","2195","2196","2197","2198","2199","2200","2201","2202","2203","2204","2205","2206","2207","2208","2209","2210","2211","2212","2213","2214","2215","2216","2217","2218","2219","2220","2221","2222","2223","2224","2225","2226","2227","2228","2229","2230","2231","2232","2233","2234","2235","2236","2237","2238","2239","2240","2241","2242","2243","2244","2245","2246","2247","2248","2249","2250","2251","2252","2253","2254","2255","2256","2257","2258","2259","2260","2261","2262","2263","2264","2265","2266","2267","2268","2269","2270","2271","2272","2273","2274","2275","2276","2277","2278","2279","2280","2281","2282","2283","2284","2285","2286","2287","2288","2289","2290","2291","2292","2293","2294","2295","2296","2297","2298","2299","2300","2301","2302","2303","2304","2305","2306","2307","2308","2309","2310","2311","2312","2313","2314","2315","2316","2317","2318","2319","2320","2321","2322","2323","2324","2325","2326","2327","2328","2329","2330","2331","2332","2333","2334","2335","2336","2337","2338","2339","2340","2341","2342","2343","2344","2345","2346","2347","2348","2349","2350","2351","2352","2353","2354","2355","2356","2357","2358","2359","2360","2361","2362","2363","2364","2365","2366","2367","2368","2369","2370","2371","2372","2373","2374","2375","2376","2377","2378","2379","2380","2381","2382","2383","2384","2385","2386","2387","2388","2389","2390","2391","2392","2393","2394","2395","2396","2397","2398","2399","2400","2401","2402","2403","2404","2405","2406","2407","2408","2409","2410","2411","2412","2413","2414","2415","2416","2417","2418","2419","2420","2421","2422","2423","2424","2425","2426","2427","2428","2429","2430","2431","2432","2433","2434","2435","2436","2437","2438","2439","2440","2441","2442","2443","2444","2445","2446","2447","2448","2449","2450","2451","2452","2453","2454","2455","2456","2457","2458","2459","2460","2461","2462","2463","2464","2465","2466","2467","2468","2469","2470","2471","2472","2473","2474","2475","2476","2477","2478","2479","2480","2481","2482","2483","2484","2485","2486","2487","2488","2489","2490","2491","2492","2493","2494","2495","2496","2497","2498","2499","2500","2501","2502","2503","2504","2505","2506","2507","2508","2509","2510","2511","2512","2513","2514","2515","2516","2517","2518","2519","2520","2521","2522","2523","2524","2525","2526","2527","2528","2529","2530","2531","2532","2533","2534","2535","2536","2537","2538","2539","2540","2541","2542","2543","2544","2545","2546","2547","2548","2549","2550","2551","2552"],[1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,16,16,16,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,30,30,30,30,31,31,31,31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,32,32,32,32,33,33,33,33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,34,34,34,35,35,35,35,35,35,35,35,35,35,35,36,36,36,36,36,36,36,36,36,36,36,37,37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,39,40,40,40,40,40,40,40,40,40,40,40,41,41,41,41,41,41,41,41,41,41,41,42,42,42,42,42,42,42,42,42,42,42,43,43,43,43,43,43,43,43,43,43,43,44,44,44,44,44,44,44,44,44,44,44,45,45,45,45,45,45,45,45,45,45,45,46,46,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,47,47,47,47,48,48,48,48,48,48,48,48,48,48,48,49,49,49,49,49,49,49,49,49,49,49,50,50,50,50,50,50,50,50,50,50,50,51,51,51,51,51,51,51,51,51,51,51,52,52,52,52,52,52,52,52,52,52,52,53,53,53,53,53,53,53,53,53,53,53,54,54,54,54,54,54,54,54,54,54,54,55,55,55,55,55,55,55,55,55,55,55,56,56,56,56,56,56,56,56,56,56,56,57,57,57,57,57,57,57,57,57,57,57,58,58,58,58,58,58,58,58,58,58,58,59,59,59,59,59,59,59,59,59,59,59,60,60,60,60,60,60,60,60,60,60,60,61,61,61,61,61,61,61,61,61,61,61,62,62,62,62,62,62,62,62,62,62,62,63,63,63,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,67,67,68,68,68,68,68,68,68,68,68,68,68,69,69,69,69,69,69,69,69,69,69,69,70,70,70,70,70,70,70,70,70,70,70,71,71,71,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,72,72,72,73,73,73,73,73,73,73,73,73,73,73,74,74,74,74,74,74,74,74,74,74,74,75,75,75,75,75,75,75,75,75,75,75,76,76,76,76,76,76,76,76,76,76,76,77,77,77,77,77,77,77,77,77,77,77,78,78,78,78,78,78,78,78,78,78,78,79,79,79,79,79,79,79,79,79,79,79,80,80,80,80,80,80,80,80,80,80,80,81,81,81,81,81,81,81,81,81,81,81,82,82,82,82,82,82,82,82,82,82,82,83,83,83,83,83,83,83,83,83,83,83,84,84,84,84,84,84,84,84,84,84,84,85,85,85,85,85,85,85,85,85,85,85,86,86,86,86,86,86,86,86,86,86,86,87,87,87,87,87,87,87,87,87,87,87,88,88,88,88,88,88,88,88,88,88,88,89,89,89,89,89,89,89,89,89,89,89,90,90,90,90,90,90,90,90,90,90,90,91,91,91,91,91,91,91,91,91,91,91,92,92,92,92,92,92,92,92,92,92,92,93,93,93,93,93,93,93,93,93,93,93,94,94,94,94,94,94,94,94,94,94,94,95,95,95,95,95,95,95,95,95,95,95,96,96,96,96,96,96,96,96,96,96,96,97,97,97,97,97,97,97,97,97,97,97,98,98,98,98,98,98,98,98,98,98,98,99,99,99,99,99,99,99,99,99,99,99,100,100,100,100,100,100,100,100,100,100,100,101,101,101,101,101,101,101,101,101,101,101,102,102,102,102,102,102,102,102,102,102,102,103,103,103,103,103,103,103,103,103,103,103,104,104,104,104,104,104,104,104,104,104,104,105,105,105,105,105,105,105,105,105,105,105,106,106,106,106,106,106,106,106,106,106,106,107,107,107,107,107,107,107,107,107,107,107,108,108,108,108,108,108,108,108,108,108,108,109,109,109,109,109,109,109,109,109,109,109,110,110,110,110,110,110,110,110,110,110,110,111,111,111,111,111,111,111,111,111,111,111,112,112,112,112,112,112,112,112,112,112,112,113,113,113,113,113,113,113,113,113,113,113,114,114,114,114,114,114,114,114,114,114,114,115,115,115,115,115,115,115,115,115,115,115,116,116,116,116,116,116,116,116,116,116,116,117,117,117,117,117,117,117,117,117,117,117,118,118,118,118,118,118,118,118,118,118,118,119,119,119,119,119,119,119,119,119,119,119,120,120,120,120,120,120,120,120,120,120,120,121,121,121,121,121,121,121,121,121,121,121,122,122,122,122,122,122,122,122,122,122,122,123,123,123,123,123,123,123,123,123,123,123,124,124,124,124,124,124,124,124,124,124,124,125,125,125,125,125,125,125,125,125,125,125,126,126,126,126,126,126,126,126,126,126,126,127,127,127,127,127,127,127,127,127,127,127,128,128,128,128,128,128,128,128,128,128,128,129,129,129,129,129,129,129,129,129,129,129,130,130,130,130,130,130,130,130,130,130,130,131,131,131,131,131,131,131,131,131,131,131,132,132,132,132,132,132,132,132,132,132,132,133,133,133,133,133,133,133,133,133,133,133,134,134,134,134,134,134,134,134,134,134,134,135,135,135,135,135,135,135,135,135,135,135,136,136,136,136,136,136,136,136,136,136,136,137,137,137,137,137,137,137,137,137,137,137,138,138,138,138,138,138,138,138,138,138,138,139,139,139,139,139,139,139,139,139,139,139,140,140,140,140,140,140,140,140,140,140,140,141,141,141,141,141,141,141,141,141,141,141,142,142,142,142,142,142,142,142,142,142,142,143,143,143,143,143,143,143,143,143,143,143,144,144,144,144,144,144,144,144,144,144,144,145,145,145,145,145,145,145,145,145,145,145,146,146,146,146,146,146,146,146,146,146,146,147,147,147,147,147,147,147,147,147,147,147,148,148,148,148,148,148,148,148,148,148,148,149,149,149,149,149,149,149,149,149,149,149,150,150,150,150,150,150,150,150,150,150,150,151,151,151,151,151,151,151,151,151,151,151,152,152,152,152,152,152,152,152,152,152,152,153,153,153,153,153,153,153,153,153,153,153,154,154,154,154,154,154,154,154,154,154,154,155,155,155,155,155,155,155,155,155,155,155,156,156,156,156,156,156,156,156,156,156,156,157,157,157,157,157,157,157,157,157,157,157,158,158,158,158,158,158,158,158,158,158,158,159,159,159,159,159,159,159,159,159,159,159,160,160,160,160,160,160,160,160,160,160,160,161,161,161,161,161,161,161,161,161,161,161,162,162,162,162,162,162,162,162,162,162,162,163,163,163,163,163,163,163,163,163,163,163,164,164,164,164,164,164,164,164,164,164,164,165,165,165,165,165,165,165,165,165,165,165,166,166,166,166,166,166,166,166,166,166,166,167,167,167,167,167,167,167,167,167,167,167,168,168,168,168,168,168,168,168,168,168,168,169,169,169,169,169,169,169,169,169,169,169,170,170,170,170,170,170,170,170,170,170,170,171,171,171,171,171,171,171,171,171,171,171,172,172,172,172,172,172,172,172,172,172,172,173,173,173,173,173,173,173,173,173,173,173,174,174,174,174,174,174,174,174,174,174,174,175,175,175,175,175,175,175,175,175,175,175,176,176,176,176,176,176,176,176,176,176,176,177,177,177,177,177,177,177,177,177,177,177,178,178,178,178,178,178,178,178,178,178,178,179,179,179,179,179,179,179,179,179,179,179,180,180,180,180,180,180,180,180,180,180,180,181,181,181,181,181,181,181,181,181,181,181,182,182,182,182,182,182,182,182,182,182,182,183,183,183,183,183,183,183,183,183,183,183,184,184,184,184,184,184,184,184,184,184,184,185,185,185,185,185,185,185,185,185,185,185,186,186,186,186,186,186,186,186,186,186,186,187,187,187,187,187,187,187,187,187,187,187,188,188,188,188,188,188,188,188,188,188,188,189,189,189,189,189,189,189,189,189,189,189,190,190,190,190,190,190,190,190,190,190,190,191,191,191,191,191,191,191,191,191,191,191,192,192,192,192,192,192,192,192,192,192,192,193,193,193,193,193,193,193,193,193,193,193,194,194,194,194,194,194,194,194,194,194,194,195,195,195,195,195,195,195,195,195,195,195,196,196,196,196,196,196,196,196,196,196,196,197,197,197,197,197,197,197,197,197,197,197,198,198,198,198,198,198,198,198,198,198,198,199,199,199,199,199,199,199,199,199,199,199,200,200,200,200,200,200,200,200,200,200,200,201,201,201,201,201,201,201,201,201,201,201,202,202,202,202,202,202,202,202,202,202,202,203,203,203,203,203,203,203,203,203,203,203,204,204,204,204,204,204,204,204,204,204,204,205,205,205,205,205,205,205,205,205,205,205,206,206,206,206,206,206,206,206,206,206,206,207,207,207,207,207,207,207,207,207,207,207,208,208,208,208,208,208,208,208,208,208,208,209,209,209,209,209,209,209,209,209,209,209,210,210,210,210,210,210,210,210,210,210,210,211,211,211,211,211,211,211,211,211,211,211,212,212,212,212,212,212,212,212,212,212,212,213,213,213,213,213,213,213,213,213,213,213,214,214,214,214,214,214,214,214,214,214,214,215,215,215,215,215,215,215,215,215,215,215,216,216,216,216,216,216,216,216,216,216,216,217,217,217,217,217,217,217,217,217,217,217,218,218,218,218,218,218,218,218,218,218,218,219,219,219,219,219,219,219,219,219,219,219,220,220,220,220,220,220,220,220,220,220,220,221,221,221,221,221,221,221,221,221,221,221,222,222,222,222,222,222,222,222,222,222,222,223,223,223,223,223,223,223,223,223,223,223,224,224,224,224,224,224,224,224,224,224,224,225,225,225,225,225,225,225,225,225,225,225,226,226,226,226,226,226,226,226,226,226,226,227,227,227,227,227,227,227,227,227,227,227,228,228,228,228,228,228,228,228,228,228,228,229,229,229,229,229,229,229,229,229,229,229,230,230,230,230,230,230,230,230,230,230,230,231,231,231,231,231,231,231,231,231,231,231,232,232,232,232,232,232,232,232,232,232,232],[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[38,38,38,38,38,38,38,38,38,38,38,67,67,67,67,67,67,67,67,67,67,67,24,24,24,24,24,24,24,24,24,24,24,30,30,30,30,30,30,30,30,30,30,30,38,38,38,38,38,38,38,38,38,38,38,45,45,45,45,45,45,45,45,45,45,45,58,58,58,58,58,58,58,58,58,58,58,47,47,47,47,47,47,47,47,47,47,47,52,52,52,52,52,52,52,52,52,52,52,49,49,49,49,49,49,49,49,49,49,49,57,57,57,57,57,57,57,57,57,57,57,33,33,33,33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,34,34,34,31,31,31,31,31,31,31,31,31,31,31,59,59,59,59,59,59,59,59,59,59,59,38,38,38,38,38,38,38,38,38,38,38,19,19,19,19,19,19,19,19,19,19,19,65,65,65,65,65,65,65,65,65,65,65,55,55,55,55,55,55,55,55,55,55,55,76,76,76,76,76,76,76,76,76,76,76,57,57,57,57,57,57,57,57,57,57,57,39,39,39,39,39,39,39,39,39,39,39,50,50,50,50,50,50,50,50,50,50,50,24,24,24,24,24,24,24,24,24,24,24,36,36,36,36,36,36,36,36,36,36,36,58,58,58,58,58,58,58,58,58,58,58,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,18,18,18,18,18,18,18,18,18,18,18,28,28,28,28,28,28,28,28,28,28,28,33,33,33,33,33,33,33,33,33,33,33,57,57,57,57,57,57,57,57,57,57,57,45,45,45,45,45,45,45,45,45,45,45,48,48,48,48,48,48,48,48,48,48,48,36,36,36,36,36,36,36,36,36,36,36,33,33,33,33,33,33,33,33,33,33,33,19,19,19,19,19,19,19,19,19,19,19,32,32,32,32,32,32,32,32,32,32,32,65,65,65,65,65,65,65,65,65,65,65,40,40,40,40,40,40,40,40,40,40,40,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,48,48,48,48,48,48,48,48,48,48,48,25,25,25,25,25,25,25,25,25,25,25,20,20,20,20,20,20,20,20,20,20,20,23,23,23,23,23,23,23,23,23,23,23,34,34,34,34,34,34,34,34,34,34,34,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,38,38,38,38,38,38,38,38,38,38,38,23,23,23,23,23,23,23,23,23,23,23,19,19,19,19,19,19,19,19,19,19,19,30,30,30,30,30,30,30,30,30,30,30,67,67,67,67,67,67,67,67,67,67,67,54,54,54,54,54,54,54,54,54,54,54,19,19,19,19,19,19,19,19,19,19,19,45,45,45,45,45,45,45,45,45,45,45,51,51,51,51,51,51,51,51,51,51,51,65,65,65,65,65,65,65,65,65,65,65,56,56,56,56,56,56,56,56,56,56,56,25,25,25,25,25,25,25,25,25,25,25,56,56,56,56,56,56,56,56,56,56,56,23,23,23,23,23,23,23,23,23,23,23,55,55,55,55,55,55,55,55,55,55,55,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,46,46,46,46,46,46,46,46,46,46,46,26,26,26,26,26,26,26,26,26,26,26,41,41,41,41,41,41,41,41,41,41,41,38,38,38,38,38,38,38,38,38,38,38,35,35,35,35,35,35,35,35,35,35,35,52,52,52,52,52,52,52,52,52,52,52,43,43,43,43,43,43,43,43,43,43,43,61,61,61,61,61,61,61,61,61,61,61,34,34,34,34,34,34,34,34,34,34,34,45,45,45,45,45,45,45,45,45,45,45,43,43,43,43,43,43,43,43,43,43,43,56,56,56,56,56,56,56,56,56,56,56,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,46,46,46,46,46,46,46,46,46,46,46,68,68,68,68,68,68,68,68,68,68,68,49,49,49,49,49,49,49,49,49,49,49,62,62,62,62,62,62,62,62,62,62,62,60,60,60,60,60,60,60,60,60,60,60,54,54,54,54,54,54,54,54,54,54,54,45,45,45,45,45,45,45,45,45,45,45,59,59,59,59,59,59,59,59,59,59,59,54,54,54,54,54,54,54,54,54,54,54,58,58,58,58,58,58,58,58,58,58,58,61,61,61,61,61,61,61,61,61,61,61,39,39,39,39,39,39,39,39,39,39,39,35,35,35,35,35,35,35,35,35,35,35,46,46,46,46,46,46,46,46,46,46,46,43,43,43,43,43,43,43,43,43,43,43,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,49,49,49,49,49,49,49,49,49,49,49,31,31,31,31,31,31,31,31,31,31,31,56,56,56,56,56,56,56,56,56,56,56,26,26,26,26,26,26,26,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,50,50,50,50,50,50,50,50,50,50,50,40,40,40,40,40,40,40,40,40,40,40,60,60,60,60,60,60,60,60,60,60,60,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,51,54,54,54,54,54,54,54,54,54,54,54,23,23,23,23,23,23,23,23,23,23,23,50,50,50,50,50,50,50,50,50,50,50,44,44,44,44,44,44,44,44,44,44,44,68,68,68,68,68,68,68,68,68,68,68,56,56,56,56,56,56,56,56,56,56,56,45,45,45,45,45,45,45,45,45,45,45,51,51,51,51,51,51,51,51,51,51,51,57,57,57,57,57,57,57,57,57,57,57,65,65,65,65,65,65,65,65,65,65,65,40,40,40,40,40,40,40,40,40,40,40,59,59,59,59,59,59,59,59,59,59,59,44,44,44,44,44,44,44,44,44,44,44,40,40,40,40,40,40,40,40,40,40,40,42,42,42,42,42,42,42,42,42,42,42,70,70,70,70,70,70,70,70,70,70,70,41,41,41,41,41,41,41,41,41,41,41,55,55,55,55,55,55,55,55,55,55,55,53,53,53,53,53,53,53,53,53,53,53,50,50,50,50,50,50,50,50,50,50,50,28,28,28,28,28,28,28,28,28,28,28,33,33,33,33,33,33,33,33,33,33,33,22,22,22,22,22,22,22,22,22,22,22,26,26,26,26,26,26,26,26,26,26,26,19,19,19,19,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,52,52,52,52,52,52,52,52,52,52,52,73,73,73,73,73,73,73,73,73,73,73,61,61,61,61,61,61,61,61,61,61,61,53,53,53,53,53,53,53,53,53,53,53,28,28,28,28,28,28,28,28,28,28,28,53,53,53,53,53,53,53,53,53,53,53,55,55,55,55,55,55,55,55,55,55,55,54,54,54,54,54,54,54,54,54,54,54,49,49,49,49,49,49,49,49,49,49,49,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,33,33,33,33,33,33,33,33,33,33,33,27,27,27,27,27,27,27,27,27,27,27,33,33,33,33,33,33,33,33,33,33,33,48,48,48,48,48,48,48,48,48,48,48,45,45,45,45,45,45,45,45,45,45,45,27,27,27,27,27,27,27,27,27,27,27,51,51,51,51,51,51,51,51,51,51,51,45,45,45,45,45,45,45,45,45,45,45,70,70,70,70,70,70,70,70,70,70,70,47,47,47,47,47,47,47,47,47,47,47,36,36,36,36,36,36,36,36,36,36,36,40,40,40,40,40,40,40,40,40,40,40,24,24,24,24,24,24,24,24,24,24,24,62,62,62,62,62,62,62,62,62,62,62,47,47,47,47,47,47,47,47,47,47,47,54,54,54,54,54,54,54,54,54,54,54,51,51,51,51,51,51,51,51,51,51,51,50,50,50,50,50,50,50,50,50,50,50,40,40,40,40,40,40,40,40,40,40,40,89,89,89,89,89,89,89,89,89,89,89,48,48,48,48,48,48,48,48,48,48,48,45,45,45,45,45,45,45,45,45,45,45,30,30,30,30,30,30,30,30,30,30,30,38,38,38,38,38,38,38,38,38,38,38,36,36,36,36,36,36,36,36,36,36,36,63,63,63,63,63,63,63,63,63,63,63,33,33,33,33,33,33,33,33,33,33,33,20,20,20,20,20,20,20,20,20,20,20,31,31,31,31,31,31,31,31,31,31,31,44,44,44,44,44,44,44,44,44,44,44,32,32,32,32,32,32,32,32,32,32,32,23,23,23,23,23,23,23,23,23,23,23,20,20,20,20,20,20,20,20,20,20,20,64,64,64,64,64,64,64,64,64,64,64,21,21,21,21,21,21,21,21,21,21,21,56,56,56,56,56,56,56,56,56,56,56,52,52,52,52,52,52,52,52,52,52,52,53,53,53,53,53,53,53,53,53,53,53,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,67,67,67,67,67,67,67,67,67,67,67,47,47,47,47,47,47,47,47,47,47,47,18,18,18,18,18,18,18,18,18,18,18,23,23,23,23,23,23,23,23,23,23,23,34,34,34,34,34,34,34,34,34,34,34,40,40,40,40,40,40,40,40,40,40,40,41,41,41,41,41,41,41,41,41,41,41,39,39,39,39,39,39,39,39,39,39,39,41,41,41,41,41,41,41,41,41,41,41,37,37,37,37,37,37,37,37,37,37,37,50,50,50,50,50,50,50,50,50,50,50,52,52,52,52,52,52,52,52,52,52,52,22,22,22,22,22,22,22,22,22,22,22,79,79,79,79,79,79,79,79,79,79,79,62,62,62,62,62,62,62,62,62,62,62,48,48,48,48,48,48,48,48,48,48,48,59,59,59,59,59,59,59,59,59,59,59,53,53,53,53,53,53,53,53,53,53,53,29,29,29,29,29,29,29,29,29,29,29,42,42,42,42,42,42,42,42,42,42,42,27,27,27,27,27,27,27,27,27,27,27,52,52,52,52,52,52,52,52,52,52,52,28,28,28,28,28,28,28,28,28,28,28,32,32,32,32,32,32,32,32,32,32,32,58,58,58,58,58,58,58,58,58,58,58,51,51,51,51,51,51,51,51,51,51,51,63,63,63,63,63,63,63,63,63,63,63,56,56,56,56,56,56,56,56,56,56,56,24,24,24,24,24,24,24,24,24,24,24,43,43,43,43,43,43,43,43,43,43,43,51,51,51,51,51,51,51,51,51,51,51,22,22,22,22,22,22,22,22,22,22,22,50,50,50,50,50,50,50,50,50,50,50,34,34,34,34,34,34,34,34,34,34,34,24,24,24,24,24,24,24,24,24,24,24,27,27,27,27,27,27,27,27,27,27,27,53,53,53,53,53,53,53,53,53,53,53,43,43,43,43,43,43,43,43,43,43,43,25,25,25,25,25,25,25,25,25,25,25,52,52,52,52,52,52,52,52,52,52,52,61,61,61,61,61,61,61,61,61,61,61,45,45,45,45,45,45,45,45,45,45,45,24,24,24,24,24,24,24,24,24,24,24],[4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,5,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,5,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2],["lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw","lkns_01_raw","lkns_02_raw","lkns_03_raw","lkns_04_raw","lkns_05_raw","lkns_06_raw","lkns_07_raw","lkns_08_raw","lkns_09_raw","lkns_10_raw","lkns_11_raw"],["500","10","10","b) 1 de cada 1000","b)10%","2","0","0","0","0","0","0","0","0","c) 1 de cada 10","c) 5%","0","0","0","0","0","0","700","100","0.1","a) 1 de cada 100","b)10%","2","2 de cada 100","10","100","20","5","500","30","1","c) 1 de cada 10","b)10%","2","2","10","1","20","1","6","2","3","a) 1 de cada 100","b)10%","2","3","50","500","10","5000","40","200","2","c) 1 de cada 10","b)10%","2","2","50","20","10","500","0","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","500","100","0.1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","20","600","1","1","c) 1 de cada 10","c) 5%","3","2%","10","1","1","1","600","500","70","b) 1 de cada 1000","b)10%","2","200","50","500","20","5","500","100","100","b) 1 de cada 1000","b)10%","2","1","50","500","10","500","500","10","0.1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","1","20","5","500","10","10","c) 1 de cada 10","b)10%","2","2","10","10","20","0","800","10","1","c) 1 de cada 10","b)10%","3","3","10","100","20","5","6","1","1","c) 1 de cada 10","c) 5%","2","2 de cada 100","10","100","20","5","500","10","1","b) 1 de cada 1000","b)10%","2","2 de cada 100","10","100","80","1","500","1","50","c) 1 de cada 10","c) 5%","3","200","50","400","30","3","0","0","0","a) 1 de cada 100","a) 1%","0","0","0","0","0","0","800","50","10","b) 1 de cada 1000","b)10%","20","200","10","10","20","500","2000","0","0","c) 1 de cada 10","c) 5%","0","0","0","0","0","0","80","20","1","c) 1 de cada 10","c) 5%","2","2 de cada 100","10","100","20","100","500","10","10","c) 1 de cada 10","b)10%","2","2 de 100","10","100","20","5","500","500","30","b) 1 de cada 1000","b)10%","2","200","40","60","30","60","500","1","1","a) 1 de cada 100","c) 5%","2","2","90","10","80","1","500","10","1","c) 1 de cada 10","a) 1%","2","2","10","100","2","5","100","100","1","b) 1 de cada 1000","b)10%","1","200","100","1000","80","100","700","2","1","c) 1 de cada 10","b)10%","2","2","20","5","25","50","500","1","1","b) 1 de cada 1000","b)10%","2","2 de cada 100","10","100","25","5","500","1","1","c) 1 de cada 10","a) 1%","2","20","20","100","30","1","400","2","1","b) 1 de cada 1000","c) 5%","2","2","10","100","20","5","500","50","100","c) 1 de cada 10","b)10%","2","2 de 100","10","100","20","50","300","100","1","b) 1 de cada 1000","b)10%","1","100","10","100","5","5","4","1","10","a) 1 de cada 100","b)10%","10","2","10","10","0","0","0","0","0","b) 1 de cada 1000","b)10%","0","0","0","0","0","0","800","0","1","c) 1 de cada 10","b)10%","2","200","10","100","20","5","600","200","30","a) 1 de cada 100","b)10%","2","2 de cada 100","30","300","40","1000","600","200","100","c) 1 de cada 10","c) 5%","2","200","10","100","20","2","100","50","10","c) 1 de cada 10","b)10%","2","200","10","10","40","1000","200","1","2","c) 1 de cada 10","b)10%","2","2 de 100","5","100","10","10","6","10","50","a) 1 de cada 100","b)10%","2","2","30","20","10","500","100","100","1","c) 1 de cada 10","a) 1%","2","2 de cada 100","10","100","20","4","100","500","5","c) 1 de cada 10","b)10%","2","2","10","10","20","10","700","100","100","c) 1 de cada 10","b)10%","2","2","10","100","20","50","30","0","0","b) 1 de cada 1000","b)10%","0","0","0","0","0","0","500","1","1","c) 1 de cada 10","b)10%","2","2","10","10","20","5","900","100","10","a) 1 de cada 100","b)10%","2","2 de cada 100","10","100","20","1","500","100","30","c) 1 de cada 10","c) 5%","2","2 de cada 100","20","100","10","2","500","10","1","c) 1 de cada 10","c) 5%","2","2 de cada 200","10","1","50","5","300","400","50","c) 1 de cada 10","b)10%","50","50","100","200","25","300","800","500","10","c) 1 de cada 10","b)10%","2","50","30","100","20","100","50","5","1","c) 1 de cada 10","b)10%","10","20","20","200","10","5000","500","10","9.99","c) 1 de cada 10","b)10%","1.5","2 de cada 100","10","100","20","5","500","10","0.1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","1","500","1","0.1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","2","1","800","1","1","c) 1 de cada 10","b)10%","2","50","10","100","20","50","80","2","2","a) 1 de cada 100","b)10%","2","200","20","200","20","5","450","500","39","a) 1 de cada 100","b)10%","2","50","80","90","10","99","0","0","0","b) 1 de cada 1000","b)10%","2","2","10","10","20","0","600","3","1","c) 1 de cada 10","b)10%","2","200","10","100","20","5","800","1","1","c) 1 de cada 10","c) 5%","2","1000","90","900","10","900","100","100","1","a) 1 de cada 100","b)10%","2","200","0","0","0","0","500","400","10","b) 1 de cada 1000","b)10%","3","2 de cada 100","10","100","20","10","0","0","0","b) 1 de cada 1000","b)10%","0","0","0","0","0","0","500","5","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","0","10","3","2","a) 1 de cada 100","c) 5%","10","100","100","100","100","100","5","3","10","b) 1 de cada 1000","b)10%","2","200","50","500","10","2","100","4","20","b) 1 de cada 1000","b)10%","2","2","5","30","10","100","30","10","10","c) 1 de cada 10","b)10%","2","2","20","10","20","5","100","50","1","a) 1 de cada 100","b)10%","2","2 de cada 100","35","350","25","2000","500","5","1","b) 1 de cada 1000","a) 1%","2","2 de cada 100","10","100","2","1","500","1","10","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","500","200","3","a) 1 de cada 100","c) 5%","2","2 de cada 100","10","10","0","10","500","10","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","2","0","20","10","30","c) 1 de cada 10","b)10%","50","el doble","10","20","30","20","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","600","1","1","c) 1 de cada 10","c) 5%","2","2 de cada 100","10","100","20","5","500","2","1","a) 1 de cada 100","b)10%","2","20","10","100","20","5","50","10","1","c) 1 de cada 10","b)10%","2","2","10","100","20","5","500","1","1","a) 1 de cada 100","b)10%","200","200","10","100","5","5","500","0.1","0.1","c) 1 de cada 10","b)10%","2","2de100","10","100","20","1","500","1","10","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","2","1","0","0","0","c) 1 de cada 10","c) 5%","0","0","0","0","0","0","500","1","1","c) 1 de cada 10","a) 1%","2","2 de cada 100","10","100","20","5","100","20","5","a) 1 de cada 100","c) 5%","2","4","5","100","10","10","0","0","0","a) 1 de cada 100","b)10%","0","0","0","0","0","0","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","90","9000","90","1","100","100","2","a) 1 de cada 100","c) 5%","2","2 de cada 100","20","30","20","5e-04","600","2","2","b) 1 de cada 1000","a) 1%","2","2%","5","1","2","1","500","0","1","c) 1 de cada 10","a) 1%","0","50%","5","1","20","1","600","1","1","b) 1 de cada 1000","c) 5%","2","200","10","100","20","5","100","1","100","c) 1 de cada 10","b)10%","2","200","15","150","2","5000","800","1","1","b) 1 de cada 1000","c) 5%","20","20","10","10","20","500","6000","1","50","a) 1 de cada 100","c) 5%","3","300","1","6","8","1","100","5","0","c) 1 de cada 10","b)10%","2","2 de 100","20","100","2","5","500","1","20","a) 1 de cada 100","b)10%","2","200","1000","10000","20","5","20","1","50","c) 1 de cada 10","b)10%","2","el doble %","10","30","50","50","2","1","1","a) 1 de cada 100","a) 1%","3","1 cada 1000","20","100","10","10","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","1","500","100","50","c) 1 de cada 10","b)10%","2","200","10","30","30","5","80","5","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","10","650","1","1","c) 1 de cada 10","c) 5%","10","10","50","600","10","8000","20","2","1","a) 1 de cada 100","b)10%","10","10 de cada 100","5","10","10","10","500","1","1","b) 1 de cada 1000","b)10%","2","2","10","10","20","0","600","10","0.01","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","500","10","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","80","5","10","c) 1 de cada 10","b)10%","2","1 de cada 200","20","200","20","2","500","3000","2000","c) 1 de cada 10","b)10%","0","3%","1000","15","22","12000","450","10","10","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","2","500","1","b) 1 de cada 1000","b)10%","1","100%","100","100","40","80","600","10","1","c) 1 de cada 10","b)10%","2","20 de cada 100","10","100","20","5","100","100","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","2","5","800","1","0","b) 1 de cada 1000","b)10%","2","2 de cada 100","10","100","20","1","300","100","1","b) 1 de cada 1000","b)10%","2","2 de cada 100","10","100","20","500","100","200","200","c) 1 de cada 10","b)10%","50","20%","30","300","40","400","300","1","1","a) 1 de cada 100","b)10%","2","2","10","100","20","1","700","1","1","c) 1 de cada 10","c) 5%","2","2 de cada 100","10","100","2","5","50","3","2","c) 1 de cada 10","c) 5%","8","1 de cada 100","8","500","8","900","100","15","2","a) 1 de cada 100","c) 5%","2","2","4","800","15","5","800","500","80","a) 1 de cada 100","b)10%","30","20%","5","30","20","30","100","10","1","c) 1 de cada 10","a) 1%","2","2","5","10","80","50","0","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","0","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","6","10","5","a) 1 de cada 100","b)10%","2","90","50","100","10","20","500","2","2","b) 1 de cada 1000","c) 5%","2","200","10","100","2","5","500","100","10","c) 1 de cada 10","b)10%","50","2","10","100","20","5","500","100","100","c) 1 de cada 10","b)10%","20","20","50","500","50","5000","800","100","900","c) 1 de cada 10","a) 1%","10","200","30","300","200","50","500","700","100","c) 1 de cada 10","a) 1%","10","1 de cada 100","100","100","100","5000","500","10","1","c) 1 de cada 10","a) 1%","2","2 de cada 100","2","20","2","1","400","100","1","b) 1 de cada 1000","b)10%","2","30%","20","100","30","10","500","80","10","c) 1 de cada 10","a) 1%","2","2 de cada 200","20","100","80","5","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","5","1","500","1","1","b) 1 de cada 1000","b)10%","2","200","10","100","25","3","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 200","10","100","20","5","300","50","15","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","300","30","1","b) 1 de cada 1000","b)10%","2","2 de 100","60","500","3","500","200","20","100","b) 1 de cada 1000","b)10%","20","200","3","300","20","100","30","10","1","b) 1 de cada 1000","b)10%","2","2","1","1","2","5","800","100","1","b) 1 de cada 1000","c) 5%","2","200","30","400","5","6000","300","1","1","c) 1 de cada 10","b)10%","2","2","10","100","20","100","500","1","1","a) 1 de cada 100","b)10%","2","2","10","10","20","0","100","1","1","b) 1 de cada 1000","b)10%","2","2","50","500","5","10","300","10","1","c) 1 de cada 10","c) 5%","2","2 de cada 100","10","100","0","10","600","1","2","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","100","100","1","a) 1 de cada 100","b)10%","2","2 de cada 100","10","100","20","500","500","100","1","c) 1 de cada 10","b)10%","2","2","10","10","20","50","350","100","50","b) 1 de cada 1000","b)10%","2","1 de cada 200","10","30","50","100","500","100","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","5","600","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","1","100","1","1000","c) 1 de cada 10","b)10%","200","200","10","100","20","1","500","1","1","c) 1 de cada 10","b)10%","2","2 de 100","10","100","20","5","20","1","1","c) 1 de cada 10","a) 1%","2","200","10","100","2","0","300","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","500","1000","1","a) 1 de cada 100","c) 5%","2","1 cada 200","10","100","20","5","600","5","1","c) 1 de cada 10","b)10%","2","20 de cada 200","10","100","20","1","300","10","1","c) 1 de cada 10","a) 1%","1","1 de cada 10","10","100","2","10","800","1","1","a) 1 de cada 100","b)10%","2","2","10","10","20","500","200","5","1","b) 1 de cada 1000","b)10%","2","2","10","1","20","5","200","1","1","c) 1 de cada 10","b)10%","2","2 de 100","10","100","2","1","0","0","0","a) 1 de cada 100","a) 1%","0","0","0","0","0","0","0","0","0","a) 1 de cada 100","b)10%","0","0","0","0","0","0","50","5000","1","a) 1 de cada 100","b)10%","1","200","1","100","2","0","100","100","1","c) 1 de cada 10","b)10%","2","2","10","100","2","0","100","1","1","b) 1 de cada 1000","c) 5%","4","1000","1","100","2","1","0","0","0","c) 1 de cada 10","c) 5%","0","0","0","0","0","0","500","20","1","c) 1 de cada 10","a) 1%","2","2 de cada 100","20","500","30","1","500","1","1","c) 1 de cada 10","a) 1%","2","200","10","10","20","3000","200","1","1","c) 1 de cada 10","b)10%","10","1","50","400","60","10","6","10","5","c) 1 de cada 10","a) 1%","2","200","10","10","10","10","500","10","2","a) 1 de cada 100","b)10%","2","2","5","800","50","600","0","2","100","b) 1 de cada 1000","b)10%","2","200","10","100","20","5","600","10","1","c) 1 de cada 10","a) 1%","2","2 de cada 100","10","100","20","1","400","1","0","c) 1 de cada 10","b)10%","0","0","10","0","0","1","300","2","0","c) 1 de cada 10","c) 5%","0","0","5","10","6","10","30","5","10","c) 1 de cada 10","a) 1%","2","2","10","1","2","5","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","1","500","0","1","c) 1 de cada 10","c) 5%","2","200","10","100","10","1","600","10","10","a) 1 de cada 100","a) 1%","2","2","8","10","20","100","50","100","1","c) 1 de cada 10","a) 1%","2","2 de cada 100","10","100","2","5","200","50","1","c) 1 de cada 10","b)10%","20","40","10","100","20","10","300","10","10","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","0","0","0","0","c) 1 de cada 10","c) 5%","0","0","0","0","0","0","600","100","1","c) 1 de cada 10","b)10%","0","200","10","100","20","5","20","10","1","a) 1 de cada 100","a) 1%","1","el doble","10","100","10","1000","100","1","1","c) 1 de cada 10","b)10%","2","2","50","500","20","1","500","10","10","a) 1 de cada 100","b)10%","2","2","10","100","20","5","0","0","0","b) 1 de cada 1000","b)10%","0","0","0","0","0","0","700","1","0.1","b) 1 de cada 1000","a) 1%","2","2 de cada 100","10","100","20","5","600","1","1","c) 1 de cada 10","b)10%","1","2%","10","100","20","1","500","1","1","c) 1 de cada 10","b)10%","2","200","10","100","20","5","600","10","0.1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","5","40","1","0","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","600","1","1","c) 1 de cada 10","a) 1%","2","2 de cada 100","10","100","80","10","100","10","10","c) 1 de cada 10","b)10%","10","0","1","100","2","5","500","10","1","a) 1 de cada 100","a) 1%","2","2","10","10","20","5","200","1","1","c) 1 de cada 10","b)10%","20","20","10","10","25","2","500","10","1","c) 1 de cada 10","b)10%","50","2 de cada 100","10","100","2","1","600","100","5","c) 1 de cada 10","b)10%","2","2 de cada 100","50","100","20","1000","800","600","2","b) 1 de cada 1000","b)10%","2","2 de 200","80","700","20","700","500","2","1","c) 1 de cada 10","c) 5%","5","10%","60","90","10","90","600","100","1","c) 1 de cada 10","c) 5%","0","0","60","500","400","10000","200","3","1","c) 1 de cada 10","c) 5%","4","200","50","500","20","300","500","500","1","b) 1 de cada 1000","b)10%","2","2","10","100","2","5","300","300","1","b) 1 de cada 1000","c) 5%","50","0","0","0","0","0","500","10","1","c) 1 de cada 10","b)10%","2","2","10","100","20","5","100","10","1","c) 1 de cada 10","b)10%","2","2","10","100","80","5","500","1","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","1","40","10","30","c) 1 de cada 10","c) 5%","5","50%","15","30","20","2","100","3","50","b) 1 de cada 1000","b)10%","2","2 de 50","30","200","10","0","300","2","2","b) 1 de cada 1000","b)10%","2","el doble","5","4","15","0","500","500","100","b) 1 de cada 1000","b)10%","2","100","50","100","20","5","500","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","200","150","1","a) 1 de cada 100","b)10%","2","10","50","400","100","5000","30","0","0","c) 1 de cada 10","c) 5%","0","0","0","0","0","0","500","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","2","5","1","c) 1 de cada 10","a) 1%","1","3","50","50","30","100","500","10","10","c) 1 de cada 10","b)10%","2","2","10","100","20","50","500","1","5","c) 1 de cada 10","b)10%","2","2","100","10","2","5","30","0","0","c) 1 de cada 10","b)10%","0","0","10","100","0","1","6","1","1","c) 1 de cada 10","c) 5%","2","2 DE 100","20","50","10","100","500","1","1","c) 1 de cada 10","a) 1%","2","2","2","10","20","1","330","1","1","c) 1 de cada 10","b)10%","2","1 de cada 200","10","100","2","5","10","1","1","b) 1 de cada 1000","b)10%","2","2 de cada 100","10","100","20","5","500","100","20","a) 1 de cada 100","b)10%","2","0","10","100","20","1","500","1","1","c) 1 de cada 10","b)10%","2","2 DE 100","100","10","20","50","100","5","5","c) 1 de cada 10","a) 1%","2","200","10","5","10","1","500","20","5","a) 1 de cada 100","c) 5%","2","200","10","100","20","100","500","10","1","c) 1 de cada 10","b)10%","2","2 de cada 100","10","100","20","1","0","0","0","c) 1 de cada 10","b)10%","0","0","0","0","0","0","100","10","1","b) 1 de cada 1000","b)10%","2","50","10","100","20","0","100","30","10","c) 1 de cada 10","c) 5%","5","15","20","5","30","11"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>ID<\/th>\n      <th>dem_genero<\/th>\n      <th>dem_edad<\/th>\n      <th>dem_nivedu<\/th>\n      <th>Item<\/th>\n      <th>Response<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"ID","targets":1},{"name":"dem_genero","targets":2},{"name":"dem_edad","targets":3},{"name":"dem_nivedu","targets":4},{"name":"Item","targets":5},{"name":"Response","targets":6}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section><section id="long-to-wide-complex" class="level3" data-number="4.3.4"><h3 data-number="4.3.4" class="anchored" data-anchor-id="long-to-wide-complex">
<span class="header-section-number">4.3.4</span> Long to wide complex</h3>
<p>Nos sirve el mismo código que con el ejemplo más simple:</p>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">df_long_complex</span> <span class="op">|&gt;</span>  </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">Item</span>, values_from <span class="op">=</span> <span class="va">Response</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 232 × 15</span></span>
<span><span class="co">#&gt;      ID dem_genero dem_edad dem_nivedu lkns_01_raw lkns_02_raw lkns_03_raw</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;      </span></span>
<span><span class="co">#&gt; 1     1          1       38          4 500         10          10         </span></span>
<span><span class="co">#&gt; 2     2          0       67          2 0           0           0          </span></span>
<span><span class="co">#&gt; 3     3          0       24          4 700         100         0.1        </span></span>
<span><span class="co">#&gt; 4     4          0       30          4 500         30          1          </span></span>
<span><span class="co">#&gt; 5     5          0       38          3 6           2           3          </span></span>
<span><span class="co">#&gt; 6     6          0       45          4 40          200         2          </span></span>
<span><span class="co">#&gt; # ℹ 226 more rows</span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: lkns_04_raw &lt;chr&gt;, lkns_05_raw &lt;chr&gt;, …</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="ejercicios---wide-to-long" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios---wide-to-long">Ejercicios - wide to long</h3>
<p>De nuevo trabajaremos con datos del paper <a href="https://osf.io/egxy5/">Cognitive and Socio-affective Predictors of Social Adaptation</a>, de Neely et al., pero esta vez van a ser los datos <em>procesados</em>. Estos se pueden encontrar en un repositorio público de la OSF. Empezaremos con la base final en formato wide (Dentro de https://osf.io/egxy5/, ver archivo: <code>/outputs/data/sa-prepared.csv</code>).</p>
<p>Para simplificar el proceso, puedes importar los datos y limpiar los nombres de variables así:</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_wide</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://raw.githubusercontent.com/gorkang/cognitive-and-socio-affective-predictors-of-social-adaptation/master/outputs/data/sa-prepared.csv"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li><p>Cambia el orden de las variables para que ID sea la primera columna.</p></li>
<li><p>Transforma la base a formato long (eso sí, mantén las variables demográficas en formato wide).</p></li>
<li><p>Aprovechando que tenemos la base en formato long, sabrías hacer una gráfica con un histograma o densidad para cada una de las variables no demográficas?</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pistas
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Tendrás que usar la función <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> y el select helper <code><a href="https://tidyselect.r-lib.org/reference/everything.html">everything()</a></code></p></li>
<li><p><code>pivot_longer(primera_variable:ultima_variable)</code></p></li>
<li><p><code>facet_wrap(~name, scales = "free") te ayudara a crear paneles para cada nombre, donde las escalas x/y pueden variar libremente.</code></p></li>
</ol>
</div>
</div>
</div>
<p>El gráfico final se debería ver así:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="04-preparacion-transformacion_files/figure-html/ejercicios-dplyr-avanzado-1-2-1.png" class="img-fluid figure-img" width="1800"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="separate-omit-ifelse-case_when-tipos-de-variables" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="separate-omit-ifelse-case_when-tipos-de-variables">
<span class="header-section-number">4.4</span> Separate, omit, ifelse, case_when, tipos de variables…</h2>
<p>Para transformaciones algo más complejas, pero muy habituales, usaremos algunos verbos del paquete {tidyr}, y variaciones con {dplyr}</p>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Base original</span></span>
<span><span class="va">DF_name</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">...1</span>, <span class="op">-</span><span class="va">Educacion</span>, <span class="op">-</span><span class="va">Edad</span>, <span class="op">-</span><span class="va">condition2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span><span class="op">(</span><span class="va">DF_name</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ede16f7da554a8f166fd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ede16f7da554a8f166fd">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103"],[41904,95041,74594,72903,21260,50315,21774,20881,39751,99384,81868,49154,42972,55035,20361,92735,84987,73147,70797,1968,13444,34940,18653,89898,30862,80137,73888,73940,27184,62180,77552,59681,13377,73909,32344,12810,37826,34873,97981,12207,15347,50109,12942,81444,7001,25447,30456,13612,71793,85224,28895,92221,59339,98684,77956,99669,66812,47028,79899,34267,91717,75061,2775,60873,82838,86191,33562,67146,62823,21297,36092,18555,39170,97376,63938,53343,29911,88699,99970,29837,52536,89645,27298,84953,20439,41760,53424,57804,19201,24239,85405,64486,53710,86430,43115,10815,65999,81379,12947,23691,65452,77858,60292],[1,2,2,2,1,2,2,2,2,1,1,1,1,1,2,2,2,2,1,2,2,2,2,2,2,2,2,1,2,1,1,1,1,1,2,1,1,2,2,1,2,2,1,1,2,1,1,1,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,1,1,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,1,2,1,2,2,2,1,2,2,1,1,2,1,2,2,1,2,1,1,1,1,2,1],[80,90,10,75,35,14,2,89,6,0,50,98,17,100,60,95,3,26,50,30,80,100,0,24,21,10,79,74,100,100,100,99,49,61,81,32,90,96,100,57,100,95,100,77,99,69,80,60,34,50,77,100,90,45,75,57,72,3,60,59,68,1,74,51,82,100,95,0,70,95,80,72,9,57,0,79,29,55,39,80,1,100,66,96,81,28,84,30,67,69,80,80,63,99,95,10,70,90,80,94,70,15,90],["PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond1","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond2","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond3","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4","PPV_Cond4"],[99,99,99,1,24,null,99,99,99,1,94,99,88,0,1,99,99,99,70,99,1,99,99,7,10,99,99,99,46,45,46,40,null,46,46,73,46,50,46,45,46,87,46,49,30,46,50,70,44,80,99,99,99,99,80,51,99,20,30,1,20,5,30,99,99,99,99,80,98,99,80,59,64,16,79,92,92,80,90,60,93,92,28,92,92,77,74,90,10,92,92,92,65,20,92,92,92,92,90,92,null,92,80]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>ID<\/th>\n      <th>Genero<\/th>\n      <th>FollowUP<\/th>\n      <th>condition<\/th>\n      <th>PPV_DECLARED<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"ID","targets":1},{"name":"Genero","targets":2},{"name":"FollowUP","targets":3},{"name":"condition","targets":4},{"name":"PPV_DECLARED","targets":5}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p>Podemos separar la columna de condición usando la función <code><a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a></code> y un separador (<code>sep = "_"</code>). La separación puede ser en columnas o en filas. En este primer caso, separamos enviando cada parte de <code>condition</code> a una columna distinta:</p>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Separate</span></span>
<span><span class="va">DF_separated</span> <span class="op">=</span> <span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">condition</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"primer_chunk"</span>, <span class="st">"segundo_chunk"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DF_separated</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 6</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP primer_chunk segundo_chunk PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904      1       80 PPV          Cond1                   99</span></span>
<span><span class="co">#&gt; 2 95041      2       90 PPV          Cond1                   99</span></span>
<span><span class="co">#&gt; 3 74594      2       10 PPV          Cond1                   99</span></span>
<span><span class="co">#&gt; 4 72903      2       75 PPV          Cond1                    1</span></span>
<span><span class="co">#&gt; 5 21260      1       35 PPV          Cond1                   24</span></span>
<span><span class="co">#&gt; 6 50315      2       14 PPV          Cond1                   NA</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>También podemos enviar cada parte de <code>condition</code> a una fila distinta:</p>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate_rows.html">separate_rows</a></span><span class="op">(</span><span class="va">condition</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 206 × 5</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904      1       80 PPV                 99</span></span>
<span><span class="co">#&gt; 2 41904      1       80 Cond1               99</span></span>
<span><span class="co">#&gt; 3 95041      2       90 PPV                 99</span></span>
<span><span class="co">#&gt; 4 95041      2       90 Cond1               99</span></span>
<span><span class="co">#&gt; 5 74594      2       10 PPV                 99</span></span>
<span><span class="co">#&gt; 6 74594      2       10 Cond1               99</span></span>
<span><span class="co">#&gt; # ℹ 200 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con <code><a href="https://tidyr.tidyverse.org/reference/unite.html">unite()</a></code> podemos hacer lo contrario, unir columnas con un separador definido:</p>
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Unite: inversa de separate</span></span>
<span><span class="va">DF_separated</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unite.html">unite</a></span><span class="op">(</span><span class="va">condition</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">primer_chunk</span>, <span class="va">segundo_chunk</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 5</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904      1       80 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 2 95041      2       90 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 3 74594      2       10 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 4 72903      2       75 PPV_Cond1            1</span></span>
<span><span class="co">#&gt; 5 21260      1       35 PPV_Cond1           24</span></span>
<span><span class="co">#&gt; 6 50315      2       14 PPV_Cond1           NA</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si necesitamos recodificar variables, cambiar valores condicionalmente,… podemos usar <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> o <code><a href="https://dplyr.tidyverse.org/reference/recode.html">recode()</a></code>:</p>
<p><code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>, si se cumple la condición <code>Genero == 1</code>, asigna el valor “Hombre”, de lo contrario, “Mujer”:</p>
<div class="cell">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Genero <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Genero</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"Hombre"</span>, <span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 5</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904 Hombre       80 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 2 95041 Mujer        90 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 3 74594 Mujer        10 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 4 72903 Mujer        75 PPV_Cond1            1</span></span>
<span><span class="co">#&gt; 5 21260 Hombre       35 PPV_Cond1           24</span></span>
<span><span class="co">#&gt; 6 50315 Mujer        14 PPV_Cond1           NA</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> podemos establecer varias condiciones lógicas simultáneamente, ademas de un valor por defecto si no se cumple ninguna de ellas. Las condiciones lógicas pueden ser arbitrariamente complejas:</p>
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Genero <span class="op">=</span> </span>
<span>           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>             <span class="va">Genero</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Hombre"</span>,</span>
<span>             <span class="va">Genero</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Mujer"</span>,</span>
<span>             <span class="va">Genero</span> <span class="op">==</span> <span class="fl">3</span> <span class="op">~</span> <span class="st">"No binario"</span>,</span>
<span>             <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span><span class="op">)</span></span>
<span>         <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 5</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904 Hombre       80 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 2 95041 Mujer        90 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 3 74594 Mujer        10 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 4 72903 Mujer        75 PPV_Cond1            1</span></span>
<span><span class="co">#&gt; 5 21260 Hombre       35 PPV_Cond1           24</span></span>
<span><span class="co">#&gt; 6 50315 Mujer        14 PPV_Cond1           NA</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finalmente podemos usar <code><a href="https://dplyr.tidyverse.org/reference/recode.html">recode()</a></code>, con una sintaxis tal vez algo más sencilla:</p>
<div class="cell">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="va">DF_name</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Genero</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    </span>
<span>    <span class="co"># De número a texto</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Genero2 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span></span>
<span>      <span class="va">Genero</span>,</span>
<span>      `1` <span class="op">=</span> <span class="st">"Hombre"</span>,</span>
<span>      `2` <span class="op">=</span> <span class="st">"Mujer"</span>,</span>
<span>      .default <span class="op">=</span> <span class="st">"No definido"</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    </span>
<span>    <span class="co"># De texto a número</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Genero3 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span></span>
<span>      <span class="va">Genero2</span>,</span>
<span>      <span class="st">"Hombre"</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>      <span class="st">"Mujer"</span> <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      .default <span class="op">=</span> <span class="fl">999</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 3</span></span>
<span><span class="co">#&gt;   Genero Genero2 Genero3</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1      1 Hombre        1</span></span>
<span><span class="co">#&gt; 2      2 Mujer         0</span></span>
<span><span class="co">#&gt; 3      2 Mujer         0</span></span>
<span><span class="co">#&gt; 4      2 Mujer         0</span></span>
<span><span class="co">#&gt; 5      1 Hombre        1</span></span>
<span><span class="co">#&gt; 6      2 Mujer         0</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Otras funciones útiles, extraer los valores de una columna con <code><a href="https://dplyr.tidyverse.org/reference/pull.html">pull()</a></code> o descartar los <code>NA</code> de una columna con <code><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na()</a></code>.</p>
<p>Usamos <code><a href="https://dplyr.tidyverse.org/reference/pull.html">pull()</a></code> para extraer los valores de una columna.</p>
<div class="cell">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">DF_name</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span><span class="op">)</span></span>
<span><span class="co">#&gt;   [1] 99 99 99  1 24 NA 99 99 99  1 94 99 88  0  1 99 99 99 70 99  1 99 99  7</span></span>
<span><span class="co">#&gt;  [25] 10 99 99 99 46 45 46 40 NA 46 46 73 46 50 46 45 46 87 46 49 30 46 50 70</span></span>
<span><span class="co">#&gt;  [49] 44 80 99 99 99 99 80 51 99 20 30  1 20  5 30 99 99 99 99 80 98 99 80 59</span></span>
<span><span class="co">#&gt;  [73] 64 16 79 92 92 80 90 60 93 92 28 92 92 77 74 90 10 92 92 92 65 20 92 92</span></span>
<span><span class="co">#&gt;  [97] 92 92 90 92 NA 92 80</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Calculamos el promedio de una columna (con pipes).</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span> </span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Calculamos el promedio usando <code>na.rm = TRUE</code> para que la función <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> ignore los NA’s:</p>
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_name</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 68.06</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Calculamos la media de manera más sencilla, en este caso usando base R. No siempre son necesarias las pipes. Si escribes <code>DF_name$</code> y presionas el tabulador, aparecerán todas las columnas de esa base:</p>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">DF_name</span><span class="op">$</span><span class="va">PPV_DECLARED</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 68.06</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Eliminamos las filas que tienen valores perdidos en la variable indicada. En este caso pasamos de 103 a 100 observaciones:</p>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">DF_name</span> <span class="op">|&gt;</span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">PPV_DECLARED</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 100 × 5</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904      1       80 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 2 95041      2       90 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 3 74594      2       10 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; 4 72903      2       75 PPV_Cond1            1</span></span>
<span><span class="co">#&gt; 5 21260      1       35 PPV_Cond1           24</span></span>
<span><span class="co">#&gt; 6 21774      2        2 PPV_Cond1           99</span></span>
<span><span class="co">#&gt; # ℹ 94 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicios---verbos-avanzados-dplyr" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios---verbos-avanzados-dplyr">Ejercicios - verbos avanzados dplyr</h3>
<ol type="1">
<li>Importa los datos y limpia los nombres de columna:</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Para limpiar nombres de columnas automáticamente:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;"><a href="#modificar-y-a%C3%B1adir-variables"><code>clean_names()</code></a></span></p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># Leemos los datos y usamos janitor::clean_names() para limpiar los nombres de las columnas</span></span>
<span> <span class="va">DF_wide</span> <span class="op">=</span> </span>
<span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/gorkang/cognitive-and-socio-affective-predictors-of-social-adaptation/master/outputs/data/sa-prepared.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>En un nuevo DF (<code>DF_split</code>), crea una variable llamada <code>social_adaptation_split</code> con la median split para la variable social_adaptation. La mitad superior se llamará <code>high_social_adaptation</code> y la mitad inferior <code>low_social_adaptation</code>.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Suele ser más facil si dividimos la tarea en varios pasos
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">1. Calculamos mediana <br><br>2. Usamos <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code></span></p>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Asegúrate que no hay valores NA.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pista
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">La función <code><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na()</a></code> .</span></p>
</div>
</div>
</div>
<hr>
<p>El resultado final debería ser:</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-1d265e30742baf1dfe20" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1d265e30742baf1dfe20">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,229,230,231,232],[38,32,43,46,32,39,41,44,45,50,40,51,28,43,34,55,37,48,54,34,45,40,43,54,50,30,44,41,25,28,43,43,42,43,47,42,48,44,43,50,32,28,45,25,50,31,35,31,41,39,42,49,46,51,48,38,44,14,49,39,48,29,46,30,36,32,38,39,55,40,33,36,34,42,39,42,38,47,39,39,39,48,46,15,45,43,48,46,50,41,30,40,56,42,37,36,38,38,40,34,34,36,47,45,27,21,35,44,44,26,28,41,41,52,43,44,43,48,35,29,35,41,37,46,33,43,39,37,46,35,46,36,38,30,24,43,57,30,43,35,45,36,47,41,48,40,32,43,29,34,46,44,37,38,40,50,48,41,28,39,33,32,42,49,55,43,34,28,50,30,47,43,50,43,40,47,42,40,38,43,30,43,48,56,41,47,46,35,44,49,40,25,51,48,45,44,39,25,40,31,50,30,43,50,29,28,35,21,35,37,37,16,42,49,51,45,50,52,35,38,37,49,44,45,48,38],["low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation","low_social_adaptation","low_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","high_social_adaptation","low_social_adaptation"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>id<\/th>\n      <th>social_adaptation<\/th>\n      <th>social_adaptation_split<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"id","targets":1},{"name":"social_adaptation","targets":2},{"name":"social_adaptation_split","targets":3}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section></section><section id="regular-expressions" class="level2" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="regular-expressions">
<span class="header-section-number">4.5</span> Regular expressions</h2>
<p>Las expresiones regulares son una herramienta tan potente como difícil de utilizar. Eso si, podemos hacer algunas cosas básicas muy útiles, sin demasiado esfuerzo. Hay cheatsheets (<a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/regex.pdf">Basic Regular Expressions Cheatsheet</a>) y libros (<a href="https://tobyhodges.gitbooks.io/introduction-to-regular-expressions/content/">introduction to Regular Expressions</a>) que nos pueden ayudar a familiarizarnos con ellas.</p>
<hr>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/regular_expressions.png" class="img-fluid figure-img"></p>
<figcaption>SOURCE: https://xkcd.com/208/</figcaption></figure>
</div>
<hr>
<p>Imagina que tenemos que trabajar con la columna <code>condition2</code>, donde están codificadas 3 variables importantes:</p>
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_regexp</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/files/02-read-csv.csv"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">...1</span>, <span class="op">-</span><span class="va">Educacion</span>, <span class="op">-</span><span class="va">Edad</span>, <span class="op">-</span><span class="va">condition</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DF_regexp</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 5</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition2 PPV_DECLARED</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 41904      1       80 90LInt               99</span></span>
<span><span class="co">#&gt; 2 95041      2       90 90RInt               99</span></span>
<span><span class="co">#&gt; 3 74594      2       10 100LInt              99</span></span>
<span><span class="co">#&gt; 4 72903      2       75 100RInt               1</span></span>
<span><span class="co">#&gt; 5 21260      1       35 90LInt               24</span></span>
<span><span class="co">#&gt; 6 50315      2       14 90RInt               NA</span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Cuando no tenemos separadores explícitos como vimos antes con <code><a href="https://tidyr.tidyverse.org/reference/separate.html">separate()</a></code>, podemos usar <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> junto a <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> y expresiones regulares para extraer, una a una, las condiciones.</p>
<p>La función <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> nos sirve para eliminar partes de una cadena de texto, para extraer un número, etc.:</p>
<div class="cell">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_regexp</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cond_NM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"([0-9]{2,3}).*"</span>, <span class="st">"\\1"</span>, <span class="va">condition2</span><span class="op">)</span>,</span>
<span>         cond_LR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"[0-9]{2,3}([LR]).*"</span>, <span class="st">"\\1"</span>, <span class="va">condition2</span><span class="op">)</span>,</span>
<span>         cond_IA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"[0-9]{2,3}[LR](.*)"</span>, <span class="st">"\\1"</span>, <span class="va">condition2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 8</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition2 PPV_DECLARED cond_NM cond_LR cond_IA</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1 41904      1       80 90LInt               99 90      L       Int    </span></span>
<span><span class="co">#&gt; 2 95041      2       90 90RInt               99 90      R       Int    </span></span>
<span><span class="co">#&gt; 3 74594      2       10 100LInt              99 100     L       Int    </span></span>
<span><span class="co">#&gt; 4 72903      2       75 100RInt               1 100     R       Int    </span></span>
<span><span class="co">#&gt; 5 21260      1       35 90LInt               24 90      L       Int    </span></span>
<span><span class="co">#&gt; 6 50315      2       14 90RInt               NA 90      R       Int    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Extraemos la misma información, de una manera ligeramente distinta, siendo mucho más explícitos sobre la estructura esperada de la columna condition2:</p>
<div class="cell">
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">DF_regexp</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cond_NM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"^([0-9]{2,3})([LR])(.*)$"</span>, <span class="st">"\\1"</span>, <span class="va">condition2</span><span class="op">)</span>,</span>
<span>         cond_LR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"^([0-9]{2,3})([LR])(.*)$"</span>, <span class="st">"\\2"</span>, <span class="va">condition2</span><span class="op">)</span>,</span>
<span>         cond_IA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"^([0-9]{2,3})([LR])(.*)$"</span>, <span class="st">"\\3"</span>, <span class="va">condition2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 103 × 8</span></span>
<span><span class="co">#&gt;      ID Genero FollowUP condition2 PPV_DECLARED cond_NM cond_LR cond_IA</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span><span class="co">#&gt; 1 41904      1       80 90LInt               99 90      L       Int    </span></span>
<span><span class="co">#&gt; 2 95041      2       90 90RInt               99 90      R       Int    </span></span>
<span><span class="co">#&gt; 3 74594      2       10 100LInt              99 100     L       Int    </span></span>
<span><span class="co">#&gt; 4 72903      2       75 100RInt               1 100     R       Int    </span></span>
<span><span class="co">#&gt; 5 21260      1       35 90LInt               24 90      L       Int    </span></span>
<span><span class="co">#&gt; 6 50315      2       14 90RInt               NA 90      R       Int    </span></span>
<span><span class="co">#&gt; # ℹ 97 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Con <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> y <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches()</a></code> seleccionamos columnas usando la siguiente regular expression <code>lkns_[0-9]{2}_raw</code>:</p>
<ul>
<li>
<code>lkns_</code> contiene esta cadena de texto<br>
</li>
<li>
<code>[0-9]{2}</code> a continuación, contiene cualquier dígito del 0 al 9, dos veces.</li>
<li>
<code>_raw</code>a continuación, contiene esta cadena de texto</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/gorkang/cognitive-and-socio-affective-predictors-of-social-adaptation/master/data-raw/sa-raw-anonymised.csv"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co"># Seleccionamos solo algunas de las filas</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">ID</span>, <span class="va">dem_genero</span>, <span class="va">dem_edad</span>, <span class="va">dem_nivedu</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"lkns_[0-9]{2}_raw"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 232 × 15</span></span>
<span><span class="co">#&gt;      ID dem_genero dem_edad dem_nivedu lkns_01_raw lkns_02_raw lkns_03_raw</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1          1       38          4         500          10        10  </span></span>
<span><span class="co">#&gt; 2     2          0       67          2           0           0         0  </span></span>
<span><span class="co">#&gt; 3     3          0       24          4         700         100         0.1</span></span>
<span><span class="co">#&gt; 4     4          0       30          4         500          30         1  </span></span>
<span><span class="co">#&gt; 5     5          0       38          3           6           2         3  </span></span>
<span><span class="co">#&gt; 6     6          0       45          4          40         200         2  </span></span>
<span><span class="co">#&gt; # ℹ 226 more rows</span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: lkns_04_raw &lt;chr&gt;, lkns_05_raw &lt;chr&gt;, …</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<section id="ayuda-con-regular-expressions" class="level3" data-number="4.5.1"><h3 data-number="4.5.1" class="anchored" data-anchor-id="ayuda-con-regular-expressions">
<span class="header-section-number">4.5.1</span> Ayuda con regular expressions</h3>
<p>Es muy fácil cometer errores cuando usamos expresiones regulares. Algunas recomendaciones:</p>
<ol type="1">
<li><p>Solo usar expresiones regulares cuando sea necesario</p></li>
<li><p>Usar expresiones regulares lo más explícitas y definidas posible</p></li>
<li><p>Verificar que están funcionando bien!</p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/perl_problems.png" class="img-fluid figure-img"></p>
<figcaption>SOURCE: https://xkcd.com/1171/</figcaption></figure>
</div>
<p>Hay una aplicación Shiny muy útil que nos ayudará a construir Regular Expressions:</p>
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu">regexplain</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/regexplain/man/regexplain_gadget.html">regexplain_gadget</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr></section><section id="ejercicios---calcular-puntajes-de-escalas-usando-regular-expressions" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios---calcular-puntajes-de-escalas-usando-regular-expressions">Ejercicios - Calcular puntajes de escalas usando regular expressions</h3>
<p>Ahora volvemos a usar con los datos brutos (<code>sa-raw-anonymised.csv</code>) del paper <a href="https://osf.io/egxy5/">Cognitive and Socio-affective Predictors of Social Adaptation</a>, de Neely et al.&nbsp;</p>
<p>En estos datos tenemos las puntuaciones crudas (e.g.&nbsp;WMAT_01_raw) y ya codificadas/corregidas (WMAT_01_cod) para los ítems de varias escalas Para preparar los datos de cara al análisis final, necesitamos calcular el puntaje para cada participante y escala. Empezaremos con la prueba de Matrices de WAIS (<code>WMAT_</code>).</p>
<ol type="1">
<li>Calcula el puntaje para cada participante en la prueba de Matrices de WAIS (ítems WMAT_[NUMEROS]_cod)</li>
</ol>
<p>Hay al menos dos estrategias posibles:</p>
<ol type="A">
<li><p>Selecciona las columnas relevantes y haz la suma de columnas</p></li>
<li><p>Convierte a long, filtra para quedarte con las filas correspondientes a la prueba relevante, y haz una suma agrupada</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pista para seleccionar o filtrar columnas:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">Recuerda que usamos <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> para seleccionar columnas, o <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> para filtrar.</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pista para seleccionar columnas:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">Podemos usar <code>matches("WMAT_[0-9]{2}_cod")</code> para seleccionar o filtrar todas las columnas o ítems que contienen: <code>WMAT_</code>, 2 números del 0 al 9, y acaban en <code>_cod</code>.</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pista para suma de columnas:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;"><code><a href="https://rdrr.io/r/base/colSums.html">rowSums()</a></code> es la función que podemos usar, pero su sintaxis es algo complicada.</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pista para suma agrupada:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">Usamos <code>group_by() |&gt; summarise()</code> poniendo parámetros dentro de cada función.</span></p>
</div>
</div>
</div>
<hr>
<p>Importar datos:</p>
<div class="cell">
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">df_wide_raw</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/gorkang/cognitive-and-socio-affective-predictors-of-social-adaptation/master/data-raw/sa-raw-anonymised.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="section" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="section"></h2>
</section><section id="bibliografía" class="level2 bibliografia unnumbered"><h2 class="bibliografia unnumbered anchored" data-anchor-id="bibliografía">Bibliografía</h2>
<p><a href="https://github.com/rstudio/cheatsheets">Cheatsheets RStudio</a></p>
<p><a href="https://github.com/rstudio/cheatsheets/raw/main/data-transformation.pdf">Cheatsheet dplyr</a></p>
<p><a href="https://github.com/gadenbuie/tidyexplain">Tidyexplain</a></p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/gorkang\.github\.io\/R_preparacion_visualizacion_datos\/index\.html");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../qmd/03-visualizacion-avanzada.html" class="pagination-link" aria-label="Visualización avanzada">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Visualización avanzada</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../qmd/05-combinar-datos.html" class="pagination-link" aria-label="Combinar datos">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Combinar datos</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="http://orcid.org/0000-0001-7678-8656">Gorka Navarrete</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>