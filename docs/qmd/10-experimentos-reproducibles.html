<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>10&nbsp; Experimentos reproducibles – R para preparación y visualización de datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../qmd/11-ejercicios.html" rel="next">
<link href="../qmd/09-git.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">R para preparación y visualización de datos</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@gorkang"> <i class="bi bi-mastodon" role="img" aria-label="Mastodon">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/gorkang/R_preparacion_visualizacion_datos" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../R-para-preparación-y-visualización-de-datos.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/10-experimentos-reproducibles.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introducción</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/00-configuracion-sistema.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preparando nuestro sistema</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/01-introduccion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/02-visualizacion-basica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introducción a la visualización de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/03-visualizacion-avanzada.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Visualización avanzada</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/04-preparacion-transformacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Preparación y transformación de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/05-combinar-datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Combinar datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/06-analisis-datos-exploratorio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Análisis de datos exploratorio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/07-analisis-datos-inferencial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Análisis de datos inferencial</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/08-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Trabajo con Quarto para reportes reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/09-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Control de cambios con Git y Github</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/10-experimentos-reproducibles.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/11-ejercicios.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Ejercicios</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paquetes usados</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#paquetes-para-este-cap%C3%ADtulo" id="toc-paquetes-para-este-capítulo" class="nav-link active" data-scroll-target="#paquetes-para-este-cap%C3%ADtulo">Paquetes para este capítulo</a></li>
  <li><a href="#pipeline-experimental-abierto-y-reproducible" id="toc-pipeline-experimental-abierto-y-reproducible" class="nav-link" data-scroll-target="#pipeline-experimental-abierto-y-reproducible"><span class="header-section-number">10.1</span> Pipeline experimental abierto y reproducible</a></li>
  <li>
<a href="#jspsychmaker-como-crear-un-protocolo-experimental" id="toc-jspsychmaker-como-crear-un-protocolo-experimental" class="nav-link" data-scroll-target="#jspsychmaker-como-crear-un-protocolo-experimental"><span class="header-section-number">10.2</span> jsPsychMaker: Como crear un protocolo experimental</a>
  <ul>
<li><a href="#ejercicio-1" id="toc-ejercicio-1" class="nav-link" data-scroll-target="#ejercicio-1">Ejercicio 1</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  </ul>
</li>
  <li><a href="#jspsychmonkeys-como-simular-datos" id="toc-jspsychmonkeys-como-simular-datos" class="nav-link" data-scroll-target="#jspsychmonkeys-como-simular-datos"><span class="header-section-number">10.3</span> jsPsychMonkeys: Como simular datos</a></li>
  <li>
<a href="#jspsychhelper-como-preparar-datos" id="toc-jspsychhelper-como-preparar-datos" class="nav-link" data-scroll-target="#jspsychhelper-como-preparar-datos"><span class="header-section-number">10.4</span> jsPsychHelpeR: Como preparar datos</a>
  <ul>
<li><a href="#como-crear-un-reporte-dentro-del-jspsychhelper" id="toc-como-crear-un-reporte-dentro-del-jspsychhelper" class="nav-link" data-scroll-target="#como-crear-un-reporte-dentro-del-jspsychhelper"><span class="header-section-number">10.4.1</span> Como crear un reporte dentro del jsPsychHelpeR</a></li>
  </ul>
</li>
  <li><a href="#ejercicio-final" id="toc-ejercicio-final" class="nav-link" data-scroll-target="#ejercicio-final">Ejercicio FINAL</a></li>
  <li>
<a href="#avanzado" id="toc-avanzado" class="nav-link" data-scroll-target="#avanzado"><span class="header-section-number">10.5</span> Avanzado</a>
  <ul>
<li>
<a href="#como-crear-una-nueva-tarea" id="toc-como-crear-una-nueva-tarea" class="nav-link" data-scroll-target="#como-crear-una-nueva-tarea"><span class="header-section-number">10.5.1</span> Como crear una nueva tarea</a>
  <ul>
<li><a href="#ejercicio-optativo-crear-nueva-tarea" id="toc-ejercicio-optativo-crear-nueva-tarea" class="nav-link" data-scroll-target="#ejercicio-optativo-crear-nueva-tarea">Ejercicio Optativo: Crear nueva tarea</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  <li><a href="#correcci%C3%B3n-de-la-tarea" id="toc-corrección-de-la-tarea" class="nav-link" data-scroll-target="#correcci%C3%B3n-de-la-tarea"><span class="header-section-number">10.5.1.1</span> Corrección de la tarea</a></li>
  <li><a href="#como-preparar-datos-para-una-tarea-nueva" id="toc-como-preparar-datos-para-una-tarea-nueva" class="nav-link" data-scroll-target="#como-preparar-datos-para-una-tarea-nueva"><span class="header-section-number">10.5.1.2</span> Como preparar datos para una tarea nueva</a></li>
  </ul>
</li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="paquetes-para-este-capítulo" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="paquetes-para-este-capítulo">Paquetes para este capítulo</h4>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychMaker">'jsPsychMaker'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"gorkang/jsPsychMaker"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychMaker">'jsPsychMaker'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychMonkeys">'jsPsychMonkeys'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"gorkang/jsPsychMonkeys"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychMonkeys">'jsPsychMonkeys'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychHelpeR">'jsPsychHelpeR'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"gorkang/jsPsychHelpeR"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychHelpeR">'jsPsychHelpeR'</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>En el CSCN usamos distintas tecnologías para desarrollar experimentos. Algunos ejemplos son <a href="https://www.psychopy.org/">Psychopy</a>, <a href="https://www.qualtrics.com/">Qualtrics</a>, <a href="https://www.limesurvey.org/">Limesurvey</a>, <a href="https://www.jspsych.org/plugins/jspsych-preload/">jsPsych</a>, <a href="https://gorilla.sc/">Gorilla</a>, etc. Cada una de estas tiene ventajas y desventajas, y en general es importante tener en cuenta aspectos pragmáticos a la hora de adoptar una u otra tecnología (costo económico, tipo de experimento [EEG/conductual, laboratorio/online]).</p>
<p>Algunos de nosotros hemos optado principalmente por <a href="https://www.jspsych.org/">jsPsych</a> para experimentos conductuales por tratarse de una librería javascript de <strong>código abierto</strong>, basada en tecnologías web standard, y que puede ser usada online y offline. Dado que en el CSCN disponemos de servidor propio, los costos habituales de hosting no se aplican.</p>
<p>En los últimos años, hemos empezado a trabajar en un conjunto de herramientas (<a href="https://gorkang.github.io/jsPsychRmanual/">jsPsychR</a>) para crear experimentos usando la librería <a href="https://www.jspsych.org/">jsPsych</a> con <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a>, simular participantes con <a href="https://github.com/gorkang/jsPsychMonkeys">jspsychMonkeys</a> y estandarizar y automatizar la preparación de datos con <a href="https://github.com/gorkang/jsPsychHelpeR">jsPsychHelpeR</a>.</p>
<p><img src="../data/images/jsPsych-trinity.png" class="img-fluid"></p>
<p>Nuestro objetivo final es tener un gran número de tareas disponibles para ser usadas en el repositorio de <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a>. Cada una de estas tareas funcionará en <a href="https://github.com/gorkang/jsPsychMonkeys">jspsychMonkeys</a> para crear participantes virtuales. Cada tarea tendrá un script hermano en <a href="https://github.com/gorkang/jsPsychHelpeR">jsPsychHelpeR</a> para automatizar la preparación de datos.</p>
<p>Puedes consultar <a href="https://gorkang.github.io/jsPsychRmanual/qmd/03-jsPsychMaker.html#available-tasks">las tareas disponibles en el manual de jsPsychR</a> para más detalles.</p>
</section><section id="pipeline-experimental-abierto-y-reproducible" class="level2" data-number="10.1"><h2 data-number="10.1" class="anchored" data-anchor-id="pipeline-experimental-abierto-y-reproducible">
<span class="header-section-number">10.1</span> Pipeline experimental abierto y reproducible</h2>
<p>Replicar el experimento de una publicación no es trivial. Una de las fortalezas fundamentales de nuestro sistema es que compartir y reproducir un experimento y los análisis asociados se convierte en algo muy sencillo.</p>
<p>Además, todos los componentes del proceso son código abierto, lo que permite que revisores, colaboradores, etc. puedan verificar que no hay errores en el código.</p>
<p>Con este sistema podremos crear fácilmente el código del experimento, simular datos y preparar datos de manera casi automática (incluyendo anonimización).</p>
<p>El output del sistema es estandarizado, lo que implica que los <a href="https://gorkang.github.io/jsPsychRmanual/qmd/05-jsPsychHelpeR.html#output-data%20frames-column-names">nombres de las variables y la estructura de datos son predecibles</a>. Finalmente, la generación de gráficas, tablas, reportes y los análisis son reproducibles.</p>
</section><section id="jspsychmaker-como-crear-un-protocolo-experimental" class="level2" data-number="10.2"><h2 data-number="10.2" class="anchored" data-anchor-id="jspsychmaker-como-crear-un-protocolo-experimental">
<span class="header-section-number">10.2</span> jsPsychMaker: Como crear un protocolo experimental</h2>
<p>En el <a href="https://gorkang.github.io/jsPsychRmanual/qmd/03-jsPsychMaker.html#available-tasks">manual de jsPsychR</a> puedes ver las tareas disponibles junto con una breve descripción de cada una de ellas. Alternativamente, puedes ver <a href="https://docs.google.com/spreadsheets/d/1Eo0F4GcmqWZ1cghTpQlA4aHsc8kTABss-HAeimE2IqA/edit#gid=0">el documento con todos los detalles de las tareas disponibles</a>, o simplemente ejecutar <code><a href="https://rdrr.io/pkg/jsPsychMaker/man/list_available_tasks.html">jsPsychMaker::list_available_tasks()</a></code>.</p>
<p>Si quieres consultar los <a href="https://github.com/gorkang/jsPsychMaker/tree/main/canonical_protocol/tasks">scripts de las tareas</a> puedes hacerlo en la carpeta <code>canonical_protocol/</code> del repositorio de <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a>. Si quieres crear una nueva tarea para añadir a tu protocolo, puedes seguir las <a href="09-experimentos-reproducibles.html#como-crear-una-nueva-tarea">instrucciones de más abajo</a>.</p>
<hr>
<p><strong>Para crear un protocolo con las tareas <code>AIM</code>, <code>EAR</code> e <code>IRI</code>, y abrirlo en un navegador:</strong></p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">jsPsychMaker</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsPsychMaker/man/create_protocol.html">create_protocol</a></span><span class="op">(</span></span>
<span>  <span class="co"># Pruebas a incluir</span></span>
<span>  canonical_tasks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"AIM"</span>, <span class="st">"EAR"</span>, <span class="st">"IRI"</span><span class="op">)</span>, </span>
<span>   <span class="co"># El directorio tiene que incluir un número (se usará como pid)</span></span>
<span>  folder_output <span class="op">=</span> <span class="st">"~/Downloads/protocol999"</span>,</span>
<span>  <span class="co"># Abre el navegador con el protocolo</span></span>
<span>  launch_browser <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Podemos editar la configuración del protocolo en la carpeta que hemos indicado en <code>folder_output</code>, abriendo el archivo <code>config.js</code>. Puedes consultar la ayuda sobre la <a href="https://gorkang.github.io/jsPsychRmanual/qmd/03-jsPsychMaker.html#experiment-configuration">configuración de experimentos</a>.</p></li>
<li><p>El experimento esta listo para ser utilizado localmente. Si <code>launch_browser = TRUE</code> se abrirá el navegador. En cualquier caso, podemos iniciar el experimento abriendo <code>index.html</code> en tu navegador preferido.</p></li>
</ul>
<section id="ejercicio-1" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-1">Ejercicio 1</h3>
<p>Diseña un <strong>sencillo</strong> protocolo:</p>
<ul>
<li><p>Debes usar alguna de las <a href="https://gorkang.github.io/jsPsychRmanual/qmd/03-jsPsychMaker.html#available-tasks">tareas que aparecen en en manual</a> (máximo 2)</p></li>
<li><p>Opcionalmente, puedes hacer primero el Ejercicio 2 de abajo, para añadir o adaptar una nueva tarea/escala <strong>muy sencilla</strong></p></li>
<li><p>La duración total del “experimento” no debería superar los 5 minutos</p></li>
</ul>
<p>Tendrás que hacer una breve presentación contándonos el diseño experimental.</p>
<p><strong>Notas</strong></p>
<p>(tareas jsPsychMaker): Usa un máximo de 2 tareas<br><!-- (tarea nueva): Puedes diseñar una tarea con una sola pregunta para dos condiciones experimentales, o adaptar un cuestionario breve ya existente (que no tengamos en jsPsychMaker). --></p>
<!-- Ve al [ejercicio 1 del siguiente capítulo](10-ejercicios.html#ejercicio-1)  -->
</section><section id="section" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="section"></h3>
</section></section><section id="jspsychmonkeys-como-simular-datos" class="level2" data-number="10.3"><h2 data-number="10.3" class="anchored" data-anchor-id="jspsychmonkeys-como-simular-datos">
<span class="header-section-number">10.3</span> jsPsychMonkeys: Como simular datos</h2>
<p>El sistema para simular participantes utiliza <a href="https://www.selenium.dev/">Selenium</a> dentro de un contenedor de <a href="https://www.docker.com/">Docker</a>. En Linux es trivial su uso, pero en Windows su configuración puede ser más compleja.</p>
<p>Puedes seguir los siguientes pasos para preparar tu sistema:</p>
<hr>
<p>Completa el <a href="https://gorkang.github.io/jsPsychRmanual/qmd/04-jsPsychMonkeys.html#setup">setup para tu sistema operativo</a></p>
<p>Si no funciona, te, quedan las siguientes opciones:</p>
<ul>
<li>Correr un par de participantes manualmente<br>
</li>
<li>Usar un ordenador con Linux o crear una partición Linux<br>
</li>
<li>Crear una máquina virtual linux desde la que simular participantes. Puedes usar <a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox</a> para instalar <a href="https://releases.ubuntu.com/20.04/">Ubuntu</a>. Una vez dentro, tendrás que seguir los pasos del <a href="https://gorkang.github.io/R_preparacion_visualizacion_datos/preparando-sistema.html#empezando-en-a-b-c">manual para prepara el sistema para correr R y RStudio</a>
</li>
</ul>
<p>Errores comunes:</p>
<ul>
<li>Error sobre <code>elevated privileges</code>: abre Docker desktop antes de empezar</li>
</ul>
<!-- sudo apt install libssl-dev libcurl4-openssl-dev libxml2-dev  --><hr>
<p><strong>Para lanzar monos localmente:</strong></p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Un solo mono</span></span>
<span><span class="fu">jsPsychMonkeys</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsPsychMonkeys/man/release_the_monkeys.html">release_the_monkeys</a></span><span class="op">(</span></span>
<span>  <span class="co"># Lanza un monos con el user id 1</span></span>
<span>  uid <span class="op">=</span> <span class="st">"1"</span>,</span>
<span>  local_folder_tasks <span class="op">=</span> <span class="st">"~/Downloads/protocol999"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#  Monos del 1 al 5 simultaneamente</span></span>
<span><span class="fu">jsPsychMonkeys</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsPsychMonkeys/man/release_the_monkeys.html">release_the_monkeys</a></span><span class="op">(</span></span>
<span>  <span class="co"># Lanza monos desde el uid 1 hasta el 5</span></span>
<span>  uid <span class="op">=</span> <span class="st">"1:5"</span>,</span>
<span>  local_folder_tasks <span class="op">=</span> <span class="st">"~/Downloads/protocol999"</span>,</span>
<span>  <span class="co"># Lanza los monos en paralelo</span></span>
<span>  sequential_parallel <span class="op">=</span> <span class="st">"parallel"</span>,</span>
<span>  <span class="co"># Usando este número de CPUs</span></span>
<span>  number_of_cores <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Puedes ver de los parámetros disponibles en el <a href="https://gorkang.github.io/jsPsychRmanual/qmd/04-jsPsychMonkeys.html#parameters-available">Manual de jsPsychMonkeys</a>. Por ejemplo, con <code>open_VNC = TRUE</code> puedes ver a los monos hacer su trabajo (siempre y cuando hayas <a href="https://www.realvnc.com/en/connect/download/viewer/">instalado realvnc</a>).</p>
<hr></section><section id="jspsychhelper-como-preparar-datos" class="level2" data-number="10.4"><h2 data-number="10.4" class="anchored" data-anchor-id="jspsychhelper-como-preparar-datos">
<span class="header-section-number">10.4</span> jsPsychHelpeR: Como preparar datos</h2>
<p>Cada tarea de <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a> debería tener un script hermano en <a href="https://github.com/gorkang/jsPsychHelpeR">jsPsychHelpeR</a> para automatizar la preparación de datos. Una vez tengamos nuestro protocolo listo para el pilotaje, con una función de jsPsychHelpeR crearemos todo lo necesario para que la preparación de datos corra automáticamente.</p>
<hr>
<p><strong>Para crear y abrir un nuevo proyecto de RStudio con todo listo para correr la preparación de datos de tu protocolo:</strong></p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">jsPsychHelpeR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsPsychHelpeR/man/run_initial_setup.html">run_initial_setup</a></span><span class="op">(</span>pid <span class="op">=</span> <span class="st">'999'</span>, </span>
<span>                                 data_location <span class="op">=</span> <span class="st">"~/Downloads/protocol999/.data"</span>, </span>
<span>                                 folder <span class="op">=</span> <span class="st">"~/Downloads/jsPsychHelpeR999"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En el nuevo proyecto, tendremos que correr la preparación de datos. Puedes abrir el archivo <code>run.R</code>, donde encontrarás algunas instrucciones básicas.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Corremos el pipeline de preparación de datos</span></span>
<span><span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_make.html">tar_make</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Para ver el data frame final listo para el análisis</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="co"># List available objects</span></span>
<span>  <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_objects.html">tar_objects</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Load DF_analysis file</span></span>
<span>  <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_load.html">tar_load</a></span><span class="op">(</span><span class="va">DF_analysis</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># See DF_analysis data frame</span></span>
<span>  <span class="va">DF_analysis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<section id="como-crear-un-reporte-dentro-del-jspsychhelper" class="level3" data-number="10.4.1"><h3 data-number="10.4.1" class="anchored" data-anchor-id="como-crear-un-reporte-dentro-del-jspsychhelper">
<span class="header-section-number">10.4.1</span> Como crear un reporte dentro del jsPsychHelpeR</h3>
<p>Dentro del proyecto en el que has preparado los datos, simplemente tienes que:</p>
<hr>
<ol type="1">
<li>Abre la plantilla report_analysis.Rmd:</li>
</ol>
<p><code>rstudioapi::navigateToFile("Rmd/report_analysis.Rmd")</code></p>
<hr>
<ol start="2" type="1">
<li>En el archivo <code>_targets.R</code>, en la sección análisis, descomenta las dos líneas de abajo</li>
</ol>
<pre><code>
  # tar_render(report_analysis, "Rmd/report_analysis.Rmd",
  #            output_file = paste0("../outputs/reports/report_analysis.html")),
  </code></pre>
<hr>
<ol start="3" type="1">
<li>Finalmente, puedes trabajar en report_analysis.Rmd tal y como hiciste en el capítulo anterior. Cuando acabes, o quieras probar si todo funciona bien, solo tienes que correr <code><a href="https://docs.ropensci.org/targets/reference/tar_make.html">targets::tar_make()</a></code> desde la Consola.</li>
</ol>
<hr></section></section><section id="ejercicio-final" class="level2 ejercicio unnumbered"><h2 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-final">Ejercicio FINAL</h2>
<p>Ya estáis listas/os para enfrentaros al <a href="10-ejercicios.html#ejercicio-final">ejercicio FINAL</a></p>
</section><section id="avanzado" class="level2" data-number="10.5"><h2 data-number="10.5" class="anchored" data-anchor-id="avanzado">
<span class="header-section-number">10.5</span> Avanzado</h2>
<section id="como-crear-una-nueva-tarea" class="level3" data-number="10.5.1"><h3 data-number="10.5.1" class="anchored" data-anchor-id="como-crear-una-nueva-tarea">
<span class="header-section-number">10.5.1</span> Como crear una nueva tarea</h3>
<p>Tenemos un buen número de tareas disponibles para usar (puedes verlas en el <a href="https://gorkang.github.io/jsPsychRmanual/qmd/03-jsPsychMaker.html#available-tasks">manual de jsPsychR</a>). Si la tarea que necesitas no está disponible, puedes crearla de distintas maneras:</p>
<ul>
<li><p>Modificando alguna de las tareas que ya existen: <a href="https://github.com/gorkang/jsPsychMaker/tree/main/canonical_protocol/tasks">tareas en jsPsychMaker</a></p></li>
<li><p>Usando las plantillas disponibles: <code>jsPsychMaker::copy_example_tasks(destination_folder = "~/Downloads/TEST")</code></p></li>
</ul>
<p>Veamos como crear una nueva tarea a partir de documentos excel usando las plantillas disponibles. <a href="https://gorkang.github.io/jsPsychRmanual/qmd/07-NEWtasks.html#create-tasks">Ver ayuda</a>:</p>
<hr>
<ol type="1">
<li>Copia las plantillas de tareas de ejemplo:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">jsPsychMaker</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsPsychMaker/man/copy_example_tasks.html">copy_example_tasks</a></span><span class="op">(</span>destination_folder <span class="op">=</span> <span class="st">"~/Downloads/TEST"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><p>Ve a la carpeta indicada en <code>destination_folder</code>, en este ejemplo <code>~/Downloads/TEST</code>, y borra todas las carpetas menos aquellas que correspondan al <a href="https://www.jspsych.org/7.0/plugins/list-of-plugins/">plugin</a> que quieras usar. Por ejemplo, <code>Slider</code>.</p></li>
<li>
<p>Adapta <code>Slider.csv</code> a tu nueva tarea:</p>
<ul>
<li>Adapta <code>min</code>, <code>max</code>, <code>slider_start</code><br>
</li>
<li>Copia las filas existentes tantas veces como ítems necesites<br>
</li>
<li>Asegurate que los valores en la columna ID son correlativos<br>
</li>
<li>Adapta <code>stimulus</code>, <code>labels</code> a tus items</li>
</ul>
</li>
<li>
<p>Adapta los .html con tus instrucciones:</p>
<ul>
<li>Si necesitas más páginas de instrucciones, simplemente haz copias de las existentes</li>
<li>Edita el contenido de los archivos html</li>
</ul>
</li>
<li><p>Ejecuta <code><a href="https://rdrr.io/pkg/jsPsychMaker/man/create_protocol.html">create_protocol()</a></code> con los parámetros de abajo, se creará un nuevo protocolo con tu/tus tareas.</p></li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="fu">jsPsychMaker</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsPsychMaker/man/create_protocol.html">create_protocol</a></span><span class="op">(</span></span>
<span>    <span class="co"># Incluye la tarea EAR</span></span>
<span>    canonical_tasks <span class="op">=</span> <span class="st">"EAR"</span>,</span>
<span>    <span class="co"># Crea e incluye las tareas que estan en esta carpeta</span></span>
<span>    folder_tasks <span class="op">=</span> <span class="st">"~/Downloads/TEST/"</span>,</span>
<span>    <span class="co"># Crea el protocolo aquí</span></span>
<span>    folder_output <span class="op">=</span> <span class="st">"~/Downloads/TEST/new_protocol"</span>,</span>
<span>    <span class="co"># Lanza un navegador</span></span>
<span>    launch_browser <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<section id="ejercicio-optativo-crear-nueva-tarea" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-optativo-crear-nueva-tarea">Ejercicio Optativo: Crear nueva tarea</h4>
<p>Crea la siguiente tarea en jsPsychMaker:</p>
<ul>
<li>
<a href="https://sci-hub.ru/10.1080/10705500802222972">The Brief Resilience Scale</a> (PDF versión inglesa), o en su <a href="https://scielo.isciii.es/scielo.php?script=sci_arttext&amp;pid=S0212-97282021000200006&amp;lng=es&amp;tlng=es">versión española</a>
</li>
</ul>
<p><strong>Notas</strong></p>
<p>(tareas jsPsychMaker): Ver instrucciones en <a href="09-experimentos-reproducibles.html#como-crear-una-nueva-tarea">experimentos-reproducibles - como crear una nueva tarea</a></p>
<p>Si prefieres puedes implementar una tarea distinta a The Brief Resilience Scale. Los únicos requisitos son que sea breve y sencilla.</p>
</section><section id="section-1" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="section-1"></h4>
</section><section id="corrección-de-la-tarea" class="level4" data-number="10.5.1.1"><h4 data-number="10.5.1.1" class="anchored" data-anchor-id="corrección-de-la-tarea">
<span class="header-section-number">10.5.1.1</span> Corrección de la tarea</h4>
<p>Para cada tarea en jsPsychMaker, aspiramos a tener un script de corrección en jsPsychHelpeR. Si has creado una nueva tarea, por favor, completa la información de <a href="https://docs.google.com/spreadsheets/d/1LAsyTZ2ZRP_xLiUBkqmawwnKWgy8OCwq4mmWrrc_rpQ/edit#gid=0">NUEVAS Tareas jsPsychR</a> para que podamos integrar tu tarea en el repositorio común.</p>
</section><section id="como-preparar-datos-para-una-tarea-nueva" class="level4" data-number="10.5.1.2"><h4 data-number="10.5.1.2" class="anchored" data-anchor-id="como-preparar-datos-para-una-tarea-nueva">
<span class="header-section-number">10.5.1.2</span> Como preparar datos para una tarea nueva</h4>
<p>Tendremos que crear primero el script de preparación para la nueva tarea. En jsPsychHelpeR tienes una tarea que te ayudará con esto. Si has completado los datos en <a href="https://docs.google.com/spreadsheets/d/1LAsyTZ2ZRP_xLiUBkqmawwnKWgy8OCwq4mmWrrc_rpQ/edit#gid=0">NUEVAS Tareas jsPsychR</a>, el proceso será muy sencillo.</p>
<ol type="1">
<li>Instalamos jsPsychHelper:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychHelpeR">'jsPsychHelpeR'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"gorkang/jsPsychHelpeR"</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gorkang/jsPsychHelpeR">'jsPsychHelpeR'</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Creamos el nuevo archivo <code>prepare_NOMBRETAREA()</code>:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">jsPsychHelpeR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsPsychHelpeR/man/create_new_task.html">create_new_task</a></span><span class="op">(</span></span>
<span>  short_name_task <span class="op">=</span> <span class="st">"NAMETASK"</span>, </span>
<span>  get_info_googledoc <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Esta función:</p>
<ol type="1">
<li>Creará un nuevo archivo de corrección a partir de la plantilla</li>
<li>Lo adaptará para que funciones con el nombre que le has asignado a la tarea</li>
<li>Abrirá el archivo para que lo puedas editar</li>
</ol>
<p>Si hay información en todas las pestañas de <a href="https://docs.google.com/spreadsheets/d/1LAsyTZ2ZRP_xLiUBkqmawwnKWgy8OCwq4mmWrrc_rpQ/edit#gid=0">NUEVAS Tareas jsPsychR</a>, en la consola se mostrará información lista para copiar y pegar en tu script sobre:</p>
<ul>
<li><p>nombres de dimensiones</p></li>
<li><p>ítems para cada dimensión</p></li>
<li><p>cálculo de dimensiones</p></li>
<li><p>ítems invertidos</p></li>
<li><p>conversión numérica</p></li>
</ul>
<!-- ## Bibliografía {.bibliografia -} --><!-- Wickham, H., & Grolemund, G. (2016). R for data science: import, tidy, transform, visualize, and model data. O'Reilly Media, Inc. https://r4ds.had.co.nz/   -->

</section></section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/gorkang\.github\.io\/R_preparacion_visualizacion_datos\/index\.html");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../qmd/09-git.html" class="pagination-link" aria-label="Control de cambios con Git y Github">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Control de cambios con Git y Github</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../qmd/11-ejercicios.html" class="pagination-link" aria-label="Ejercicios">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Ejercicios</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="http://orcid.org/0000-0001-7678-8656">Gorka Navarrete</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>