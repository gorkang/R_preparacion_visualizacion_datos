<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R para preparación y visualización de datos - 1&nbsp; Introducción a R y visualización de datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../qmd/02-visualizacion-avanzada.html" rel="next">
<link href="../qmd/00-configuracion-sistema.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="../site_libs/plotly-binding-4.10.2/plotly.js"></script><script src="../site_libs/typedarray-0.1/typedarray.min.js"></script><script src="../site_libs/jquery-3.5.1/jquery.min.js"></script><link href="../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">R para preparación y visualización de datos</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/%40gorkang%7B_blank%7D" rel="" target=""><i class="bi bi-mastodon" role="img" aria-label="Mastodon">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
    <a href="https://github.com/gorkang/R_preparacion_visualizacion_datos" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../R-para-preparación-y-visualización-de-datos.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/01-introduccion_visualizacion.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a R y visualización de datos</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introducción</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/00-configuracion-sistema.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preparando nuestro sistema</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/01-introduccion_visualizacion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a R y visualización de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/02-visualizacion-avanzada.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualización avanzada</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/03-preparacion_transformacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Preparación y transformación de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/04-combinar-datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Combinar datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/05-analisis-datos-exploratorio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Análisis de datos exploratorio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/06-analisis-datos-inferencial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Análisis de datos inferencial</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/07-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Trabajo con Quarto para reportes reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/08-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Control de cambios con Git y Github</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/09-experimentos-reproducibles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/10-ejercicios.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Ejercicios</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paquetes usados</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#introducci%C3%B3n-porque-la-visualizaci%C3%B3n-de-datos-es-importante" id="toc-introducción-porque-la-visualización-de-datos-es-importante" class="nav-link active" data-scroll-target="#introducci%C3%B3n-porque-la-visualizaci%C3%B3n-de-datos-es-importante"><span class="header-section-number">1.1</span> Introducción: porque la visualización de datos es importante</a>
  <ul>
<li>
<a href="#ejemplo-del-mundo-real-cuantos-temas-deberia-estudiar" id="toc-ejemplo-del-mundo-real-cuantos-temas-deberia-estudiar" class="nav-link" data-scroll-target="#ejemplo-del-mundo-real-cuantos-temas-deberia-estudiar"><span class="header-section-number">1.1.1</span> Ejemplo del mundo real: ¿cuantos temas deberia estudiar?</a>
  <ul>
<li><a href="#moraleja-es-importante-mostrar-los-datos-individuales-yo-la-distribuci%C3%B3n-de-los-datos" id="toc-moraleja-es-importante-mostrar-los-datos-individuales-yo-la-distribución-de-los-datos" class="nav-link" data-scroll-target="#moraleja-es-importante-mostrar-los-datos-individuales-yo-la-distribuci%C3%B3n-de-los-datos">Moraleja: es importante mostrar los datos individuales y/o la distribución de los datos</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#por-qu%C3%A9-r" id="toc-por-qué-r" class="nav-link" data-scroll-target="#por-qu%C3%A9-r"><span class="header-section-number">1.2</span> Por qué R?</a>
  <ul>
<li>
<a href="#bienvenida-al-tidyverse" id="toc-bienvenida-al-tidyverse" class="nav-link" data-scroll-target="#bienvenida-al-tidyverse"><span class="header-section-number">1.2.1</span> Bienvenida al tidyverse</a>
  <ul>
<li><a href="#tidyverse-vs-base-r" id="toc-tidyverse-vs-base-r" class="nav-link" data-scroll-target="#tidyverse-vs-base-r"><span class="header-section-number">1.2.1.1</span> Tidyverse vs Base R</a></li>
  </ul>
</li>
  <li><a href="#antes-de-empezar" id="toc-antes-de-empezar" class="nav-link" data-scroll-target="#antes-de-empezar"><span class="header-section-number">1.2.2</span> Antes de empezar</a></li>
  <li>
<a href="#r-para-visualizaci%C3%B3n-de-datos" id="toc-r-para-visualización-de-datos" class="nav-link" data-scroll-target="#r-para-visualizaci%C3%B3n-de-datos"><span class="header-section-number">1.2.3</span> R para visualización de datos</a>
  <ul>
<li><a href="#primeros-pasos---con-training-wheels" id="toc-primeros-pasos---con-training-wheels" class="nav-link" data-scroll-target="#primeros-pasos---con-training-wheels"><span class="header-section-number">1.2.3.1</span> Primeros pasos - con training wheels</a></li>
  <li><a href="#aprendamos-con-garrick" id="toc-aprendamos-con-garrick" class="nav-link" data-scroll-target="#aprendamos-con-garrick"><span class="header-section-number">1.2.3.2</span> Aprendamos con Garrick</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#visualizaci%C3%B3n-de-datos-con-ggplot2" id="toc-visualización-de-datos-con-ggplot2" class="nav-link" data-scroll-target="#visualizaci%C3%B3n-de-datos-con-ggplot2"><span class="header-section-number">1.3</span> Visualización de datos con ggplot2</a>
  <ul>
<li>
<a href="#componentes-de-una-gr%C3%A1fica" id="toc-componentes-de-una-gráfica" class="nav-link" data-scroll-target="#componentes-de-una-gr%C3%A1fica"><span class="header-section-number">1.3.1</span> Componentes de una gráfica</a>
  <ul>
<li><a href="#mi-primera-gr%C3%A1fica-1-2-3" id="toc-mi-primera-gráfica-1-2-3" class="nav-link" data-scroll-target="#mi-primera-gr%C3%A1fica-1-2-3"><span class="header-section-number">1.3.1.1</span> Mi primera gráfica 1-2-3</a></li>
  </ul>
</li>
  <li>
<a href="#aesthetic-mappings" id="toc-aesthetic-mappings" class="nav-link" data-scroll-target="#aesthetic-mappings"><span class="header-section-number">1.3.2</span> Aesthetic mappings</a>
  <ul>
<li><a href="#x-y" id="toc-x-y" class="nav-link" data-scroll-target="#x-y"><span class="header-section-number">1.3.2.1</span> x-y</a></li>
  <li><a href="#ejercicio" id="toc-ejercicio" class="nav-link" data-scroll-target="#ejercicio">Ejercicio</a></li>
  <li><a href="#color-alpha-size" id="toc-color-alpha-size" class="nav-link" data-scroll-target="#color-alpha-size"><span class="header-section-number">1.3.2.2</span> Color, alpha, size</a></li>
  <li><a href="#ejercicios" id="toc-ejercicios" class="nav-link" data-scroll-target="#ejercicios">Ejercicios</a></li>
  <li><a href="#shape" id="toc-shape" class="nav-link" data-scroll-target="#shape"><span class="header-section-number">1.3.2.3</span> Shape</a></li>
  <li><a href="#linetype" id="toc-linetype" class="nav-link" data-scroll-target="#linetype"><span class="header-section-number">1.3.2.4</span> Linetype</a></li>
  </ul>
</li>
  <li>
<a href="#geoms" id="toc-geoms" class="nav-link" data-scroll-target="#geoms"><span class="header-section-number">1.3.3</span> Geoms</a>
  <ul>
<li><a href="#geom_point-y-geom_jitter" id="toc-geom_point-y-geom_jitter" class="nav-link" data-scroll-target="#geom_point-y-geom_jitter"><span class="header-section-number">1.3.3.1</span> geom_point y geom_jitter</a></li>
  <li><a href="#geom_smooth" id="toc-geom_smooth" class="nav-link" data-scroll-target="#geom_smooth"><span class="header-section-number">1.3.3.2</span> geom_smooth</a></li>
  <li><a href="#ejercicios-1" id="toc-ejercicios-1" class="nav-link" data-scroll-target="#ejercicios-1">Ejercicios</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#geom_boxplot-y-geom_violin" id="toc-geom_boxplot-y-geom_violin" class="nav-link" data-scroll-target="#geom_boxplot-y-geom_violin"><span class="header-section-number">1.3.3.3</span> geom_boxplot y geom_violin</a></li>
  <li><a href="#histogramas" id="toc-histogramas" class="nav-link" data-scroll-target="#histogramas"><span class="header-section-number">1.3.3.4</span> geom_histogram y geom_bar</a></li>
  <li><a href="#geom_density" id="toc-geom_density" class="nav-link" data-scroll-target="#geom_density"><span class="header-section-number">1.3.3.5</span> geom_density</a></li>
  <li><a href="#ejercicio-1" id="toc-ejercicio-1" class="nav-link" data-scroll-target="#ejercicio-1">Ejercicio</a></li>
  <li><a href="#geom_density_ridges" id="toc-geom_density_ridges" class="nav-link" data-scroll-target="#geom_density_ridges"><span class="header-section-number">1.3.3.6</span> geom_density_ridges</a></li>
  <li><a href="#ejercicios-2" id="toc-ejercicios-2" class="nav-link" data-scroll-target="#ejercicios-2">Ejercicios</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  </ul>
</li>
  <li>
<a href="#personalizaci%C3%B3n-b%C3%A1sica" id="toc-personalización-básica" class="nav-link" data-scroll-target="#personalizaci%C3%B3n-b%C3%A1sica"><span class="header-section-number">1.3.4</span> Personalización básica</a>
  <ul>
<li><a href="#ejercicio-2" id="toc-ejercicio-2" class="nav-link" data-scroll-target="#ejercicio-2">Ejercicio</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"></a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#bibliograf%C3%ADa" id="toc-bibliografía" class="nav-link" data-scroll-target="#bibliograf%C3%ADa">Bibliografía</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a R y visualización de datos</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><hr>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Paquetes para este capítulo
</div>
</div>
<div class="callout-body-container callout-body">
<p>Para poder ejecutar en tu ordenador el código de los ejemplos y ejercicios de este capítulo vas a necesitar los paquetes del recuadro siguiente.<br>
Cuando empecemos <strong>cada capítulo</strong>:</p>
<ul>
<li><p>Abre un script de R y guardalo con el nombre del capítulo: <code>capitulo1.R</code></p></li>
<li><p>Pega las líneas de abajo en el script</p></li>
<li><p>Ejecútalas: CNTRL + ENTER para ejecutar linea a linea</p></li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://wilkelab.org/cowplot/">'cowplot'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'cowplot'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://wilkelab.org/cowplot/">'cowplot'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">'dplyr'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'dplyr'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org">'dplyr'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://dreamrs.github.io/esquisse/">'esquisse'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'esquisse'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dreamrs.github.io/esquisse/">'esquisse'</a></span><span class="op">)</span> </span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jennybc/gapminder">'gapminder'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'gapminder'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jennybc/gapminder">'gapminder'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://allancameron.github.io/geomtextpath/">'geomtextpath'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'geomtextpath'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://allancameron.github.io/geomtextpath/">'geomtextpath'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://yutannihilation.github.io/gghighlight/">'gghighlight'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'gghighlight'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://yutannihilation.github.io/gghighlight/">'gghighlight'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org">'ggplot2'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'ggplot2'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org">'ggplot2'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jrnold/ggthemes">'ggthemes'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'ggthemes'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jrnold/ggthemes">'ggthemes'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://wilkelab.org/ggridges/">'ggridges'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'ggridges'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://wilkelab.org/ggridges/">'ggridges'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://yihui.org/knitr/">'knitr'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'knitr'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://yihui.org/knitr/">'knitr'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://plotly-r.com">'plotly'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'plotly'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://plotly-r.com">'plotly'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://purrr.tidyverse.org/">'purrr'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'purrr'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://purrr.tidyverse.org/">'purrr'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://readr.tidyverse.org">'readr'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'readr'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://readr.tidyverse.org">'readr'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://strengejacke.github.io/sjPlot/">'sjPlot'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'sjPlot'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://strengejacke.github.io/sjPlot/">'sjPlot'</a></span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://tidyr.tidyverse.org">'tidyr'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'tidyr'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyr.tidyverse.org">'tidyr'</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jorvlan/raincloudplots">'raincloudplots'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">'jorvlan/raincloudplots'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jorvlan/raincloudplots">'raincloudplots'</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<section id="introducción-porque-la-visualización-de-datos-es-importante" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="introducción-porque-la-visualización-de-datos-es-importante">
<span class="header-section-number">1.1</span> Introducción: porque la visualización de datos es importante</h2>
<p><em>“These 13 datasets (the Datasaurus, plus 12 others) each have the same summary statistics (x/y mean, x/y standard deviation, and Pearson’s correlation) to two decimal places, while being drastically different in appearance.”</em> (Matejka, J., &amp; Fitzmaurice, G., 2017).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/DinoSequentialSmaller.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: https://www.research.autodesk.com/publications/same-stats-different-graphs/</figcaption></figure>
</div>
<section id="ejemplo-del-mundo-real-cuantos-temas-deberia-estudiar" class="level3" data-number="1.1.1"><h3 data-number="1.1.1" class="anchored" data-anchor-id="ejemplo-del-mundo-real-cuantos-temas-deberia-estudiar">
<span class="header-section-number">1.1.1</span> Ejemplo del mundo real: ¿cuantos temas deberia estudiar?</h3>
<p>Este ejemplo viene de un experimento que realizamos junto con <a href="https://scholar.google.es/citations?user=fUHQA3gAAAAJ&amp;hl=es">Carlos Santamaría</a> hace algún tiempo. Presentamos una tarea sobre cálculo de probabilidades a personas que estaban entrando a un examen para convertirse en trabajadores del estado. Simplificando algo, digamos que la materia para el examen eran 80 temas. No es posible estudiar con profundidad todos los temas, así que los opositores se concentraban en un subconjunto de esos temas (e.g.&nbsp;30 de 80). Al empezar el examen, se seleccionaban al azar 5 de los 80 temas, y cada persona elegía uno de ellos para desarrollar.</p>
<p>Abajo se puede ver como cambia la probabilidad de que uno de los temas estudiados aparezca dentro de los 5 seleccionados al azar. Con 30 de los 80 temas estudiados, la probabilidad de que uno de ellos salga en la prueba es del 91%. Si estudiáramos 47, subiríamos a una probabilidad del 99%.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-68c7f2192b61f0c01c30" style="width:100%;height:433px;"></div>
<script type="application/json" data-for="htmlwidget-68c7f2192b61f0c01c30">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],"y":[0.06249999999999313,0.1218354430379706,0.17812804284322428,0.2314963517495027,0.28205580229229843,0.32991874880613853,0.37519450902193913,0.41798940566426934,0.45840680804868078,0.49654717367904699,0.5325080898448652,0.56638431521841837,0.59826782145235591,0.62824783477679846,0.65641087759670602,0.68284081008926245,0.70761887180104099,0.73082372324539513,0.75253148749982679,0.77281579180312099,0.79174780915281218,0.80939629990258433,0.82582765335923913,0.84110592938037376,0.85529289997142044,0.86844809088310626,0.88062882320875147,0.89189025498150099,0.90228542277174106,0.91186528328428618,0.92067875495586282,0.92877275955219873,0.93619226376550679,0.94298032081172467,0.94917811202783686,0.95482498846918329,0.95995851250677111,0.96461449942458322,0.96882705901688948,0.97262863718555626,0.97605005753735607,0.97912056298127903,0.98186785732584181,0.98431814687639763,0.9864961820324476,0.98842529888494857,0.99012746081362613,0.99162330008428212,0.99293215944610624,0.9940721337289733,0.99506011144083106,0.99591181636481796,0.9966418491568183,0.99726372894257831,0.99778993491515722,0.99823194793210124,0.99860029211287948,0.99890457643616659,0.9991535363370051,0.99935507530442103,0.99951630647830769,0.99964359424713078,0.99974259584513248,0.99981830294949026,0.99987508327773356,0.99991672218516947,0.99994646426190803,0.9999670549304025,0.99998078204273466,0.99998951747779408,0.99999475873886778,0.99999767055059174,0.99999912645643707,0.9999997504160465,0.9999999584026612,0.99999999999996314,0.99999999999994582,0.99999999999991995,0.99999999999991984,1],"text":["N:  1<br />value: 0.0625000","N:  2<br />value: 0.1218354","N:  3<br />value: 0.1781280","N:  4<br />value: 0.2314964","N:  5<br />value: 0.2820558","N:  6<br />value: 0.3299187","N:  7<br />value: 0.3751945","N:  8<br />value: 0.4179894","N:  9<br />value: 0.4584068","N: 10<br />value: 0.4965472","N: 11<br />value: 0.5325081","N: 12<br />value: 0.5663843","N: 13<br />value: 0.5982678","N: 14<br />value: 0.6282478","N: 15<br />value: 0.6564109","N: 16<br />value: 0.6828408","N: 17<br />value: 0.7076189","N: 18<br />value: 0.7308237","N: 19<br />value: 0.7525315","N: 20<br />value: 0.7728158","N: 21<br />value: 0.7917478","N: 22<br />value: 0.8093963","N: 23<br />value: 0.8258277","N: 24<br />value: 0.8411059","N: 25<br />value: 0.8552929","N: 26<br />value: 0.8684481","N: 27<br />value: 0.8806288","N: 28<br />value: 0.8918903","N: 29<br />value: 0.9022854","N: 30<br />value: 0.9118653","N: 31<br />value: 0.9206788","N: 32<br />value: 0.9287728","N: 33<br />value: 0.9361923","N: 34<br />value: 0.9429803","N: 35<br />value: 0.9491781","N: 36<br />value: 0.9548250","N: 37<br />value: 0.9599585","N: 38<br />value: 0.9646145","N: 39<br />value: 0.9688271","N: 40<br />value: 0.9726286","N: 41<br />value: 0.9760501","N: 42<br />value: 0.9791206","N: 43<br />value: 0.9818679","N: 44<br />value: 0.9843181","N: 45<br />value: 0.9864962","N: 46<br />value: 0.9884253","N: 47<br />value: 0.9901275","N: 48<br />value: 0.9916233","N: 49<br />value: 0.9929322","N: 50<br />value: 0.9940721","N: 51<br />value: 0.9950601","N: 52<br />value: 0.9959118","N: 53<br />value: 0.9966418","N: 54<br />value: 0.9972637","N: 55<br />value: 0.9977899","N: 56<br />value: 0.9982319","N: 57<br />value: 0.9986003","N: 58<br />value: 0.9989046","N: 59<br />value: 0.9991535","N: 60<br />value: 0.9993551","N: 61<br />value: 0.9995163","N: 62<br />value: 0.9996436","N: 63<br />value: 0.9997426","N: 64<br />value: 0.9998183","N: 65<br />value: 0.9998751","N: 66<br />value: 0.9999167","N: 67<br />value: 0.9999465","N: 68<br />value: 0.9999671","N: 69<br />value: 0.9999808","N: 70<br />value: 0.9999895","N: 71<br />value: 0.9999948","N: 72<br />value: 0.9999977","N: 73<br />value: 0.9999991","N: 74<br />value: 0.9999998","N: 75<br />value: 1.0000000","N: 76<br />value: 1.0000000","N: 77<br />value: 1.0000000","N: 78<br />value: 1.0000000","N: 79<br />value: 1.0000000","N: 80<br />value: 1.0000000"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[30,30],"y":[0.015624999999992784,1.0468750000000004],"text":"xintercept: 30","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-2.9500000000000002,83.950000000000003],"y":[1,1],"text":"yintercept: 1","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":41.902864259028647,"r":6.6417600664176026,"b":37.193856371938573,"l":44.499792444997929},"font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205},"title":{"text":"Probabilidad de que uno de los temas estudiados aparezca","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.9500000000000002,83.950000000000003],"tickmode":"array","ticktext":["0","10","20","30","40","50","60","70","80"],"tickvals":[0,10,20.000000000000004,30.000000000000004,40,50.000000000000007,59.999999999999993,70,80],"categoryorder":"array","categoryarray":["0","10","20","30","40","50","60","70","80"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.3208800332088013,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.60379636967432737,"zeroline":false,"anchor":"y","title":{"text":"Temas estudiados","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.015624999999992784,1.0468750000000004],"tickmode":"array","ticktext":["5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],"tickvals":[0.050000000000000003,0.10000000000000002,0.15000000000000002,0.20000000000000001,0.25,0.30000000000000004,0.35000000000000003,0.40000000000000002,0.45000000000000001,0.5,0.55000000000000004,0.60000000000000009,0.65000000000000002,0.70000000000000007,0.75,0.80000000000000004,0.85000000000000009,0.90000000000000002,0.95000000000000007,1],"categoryorder":"array","categoryarray":["5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.3208800332088013,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.60379636967432737,"zeroline":false,"anchor":"x","title":{"text":"Probabilidad","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835205}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":10.62681610626816}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"2122fffd5cad":{"x":{},"y":{},"type":"scatter"},"2122f22519154":{"xintercept":{}},"2122f13f65259":{"yintercept":{}}},"cur_data":"2122fffd5cad","visdat":{"2122fffd5cad":["function (y) ","x"],"2122f22519154":["function (y) ","x"],"2122f13f65259":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br> En el experimento le preguntamos a las personas por la probabilidad de que les apareciera alguno de los temas estudiados en la prueba. Comparamos las siguientes dos preguntas:</p>
<ul>
<li>¿Cuál es la probabilidad de que <strong>salga uno</strong> de los temas que has estudiado?<br>
</li>
<li>¿Cuál es la probabilidad de que <strong>no salga ninguno</strong> de los temas que has estudiado?</li>
</ul>
<p>Miramos el error promedio en función de la pregunta (cuanto se han alejado de la probabilidad correcta), y vimos que nuestra manipulación había tenido un efecto considerable:</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">Question</th>
<th style="text-align: right;">Error_promedio</th>
<th style="text-align: right;">SD</th>
<th style="text-align: right;">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">p (no salga ninguno)</td>
<td style="text-align: right;">4.016129</td>
<td style="text-align: right;">35.82469</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="even">
<td style="text-align: left;">p (salga uno)</td>
<td style="text-align: right;">-30.741936</td>
<td style="text-align: right;">20.01494</td>
<td style="text-align: right;">31</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><br></p>
<p>Hay una diferencia notable entre condiciones. Pasamos de un error promedio del -30.7% a tan solo 4%, simplemente cambiando la pregunta. Hagamos un sencillo análisis de regresión para ver si la diferencia es significativa, y cuanta varianza explica nuestro modelo.</p>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small"><tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">&nbsp;</td>
<td colspan="3" data-quarto-table-cell-role="th" style="text-align: center; border-top: double; font-style: normal; font-weight: bold; padding: 0.2cm;">Error</td>
</tr>
<tr class="even">
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Predictors</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">Estimates</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">CI</td>
<td style="text-align: center; border-bottom: 1px solid; font-style: italic; font-weight: normal;">p</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">(Intercept)</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">4.02</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-6.41&nbsp;–&nbsp;14.44</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">0.444</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">Question [p (salga uno)]</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-34.76</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;">-49.50&nbsp;–&nbsp;-20.02</td>
<td style="text-align: left; padding: 0.2cm; vertical-align: top;"><strong>&lt;0.001</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">Observations</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm; border-top: 1px solid;">62</td>
</tr>
<tr class="even">
<td style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">R<sup>2</sup> / R<sup>2</sup> adjusted</td>
<td colspan="3" style="text-align: left; padding: 0.2cm; vertical-align: top; padding-top: 0.1cm; padding-bottom: 0.1cm;">0.270 / 0.258</td>
</tr>
</tbody></table>
</div>
</div>
<div class="cell">
<pre><code>#&gt; 
#&gt;  Shapiro-Wilk normality test
#&gt; 
#&gt; data:  modelo_regresion$residuals
#&gt; W = 0.96215, p-value = 0.0532</code></pre>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/visualizacion-importante-01c-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p><br></p>
<p>Todo es hermoso. Tenemos un efecto claramente significativo de la pregunta (y con un R2-ajustado de .258, no está nada mal), y además, nuestro modelo no incumple el supuesto de normalidad de residuos (¡por los pelos!).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota importante sobre las pruebas de normalidad. <em>Hack click para leerme</em>.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;"><a href="https://stats.stackexchange.com/questions/2492/is-normality-testing-essentially-useless">Las pruebas de normalidad son muy sensibles al n de la muestra</a></span></p>
</div>
</div>
</div>
<p>Preparamos un plot con promedios y barras con error standard para nuestro paper.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/visualizacion-importante-01d-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Estamos listos para escribir el paper. Preparemos la tabla con descriptivos…</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">Question</th>
<th style="text-align: right;">Error_promedio</th>
<th style="text-align: right;">SD</th>
<th style="text-align: right;">N</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">p (no salga ninguno)</td>
<td style="text-align: right;">4.016129</td>
<td style="text-align: right;">35.82469</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="even">
<td style="text-align: left;">p (salga uno)</td>
<td style="text-align: right;">-30.741936</td>
<td style="text-align: right;">20.01494</td>
<td style="text-align: right;">31</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
<p>Es curioso que la desviación estandard sea mayor en el grupo con menos error promedio… Visualicemos las respuestas de todos los participantes, junto con la distribución de los datos.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/visualizacion-importante-04-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Como se puede apreciar en la gráfica, cuando usamos la pregunta <code>¿Cuál es la probabilidad de que no salga ninguno de los temas que has estudiado?</code> no estamos reduciendo el error, sino convirtiendo una distribución de respuestas unimodal en bimodal.</p>
<hr>
<p><strong>TLDR</strong>: La manera en la visualizamos la información determina las conclusiones a las que llegamos. En una sola gráfica:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/visualizacion-importante-05-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<section id="moraleja-es-importante-mostrar-los-datos-individuales-yo-la-distribución-de-los-datos" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="moraleja-es-importante-mostrar-los-datos-individuales-yo-la-distribución-de-los-datos">Moraleja: es importante mostrar los datos individuales y/o la distribución de los datos</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/BoxViolinSmaller.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: https://www.research.autodesk.com/publications/same-stats-different-graphs/</figcaption></figure>
</div>
<hr>
<!-- [@riedel2022cs]: https://doi.org/10.1042/CS20220287 --><hr></section></section></section><section id="por-qué-r" class="level2" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="por-qué-r">
<span class="header-section-number">1.2</span> Por qué R?</h2>
<div style="float:left;position: relative; margin:0px 30px 0px 0px;">
<img src="../data/images/R_logo.png" class="img-fluid">
</div>
<p>R es <a href="http://r4stats.com/articles/popularity/">uno de los programas para data science mas populares</a>, especialmente usado en la academia. El numero de paquetes que ofrecen funcionalidades de todo tipo no ha dejado de crecer. En 2023 el numero de paquetes en <a href="https://cran.r-project.org/web/packages/index.html">R-cran</a> ha superado los 25,000, y el ritmo de crecimiento nos acerca a la singularidad… ;)</p>
<p><br></p>
<div style="clear: both;">

</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/number-of-submitted-packages-to-CRAN.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: https://gist.github.com/daroczig/3cf06d6db4be2bbe3368</figcaption></figure>
</div>
<!-- (https://gist.githubusercontent.com/daroczig/3cf06d6db4be2bbe3368/raw/b66b0531fb1b86d3e04a003b2e105ad4f147900e/number-of-submitted-packages-to-CRAN.png)   -->
<p><br></p>
<p>Además de lo anterior, R es un programa de <a href="https://en.wikipedia.org/wiki/Open_source">código abierto</a> (algo esencial para poder hacer ciencia reproducible), con una <a href="https://community.rstudio.com/">comunidad de usuarios</a> muy acogedora, y con un importante foco en la <a href="https://qz.com/work/1661486/r-ladies-made-data-science-inclusive/">inclusividad</a>.</p>
<p>La importancia de la comunidad es difícil de apreciar. Por ejemplo, es relativamente habitual que uno abra un issue en Github pidiendo una nueva característica en un paquete, y que los creadores la implementen (e.g.&nbsp;<a href="https://github.com/easystats/correlation/issues/145">correlation</a>, <a href="https://github.com/ddsjoberg/gtsummary/issues/677">gtsummary</a>, <a href="https://github.com/ropensci/rorcid/issues/44">rorcid</a>), que uno reporte un error y lo corrijan (e.g.&nbsp;<a href="https://github.com/strengejacke/sjPlot/issues/725">sjPlot</a>, <a href="https://github.com/ddsjoberg/gtsummary/issues/686">gtsummary</a>), recibir correcciones y mejoras en tus repositorios (e.g.&nbsp;<a href="https://github.com/gorkang/html2latex/pull/1">html2latex</a>, <a href="https://github.com/gorkang/2019-Chile/pull/1">2019-Chile</a>), o poder contribuir a repositorios de otros (e.g.&nbsp;<a href="https://github.com/jspsych/jsPsych/pull/1212">jsPsych</a>, <a href="https://github.com/ddsjoberg/gtsummary/pull/683">gtsummary</a>).</p>
<p>Sus funciones de visualización son muy potentes (ver la <a href="https://www.r-graph-gallery.com/">r-graph-gallery</a> para algunos ejemplos), siendo usadas como herramienta principal en medios como la <a href="https://medium.com/bbc-visual-and-data-journalism/how-the-bbc-visual-and-data-journalism-team-works-with-graphics-in-r-ed0b35693535">BBC</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/BBC.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: <a href="https://medium.com/bbc-visual-and-data-journalism/how-the-bbc-visual-and-data-journalism-team-works-with-graphics-in-r-ed0b35693535">BBC</a></figcaption></figure>
</div>
<p><br></p>
<p>No menos importante, hay una gran cantidad de cursos, tutoriales, presentaciones y libros de una calidad excelente, con los que podemos aprender de manera autónoma. Por ejemplo:</p>
<ul>
<li><a href="https://psyteachr.github.io/">psyTeachR team at the University of Glasgow</a></li>
<li><a href="https://pkg.garrickadenbuie.com/gentle-ggplot2/">A Gentle Guide to the Grammar of Graphics with ggplot2</a></li>
<li><a href="https://resulumit.com/teaching/rmd_workshop.htm">resulumit.com Rmd workshop</a></li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
<li><a href="https://adv-r.hadley.nz/">Advanced R</a></li>
</ul>
<p><br></p>
<p>Para ver una compilación de todos los libros disponibles: <a href="https://www.bigbookofr.com/index.html">Big Book of R</a></p>
<p><br></p>
<p>Con R puedes recoger datos interactivamente con <a href="https://shiny.rstudio.com/">shiny</a>, preparar datos (o extraerlos de paginas web con <a href="https://github.com/tidyverse/rvest">rvest</a> o <a href="https://github.com/ropensci/RSelenium">RSelenium</a>), visualizar datos estáticos con <a href="https://ggplot2.tidyverse.org/">ggplot</a>, animarlos con <a href="https://github.com/thomasp85/gganimate">gganimate</a>, visualizarlos con interactivamente con <a href="https://github.com/ropensci/plotly/">plotly</a> o <a href="https://shiny.rstudio.com/">shiny</a>. Puedes también analizar los datos con todas las técnicas imaginables, desde anovas con <a href="https://github.com/singmann/afex">afex</a> a modelos mixtos con <a href="https://github.com/lme4/lme4">lmer</a> y/o <a href="https://github.com/singmann/afex">afex</a>, pasando por meta-análisis con <a href="http://www.metafor-project.org/doku.php">metafor</a>, SEM, Path analysis, mediación, con <a href="http://lavaan.ugent.be/tutorial/sem.html">lavaan</a>, análisis Bayesianos con <a href="https://github.com/paul-buerkner/brms">brms</a> o <a href="http://bayesfactor.blogspot.com/">bayesfactor</a>, y un larguísimo etc. Puedes llevar tus visualizaciones y análisis a reportes automáticos en múltiples formatos (pdf, html, docx) con <a href="https://rmarkdown.rstudio.com/">Rmarkdown</a>, o <a href="https://quarto.org/">quarto</a>, crear libros como este con <a href="https://bookdown.org/">bookdown</a>, páginas web con <a href="https://bookdown.org/yihui/blogdown/">blogdown</a> o <a href="https://rstudio.github.io/distill/">distill</a>, e incluso papers completamente reproducibles (preparación y análisis de datos) en formato APA con <a href="https://github.com/crsh/papaja">papaja</a>.</p>
<p><br></p>
<section id="bienvenida-al-tidyverse" class="level3" data-number="1.2.1"><h3 data-number="1.2.1" class="anchored" data-anchor-id="bienvenida-al-tidyverse">
<span class="header-section-number">1.2.1</span> Bienvenida al tidyverse</h3>
<div style="float:left;position: relative; margin:0px 30px 0px 0px;">
<p><img src="../data/images/tidyverse-logo.png" class="img-fluid"></p>
</div>
<p>El <a href="https://www.tidyverse.org/">tidyverse</a> es un conjunto de paquetes que nos permitirán hacer de manera (habitualmente) intuitiva muchas tareas de preparación y visualización de datos.</p>
<section id="tidyverse-vs-base-r" class="level4" data-number="1.2.1.1"><h4 data-number="1.2.1.1" class="anchored" data-anchor-id="tidyverse-vs-base-r">
<span class="header-section-number">1.2.1.1</span> Tidyverse vs Base R</h4>
<p>Muchas de las funciones que existen en el Tidyverse tienen un <a href="https://tavareshugo.github.io/data_carpentry_extras/base-r_tidyverse_equivalents/base-r_tidyverse_equivalents.html">equivalente en base-R</a> (la instalación por defecto de R). El Tidyverse tiene ventajas y desventajas. La ventaja fundamental es que el código resulta (habitualmente) más fácil de leer, los nombres de las funciones son más intuitivos, y la forma de hacer las cosas tiene a ser consistente. La desventaja fundamental es que <a href="http://www.tinyverse.org/">incrementamos el numero de dependencias</a> (paquetes) de nuestro código.</p>
<p>Veamos un ejemplo extraído de <a href="https://tavareshugo.github.io/data_carpentry_extras/base-r_tidyverse_equivalents/base-r_tidyverse_equivalents.html">aquí</a>.</p>
<p><br></p>
<p>La misma operación con base-R o con tidyverse:</p>
<p><em>Filter rows with conditions evaluated within groups: iris flowers with maximum “Petal.Width” for each “Species”</em></p>
<p><strong>Tidyverse</strong></p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="va">iris</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Petal.Width</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">Petal.Width</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Base-R</strong></p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="co"># First operate in the data.frame by group (split-apply)</span></span>
<span>  <span class="va">widest_petals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/by.html">by</a></span><span class="op">(</span><span class="va">iris</span>, </span>
<span>                      INDICES <span class="op">=</span> <span class="va">iris</span><span class="op">$</span><span class="va">Species</span>, </span>
<span>                      FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>                        <span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">Petal.Width</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">Petal.Width</span><span class="op">)</span>, <span class="op">]</span> </span>
<span>                      <span class="op">}</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Then combine the results into a data.frame</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">widest_petals</span><span class="op">)</span></span>
<span><span class="co">#&gt;               Sepal.Length Sepal.Width Petal.Length Petal.Width    Species</span></span>
<span><span class="co">#&gt; setosa                 5.0         3.5          1.6         0.6     setosa</span></span>
<span><span class="co">#&gt; versicolor             5.9         3.2          4.8         1.8 versicolor</span></span>
<span><span class="co">#&gt; virginica.101          6.3         3.3          6.0         2.5  virginica</span></span>
<span><span class="co">#&gt; virginica.110          7.2         3.6          6.1         2.5  virginica</span></span>
<span><span class="co">#&gt; virginica.145          6.7         3.3          5.7         2.5  virginica</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="antes-de-empezar" class="level3" data-number="1.2.2"><h3 data-number="1.2.2" class="anchored" data-anchor-id="antes-de-empezar">
<span class="header-section-number">1.2.2</span> Antes de empezar</h3>
<p>Programar es muy difícil. Todos necesitamos ayuda. Contar con una comunidad robusta con la que compartir, preguntar, contribuir, ayuda muchísimo.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/dunning-kruger.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: http://www.keywordbasket.com/ZWZlY3RvIGR1bm5pbmcta3J1Z2Vy/</figcaption></figure>
</div>
<p><br></p>
<p>Hay algunos recursos que son <strong>imprescindibles</strong>. Nadie sabe como <em>los antiguos</em> podían programar antes de la llegada de Stackoverflow:</p>
<ul>
<li><p><a href="https://stackoverflow.com/questions/tagged/r"><strong>Stack overflow</strong></a></p></li>
<li><p><a href="https://www.google.com/search?q=avoid+scientific+notation+R&amp;oq=avoid+scientific+notation+R&amp;aqs=chrome..69i57j0i22i30l9.5946j0j7&amp;sourceid=chrome&amp;ie=UTF-8">Google: avoid scientific notation R</a>: <code>options(scipen=999)</code></p></li>
</ul>
<p>Y otros recursos que resultan muy útiles:</p>
<ul>
<li><p><a href="https://community.rstudio.com/">Comunidad de usuarios de Rstudio</a></p></li>
<li>
<p><a href="https://twitter.com/home">Twitter!</a> Por ejemplo:</p>
<ul>
<li>
<a href="https://twitter.com/thomas_mock"><img src="../data/images/twitter_small.png" class="img-fluid"> @thomas_mock</a> (#TidyTuesday)<br>
</li>
<li>
<a href="https://twitter.com/dataandme"><img src="../data/images/twitter_small.png" class="img-fluid"> @dataandme</a><br>
</li>
<li>
<a href="https://twitter.com/rivaquiroga"><img src="../data/images/twitter_small.png" class="img-fluid"> @rivaquiroga</a><br>
</li>
<li><a href="https://twitter.com/RLadiesSantiago"><img src="../data/images/twitter_small.png" class="img-fluid"> @RLadiesSantiago</a></li>
</ul>
</li>
<li><p>Webs como <a href="https://www.r-bloggers.com/">R bloggers</a></p></li>
</ul></section><section id="r-para-visualización-de-datos" class="level3" data-number="1.2.3"><h3 data-number="1.2.3" class="anchored" data-anchor-id="r-para-visualización-de-datos">
<span class="header-section-number">1.2.3</span> R para visualización de datos</h3>
<p><a href="https://ggplot2.tidyverse.org/">ggplot2</a> es el paquete por excelencia para visualización de datos. Su potencia va asociada a un nivel de complejidad considerable, hasta el punto que hay <a href="https://github.com/rstudio/cheatsheets/raw/main/data-visualization-2.1.pdf">Cheat sheets oficiales</a>, <a href="https://www.computerworld.com/article/2935394/my-ggplot2-cheat-sheet-search-by-task.html">Cheat sheets buscables</a>, y decenas de miles de preguntas en <a href="https://stackoverflow.com/questions/tagged/ggplot2">Stack Overflow</a>.</p>
<section id="primeros-pasos---con-training-wheels" class="level4" data-number="1.2.3.1"><h4 data-number="1.2.3.1" class="anchored" data-anchor-id="primeros-pasos---con-training-wheels">
<span class="header-section-number">1.2.3.1</span> Primeros pasos - con training wheels</h4>
<p>Para empezar a usar ggplot sin tener que preocuparnos de su complejidad, podemos usar la función <code>esquisse:::esquisser()</code> del paquete <a href="https://www.williamrchase.com/">esquisse</a>. Esta nos permite usar la potencia de ggplot para explorar una base de datos de manera muy sencilla.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/esquisse.gif" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: https://github.com/will-r-chase/blog/blob/master/static/slides/slide_img/esquisse.gif</figcaption></figure>
</div>
<p><br></p>
<p>La manera fácil (1, 2, 3), usando <a href="https://github.com/dreamRs/esquisse">esquisse</a>:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># 1) Asegúrate que hemos instalado el paquete esquisse</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://dreamrs.github.io/esquisse/">'esquisse'</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'esquisse'</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://dreamrs.github.io/esquisse/">'esquisse'</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2) Lanza el wizard esquisser  </span></span>
<span>  <span class="fu">esquisse</span><span class="fu">:::</span><span class="fu"><a href="https://dreamrs.github.io/esquisse/reference/esquisser.html">esquisser</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3) Crea el gráfico que quieras, exporta el código...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="aprendamos-con-garrick" class="level4" data-number="1.2.3.2"><h4 data-number="1.2.3.2" class="anchored" data-anchor-id="aprendamos-con-garrick">
<span class="header-section-number">1.2.3.2</span> Aprendamos con Garrick</h4>
<p><a href="https://www.garrickadenbuie.com/">Garrick Aden-Buie</a> (<a href="https://twitter.com/grrrck"><img src="../data/images/twitter_small.png" class="img-fluid"> @grrrck</a>) ha creado una excelente <a href="https://pkg.garrickadenbuie.com/gentle-ggplot2/#28">introducción a ggplot2 y la gramática de gráficos</a>. Os recomiendo revisarla para familiarizaros con las funcionalidades de ggplot.<br><!-- https://github.com/gadenbuie/gentle-ggplot2  --></p>
</section></section></section><section id="visualización-de-datos-con-ggplot2" class="level2" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="visualización-de-datos-con-ggplot2">
<span class="header-section-number">1.3</span> Visualización de datos con ggplot2</h2>
<section id="componentes-de-una-gráfica" class="level3" data-number="1.3.1"><h3 data-number="1.3.1" class="anchored" data-anchor-id="componentes-de-una-gráfica">
<span class="header-section-number">1.3.1</span> Componentes de una gráfica</h3>
<p>En esta sección vamos a ver algunos de los componentes que usaremos cuando visualicemos datos. Muchos de los ejemplos que usaremos vienen de <a href="https://r4ds.had.co.nz/data-visualisation.html">R for data science</a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ingredientes esenciales de una gráfica
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>
<strong>Aesthetic mappings</strong> (aes): Variables, colores, rellenos, formas, …</li>
<li>
<strong>Geoms</strong> (geom_): puntos, líneas, boxplots, …</li>
<li>
<strong>Facets</strong> (facet_): paneles con diferentes gráficos para cada nivel de una variable categórica, …</li>
<li>
<strong>Transformaciones estadísticas</strong>: calcular promedios, barras de error, …</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/visualization-layers-of-ggplot.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: https://skillgaze.com/2017/10/31/understanding-different-visualization-layers-of-ggplot/</figcaption></figure>
</div>
</div>
</div>
<hr>
<section id="mi-primera-gráfica-1-2-3" class="level4" data-number="1.3.1.1"><h4 data-number="1.3.1.1" class="anchored" data-anchor-id="mi-primera-gráfica-1-2-3">
<span class="header-section-number">1.3.1.1</span> Mi primera gráfica 1-2-3</h4>
<p>Para crear una gráfica con ggplot, tenemos que:</p>
<ul>
<li>indicar donde están nuestros datos y que mostraremos en los ejes <code>x</code> e <code>y</code><br>
</li>
<li>añadir la o las geometrias (<code>geoms</code>) que queramos</li>
</ul>
<p>Usaremos <code>+</code> para sumar instrucciones, con una lógica de capas superpuestas.</p>
<p>Por ejemplo:</p>
<ol type="A">
<li><p>Indicamos los datos y coordenadas: <code>ggplot(data = mpg, aes(x = displ, y = hwy))</code></p></li>
<li><p>Añadimos el <code>geom</code> de puntos para mostrar la relación entre x e y: <code>+ geom_point()</code></p></li>
<li><p>Añadimos un segundo <code>geom</code> para trazar una línea de tendencia: <code>+ geom_smooth()</code></p></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-example-01-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<hr></section></section><section id="aesthetic-mappings" class="level3" data-number="1.3.2"><h3 data-number="1.3.2" class="anchored" data-anchor-id="aesthetic-mappings">
<span class="header-section-number">1.3.2</span> Aesthetic mappings</h3>
<p>En <strong>aes()</strong> vamos a indicar las variables que queremos en los ejes x e y, el color de los puntos o líneas, el relleno de las barras, la forma de los puntos, el tipo de linea, la agrupación de los datos, etc.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Parámetros estéticos
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>
<strong>x</strong>: x = gdpPercap</li>
<li>
<strong>y</strong>: y = lifeExp</li>
<li>
<strong>color</strong>: color = continent; color = “red”; color = “#FAA627”</li>
<li>
<strong>fill</strong>: fill = continent; fill = “red”; fill = “#FAA627”</li>
<li>
<strong>alpha</strong>: alpha = continent; alpha = 0.2</li>
<li>
<strong>size</strong>: size = continent; size = 5</li>
<li>
<strong>shape</strong>: shape = continent; shape = 0 <a href="01-introduccion_visualizacion.html#shape">ver codigo de las distintas formas</a>
</li>
<li>
<strong>linetype</strong>: linetype = continent; linetype = “dashed”</li>
<li>
<strong>group</strong>: group = continent</li>
</ul>
</div>
</div>
<section id="x-y" class="level4" data-number="1.3.2.1"><h4 data-number="1.3.2.1" class="anchored" data-anchor-id="x-y">
<span class="header-section-number">1.3.2.1</span> x-y</h4>
<p>Algo esencial es decirle a ggplot que queremos que aparezca en el eje <code>x</code> y en el eje <code>y</code> de nuestra gráfica.</p>
<p>Empezaremos usando los datos de gapminder. A ver que variables tenemos en el data-frame <code>gapminder</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">gapminder</span></span>
<span><span class="co">#&gt; # A tibble: 1,704 × 6</span></span>
<span><span class="co">#&gt;   country     continent  year lifeExp      pop gdpPercap</span></span>
<span><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span><span class="co">#&gt; 2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span><span class="co">#&gt; 3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span><span class="co">#&gt; 4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span><span class="co">#&gt; 5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span><span class="co">#&gt; 6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span><span class="co">#&gt; # ℹ 1,698 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualizamos la relación entre gdpPercap (eje x), y lifeExp (eje y):</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, </span>
<span>         mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/aes-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Si respetamos el orden de las variables, podemos simplificar nuestro código, evitando el <code>data =</code> y <code>mapping =</code>.</p>
<p>Por ejemplo, podemos ver de nuevo la relación entre lifeExp y gdpPercap, invirtiendo los ejes.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">lifeExp</span>, <span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/aes2-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="ejercicio" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio">Ejercicio</h4>
<p>Usando <code>gapminder</code>, ¿podrías crear un gráfico de gdp per cápita por población como éste?</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_xy-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="color-alpha-size" class="level4" data-number="1.3.2.2"><h4 data-number="1.3.2.2" class="anchored" data-anchor-id="color-alpha-size">
<span class="header-section-number">1.3.2.2</span> Color, alpha, size</h4>
<p>Para asignar colores podemos usar nombres de colores en inglés, o algo llamado código HEX:</p>
<ul>
<li><p>Escribe <code><a href="https://rdrr.io/r/grDevices/colors.html">colors()</a></code> en la Consola de RStudio</p></li>
<li><p><a href="https://www.rapidtables.com/web/color/RGB_Color.html#color-picker">Ver el código HEX de los colores</a></p></li>
</ul>
<hr>
<p>Empecemos a cambiar parámetros de nuestro gráfico inicial:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="co"># Gráfico inicial</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/color_1-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Color “rojo” para los puntos con <code>color = "red"</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/color_2-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Color en función de la variable ‘continent’. Al usar la variable continent, tenemos que ponerlo dentro de <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/color_3-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Color en función de la variable ‘continent’. Cambiamos el tamaño de los puntos a 2.</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/color_4-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Color en función de la variable ‘continent’. Cambiamos el tamaño de los puntos a 2. Añadimos transparencia usando el parámetro ‘alpha’.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, </span>
<span>                        color <span class="op">=</span> <span class="va">continent</span>, </span>
<span>                        size <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                        alpha <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/color_5-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="ejercicios" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios">Ejercicios</h4>
<p>Usando como base el plot siguiente (GDP x población):</p>
<pre><code>ggplot(gapminder, aes(gdpPercap, pop)) + 
    geom_point()</code></pre>
<p>¿Podrías hacer lo siguiente?:</p>
<ul>
<li>Colorear los puntos por continente</li>
<li>Tamaño del punto 4</li>
<li>Alpha 0.5</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_point1-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Cada uno de los siguientes gráficos tiene un error. ¿Sabrias corregirlos?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solucion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">color = continent debe ir dentro de aes()</span></p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">pop</span><span class="op">)</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span>, alpha <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_point2-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solucion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">color = “blue” debe ir fuera de aes()</span></p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">pop</span>, color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span>, alpha <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_point3-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p><br></p>
</section><section id="shape" class="level4" data-number="1.3.2.3"><h4 data-number="1.3.2.3" class="anchored" data-anchor-id="shape">
<span class="header-section-number">1.3.2.3</span> Shape</h4>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Códigos para las distintas formas
</div>
</div>
<div class="callout-body-container callout-body">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/shapes-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: https://r4ds.had.co.nz/data-visualisation.html#aesthetic-mappings</figcaption></figure>
</div>
</div>
</div>
<p>En este ejemplo usamos la variable <code>continent</code> para que cada asignar una forma diferente a cada uno de los continentes.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, shape <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/shape-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="linetype" class="level4" data-number="1.3.2.4"><h4 data-number="1.3.2.4" class="anchored" data-anchor-id="linetype">
<span class="header-section-number">1.3.2.4</span> Linetype</h4>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Códigos para los distintos estilos de linea
</div>
</div>
<div class="callout-body-container callout-body">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/ggplot2-linetype-identity.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: http://sape.inf.usi.ch/quick-reference/ggplot2/linetype</figcaption></figure>
</div>
</div>
</div>
<p>Podemos definir directamente el tipo de línea que queremos en <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>:</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">mean</span>, geom <span class="op">=</span> <span class="st">"line"</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/linetype-1-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>O que el tipo de línea dependa de una variable:</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">lifeExp</span>, linetype <span class="op">=</span> <span class="va">continent</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>fun <span class="op">=</span> <span class="va">mean</span>, geom <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/linetype-2-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section></section><section id="geoms" class="level3" data-number="1.3.3"><h3 data-number="1.3.3" class="anchored" data-anchor-id="geoms">
<span class="header-section-number">1.3.3</span> Geoms</h3>
<p>Una de las cosas más difíciles cuando nos enfrentamos a nuevos datos es elegir el método más efectivo para visualizarlos. Hay varios recursos interesantes sobre <a href="https://github.com/widged/data-for-good/wiki/Visualisation-::-Choosing-a-chart">cómo elegir una gráfica</a>. En esta sección veremos distintos tipos de geometría, o <code>geoms_()</code>.</p>
<hr>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Algunos tipos de geoms
</div>
</div>
<div class="callout-body-container callout-body">
<p>Para una lista exhaustiva ver el <a href="https://ggplot2.tidyverse.org/reference/#geoms">manual de ggplot2</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../data/images/geoms.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">SOURCE: https://nbisweden.github.io/RaukR-2019/ggplot/presentation/ggplot_presentation_assets/geoms.png</figcaption></figure>
</div>
<!-- `geom_abline()`, `geom_area()`, `geom_bar()`, `geom_bin2d()`, `geom_blank()`, `geom_boxplot()`, `geom_col()`, `geom_contour()`, `geom_contour_filled()`, `geom_count()`, `geom_crossbar()`, `geom_curve()`, `geom_density()`, `geom_density2d()`, `geom_density2d_filled()`, `geom_density_2d()`, `geom_density_2d_filled()`, `geom_dotplot()`, `geom_errorbar()`, `geom_errorbarh()`, `geom_freqpoly()`, `geom_function()`, `geom_hex()`, `geom_histogram()`, `geom_hline()`, `geom_jitter()`, `geom_label()`, `geom_line()`, `geom_linerange()`, `geom_map()`, `geom_path()`, `geom_point()`, `geom_pointrange()`, `geom_polygon()`, `geom_qq()`, `geom_qq_line()`, `geom_quantile()`, `geom_raster()`, `geom_rect()`, `geom_ribbon()`, `geom_rug()`, `geom_segment()`, `geom_sf()`, `geom_sf_label()`, `geom_sf_text()`, `geom_smooth()`, `geom_spoke()`, `geom_step()`, `geom_text()`, `geom_tile()`, `geom_violin()`, `geom_vline()`   -->
</div>
</div>
<section id="geom_point-y-geom_jitter" class="level4" data-number="1.3.3.1"><h4 data-number="1.3.3.1" class="anchored" data-anchor-id="geom_point-y-geom_jitter">
<span class="header-section-number">1.3.3.1</span> geom_point y geom_jitter</h4>
<p>Si queremos un gráfico de dispersión o scatterplot, podemos usar el <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code></p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-point-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>En algunos casos, tenemos muchos puntos que se superponen. Si usamos <code><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter()</a></code> la posición de los puntos cambia levemente de manera aleatoria para evitar superposiciones. Con las propiedades ´width´ y ´height´ podemos controlar cuando desplazamiento queremos horizontal y verticalmente.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-jitter-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="geom_smooth" class="level4" data-number="1.3.3.2"><h4 data-number="1.3.3.2" class="anchored" data-anchor-id="geom_smooth">
<span class="header-section-number">1.3.3.2</span> geom_smooth</h4>
<p>Podemos usar líneas de tendencia con <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code>. El <code>method</code> por defecto es <a href="https://en.wikipedia.org/wiki/Local_regression">loess</a>, pero podemos usar otros métodos (e.g.&nbsp;<code>geom_smooth(method = "lm")</code> para usar una regresión lineal).</p>
<p>Recuerda que las funciones que usamos (todo lo que contiene <code>()</code> e.g.&nbsp;<code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code>) tienen parámetros, que son instrucciones addicionales que nos permiten modificar como se comportan. Para ver que opciones tenemos, podemos ver la ayuda de las funciones : <code>?geom_smooth()</code>, o poner el cursor encima y presionar F1 (ayuda).</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  </span>
<span>  <span class="co"># Linea de tendencia (default loess)</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-smooth_1-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Usamos “lm”.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span>
<span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-smooth_2-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Un smooth por cada color (<code>continent</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="op">)</span></span>
<span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-smooth_3-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Coloreamos puntos pero mantenemos un solo smooth introduciendo el parámetro <code>aes(color = continent)</code> dentro de <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-smooth_4-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="ejercicios-1" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios-1">Ejercicios</h4>
<p>Usando como base el siguiente plot:</p>
<pre><code>  ggplot(gapminder, aes(gdpPercap, lifeExp, shape = continent)) + 
    geom_point()</code></pre>
<ul>
<li>Colorea los puntos por continente</li>
<li>Muestra una línea de tendencia por continente (sin el intervalo de confianza)</li>
<li>Haz que el tipo de línea cambie por continente</li>
<li>Añade transparencia a los puntos para que las líneas destaquen</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_smooth-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Ahora usando el data-frame <code>mpg</code>, intenta crear los 6 plots que se pueden ver más abajo.</p>
<p>Aquí tienes el plot base, para hacer mas fácil la tarea:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_grey</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-ejercicios-0-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Además de generar uno a uno los 6 plots, serías capaz de generar la figura que se ve abajo? Esto es, un plot que incluye los 6 plots juntos.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solucion para combinar plots
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">En la sección <a href="02-visualizacion-avanzada.html#combinando-graficas">Combinando gráficas</a> veras un ejemplo del uso de la función cowplot::plot_grid()</span></p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-ejercicios-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section><section id="section" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="section"></h4>
</section><section id="geom_boxplot-y-geom_violin" class="level4" data-number="1.3.3.3"><h4 data-number="1.3.3.3" class="anchored" data-anchor-id="geom_boxplot-y-geom_violin">
<span class="header-section-number">1.3.3.3</span> geom_boxplot y geom_violin</h4>
<p>Podemos crear diagramas de cajas (boxplots) con <code>geom_boxplot</code> o violines con <code>geom_violin</code> para visualizar como cambian los datos por grupo.</p>
<p>Boxplot con fill.</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">lifeExp</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-boxplot-violin_1-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Violins.</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">lifeExp</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-boxplot-violin_2-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Combinando ambos.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-boxplot-violin_3-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="histogramas" class="level4" data-number="1.3.3.4"><h4 data-number="1.3.3.4" class="anchored" data-anchor-id="histogramas">
<span class="header-section-number">1.3.3.4</span> geom_histogram y geom_bar</h4>
<p>Podemos usar histogramas <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> con variables continuas. Como puedes ver, ahora solo le pasamos una variable a <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code></p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-histogram-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>O si tenemos variables categóricas, <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">continent</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-bar-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="geom_density" class="level4" data-number="1.3.3.5"><h4 data-number="1.3.3.5" class="anchored" data-anchor-id="geom_density">
<span class="header-section-number">1.3.3.5</span> geom_density</h4>
<p>Para visualizar distribuciones (cuando tenemos muchos datos), podemos usar <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code>.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  </span>
<span>  <span class="co"># Density with fill and alpha</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">lifeExp</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-density-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="ejercicio-1" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-1">Ejercicio</h4>
<p>Añadiendo un parámetro a la gráfica de arriba, podemos transformarla en las versiones de abajo. ¿Podrías hacerlo? (recuerda que poníendote encima de <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code> y tecleando <code>F1</code> puedes ver la ayuda de la función).</p>
<pre><code>ggplot(gapminder, aes(lifeExp, fill = continent)) + 
      geom_density(alpha = .2)</code></pre>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solucion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;"><code>position = "stack"</code> y <code>position = "fill"</code>.</span></p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio-density-1.png" class="img-fluid" width="576"></p>
</div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio-density-2.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="geom_density_ridges" class="level4" data-number="1.3.3.6"><h4 data-number="1.3.3.6" class="anchored" data-anchor-id="geom_density_ridges">
<span class="header-section-number">1.3.3.6</span> geom_density_ridges</h4>
<p>Uno de mis geoms favoritos para comparar distribuciones es <code>geom_density_ridges</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># geom_density_ridges</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">lifeExp</span>, <span class="va">continent</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">ggridges</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-density_ridges-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Especialmente porque podemos incluir en el mismo gráfico información sobre distribuciones y puntos individuales.</p>
<div class="cell">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># geom_density_ridges junto con raincloud points y histograma</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">gapminder</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">lifeExp</span>, <span class="va">continent</span>, fill <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggridges</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span></span>
<span>    stat <span class="op">=</span> <span class="st">"binline"</span>,</span>
<span>    bins <span class="op">=</span> <span class="fl">20</span>,</span>
<span>    scale <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>    draw_baseline <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggridges</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggridges/reference/geom_density_ridges.html">geom_density_ridges</a></span><span class="op">(</span></span>
<span>    jittered_points <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    position <span class="op">=</span> <span class="st">"raincloud"</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>    scale <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>    quantile_lines <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    quantile_fun <span class="op">=</span> <span class="va">mean</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>n.breaks <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"vertical lines represent the mean lifeExp per continent"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geom-density_ridges2-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="ejercicios-2" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicios-2">Ejercicios</h4>
<p>Usando como base el plot de la seccion <a href="#histogramas">geom_histogram()</a>:</p>
<pre><code>  ggplot(gapminder, aes(lifeExp)) + 
    geom_histogram()</code></pre>
<ul>
<li>Colorea los histogramas por continente</li>
<li>Sabrias hacer que no se amontonen unos continentes sobre otros? Necesitarás añadir transparencia para ver todos los datos</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solucion
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;"><code>geom_histogram(position = "identity", alpha = .3)</code>.</span></p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_histogram-1.png" class="img-fluid" width="576"></p>
</div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_histogram-2.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Con el DF <code>diamonds</code>, crea el siguiente plot:</p>
<pre><code>  ggplot(diamonds, aes(cut))</code></pre>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pista
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span style="color: orange;">Tienes que usar el <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> y el parámetro <code>fill</code>.</span></p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/geoms-ejercicios-02-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section><section id="section-1" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="section-1"></h4>
</section></section><section id="personalización-básica" class="level3" data-number="1.3.4"><h3 data-number="1.3.4" class="anchored" data-anchor-id="personalización-básica">
<span class="header-section-number">1.3.4</span> Personalización básica</h3>
<p>Una gráfica sin elementos básicos como un título no resulta tan útil. Usaremos la función <code><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs()</a></code> para incluir o editar los siguientes elementos:</p>
<ul>
<li>
<code>title</code>: título de la gráfica</li>
<li>
<code>subtitle</code>: subtítulo</li>
<li>
<code>caption</code>: pie de gráfica (abajo a la derecha)</li>
<li>
<code>tag</code>: etiqueta de la gráfica (arriba a la izquierda)</li>
<li>
<code>x</code>: eje horizontal</li>
<li>
<code>y</code>: eje vertical</li>
<li>
<code>alt</code>: alt-text, importante para que los lectores de pantalla usados por personas ciegas describan las gráficas</li>
</ul>
<p>En el siguiente ejemplo, vamos a personalizar la gráfica del ejercicio anterior:</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">cut</span>, fill <span class="op">=</span> <span class="va">clarity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"How many diamons do we have?"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"A lot"</span>, </span>
<span>       caption <span class="op">=</span> <span class="st">"Source, the ggplot2::diamonds dataset"</span>,</span>
<span>       tag <span class="op">=</span> <span class="st">"a)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"How many diamonds"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Type of cut of the diamond"</span>, </span>
<span>       alt <span class="op">=</span> <span class="st">"Alt text for the plot. Very useful for blind people"</span></span>
<span>       <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/personalizacion-basica-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<section id="ejercicio-2" class="level4 ejercicio unnumbered"><h4 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-2">Ejercicio</h4>
<p>Usando como base este plot:</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_grey</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01-introduccion_visualizacion_files/figure-html/ejercicio_personalizacion_basica-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Personalizalo añadiendo y modificando:</p>
<ul>
<li>título<br>
</li>
<li>subtítulo<br>
</li>
<li>caption<br>
</li>
<li>ejes x e y</li>
</ul></section><section id="section-2" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="section-2"></h4>
</section></section></section><section id="bibliografía" class="level2 bibliografia unnumbered"><h2 class="bibliografia unnumbered anchored" data-anchor-id="bibliografía">Bibliografía</h2>
<ul>
<li><p>Matejka, J., &amp; Fitzmaurice, G. (2017, May). Same stats, different graphs: Generating datasets with varied appearance and identical statistics through simulated annealing. In Proceedings of the 2017 CHI Conference on Human Factors in Computing Systems (pp.&nbsp;1290-1294). ACM.</p></li>
<li><p>https://bbc.github.io/rcookbook/</p></li>
<li><p>https://github.com/bbc/bbplot</p></li>
<li><p>https://github.com/dreamRs/esquisse</p></li>
<li><p>Garrick Aden-Buie. A Gentle Guide to the Grammar of Graphics with ggplot2: https://github.com/gadenbuie/gentle-ggplot2</p></li>
<li><p>Michael Toth. You Need to Start Branding Your Graphs. Here’s How, with ggplot!: https://michaeltoth.me/you-need-to-start-branding-your-graphs-heres-how-with-ggplot.html</p></li>
<li><p>Claus Wilke: https://wilkelab.org/practicalgg/</p></li>
<li>
<p>Thomas Lin Pedersen:</p>
<ul>
<li>Part 1: https://www.youtube.com/watch?v=h29g21z0a68</li>
<li>Part 2: https://www.youtube.com/watch?v=0m4yywqNPVY</li>
</ul>
</li>
<li><p>Big Book or R : https://www.bigbookofr.com/index.html</p></li>
</ul>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../qmd/00-configuracion-sistema.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preparando nuestro sistema</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../qmd/02-visualizacion-avanzada.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualización avanzada</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left"><a href="http://orcid.org/0000-0001-7678-8656">Gorka Navarrete</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>