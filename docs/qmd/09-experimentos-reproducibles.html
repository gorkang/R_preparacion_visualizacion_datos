<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R para preparación y visualización de datos - 9&nbsp; Experimentos reproducibles</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../qmd/10-ejercicios.html" rel="next">
<link href="../qmd/08-git.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/09-experimentos-reproducibles.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">R para preparación y visualización de datos</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/gorkang/R_preparacion_visualizacion_datos" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introducción</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/00-configuracion-sistema.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preparando nuestro sistema</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/01-introduccion_visualizacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción a R y visualización de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/02-visualizacion-avanzada.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualización avanzada</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/03-preparacion_transformacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Preparación y transformación de datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/04-combinar-datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Combinar datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/05-analisis-datos-exploratorio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Análisis de datos exploratorio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/06-analisis-datos-inferencial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Análisis de datos inferencial</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/07-rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Trabajo con RMarkdown para reportes reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/08-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Control de cambios con Git y Github</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/09-experimentos-reproducibles.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/10-ejercicios.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Ejercicios</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Paquetes usados</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#pipeline-experimental-abierto-y-reproducible" id="toc-pipeline-experimental-abierto-y-reproducible" class="nav-link active" data-scroll-target="#pipeline-experimental-abierto-y-reproducible"><span class="header-section-number">9.1</span> Pipeline experimental abierto y reproducible</a></li>
  <li>
<a href="#como-crear-un-protocolo-experimental" id="toc-como-crear-un-protocolo-experimental" class="nav-link" data-scroll-target="#como-crear-un-protocolo-experimental"><span class="header-section-number">9.2</span> Como crear un protocolo experimental</a>
  <ul>
<li><a href="#ejercicio-1" id="toc-ejercicio-1" class="nav-link" data-scroll-target="#ejercicio-1">Ejercicio 1</a></li>
  </ul>
</li>
  <li><a href="#como-simular-datos" id="toc-como-simular-datos" class="nav-link" data-scroll-target="#como-simular-datos"><span class="header-section-number">9.3</span> Como simular datos</a></li>
  <li><a href="#como-preparar-datos" id="toc-como-preparar-datos" class="nav-link" data-scroll-target="#como-preparar-datos"><span class="header-section-number">9.4</span> Como preparar datos</a></li>
  <li>
<a href="#como-crear-un-reporte-dentro-del-jspsychhelper" id="toc-como-crear-un-reporte-dentro-del-jspsychhelper" class="nav-link" data-scroll-target="#como-crear-un-reporte-dentro-del-jspsychhelper"><span class="header-section-number">9.5</span> Como crear un reporte dentro del jsPsychHelpeR</a>
  <ul>
<li><a href="#ejercicio-final" id="toc-ejercicio-final" class="nav-link" data-scroll-target="#ejercicio-final">Ejercicio FINAL</a></li>
  </ul>
</li>
  <li>
<a href="#como-crear-una-nueva-tarea" id="toc-como-crear-una-nueva-tarea" class="nav-link" data-scroll-target="#como-crear-una-nueva-tarea"><span class="header-section-number">9.6</span> Como crear una nueva tarea</a>
  <ul>
<li>
<a href="#como-adaptar-la-tarea" id="toc-como-adaptar-la-tarea" class="nav-link" data-scroll-target="#como-adaptar-la-tarea"><span class="header-section-number">9.6.1</span> Como adaptar la tarea</a>
  <ul>
<li><a href="#nombre-de-la-tarea" id="toc-nombre-de-la-tarea" class="nav-link" data-scroll-target="#nombre-de-la-tarea"><span class="header-section-number">9.6.1.1</span> Nombre de la tarea</a></li>
  <li><a href="#instrucciones" id="toc-instrucciones" class="nav-link" data-scroll-target="#instrucciones"><span class="header-section-number">9.6.1.2</span> Instrucciones</a></li>
  <li><a href="#items" id="toc-items" class="nav-link" data-scroll-target="#items"><span class="header-section-number">9.6.1.3</span> Items</a></li>
  <li><a href="#task-name-trialids" id="toc-task-name-trialids" class="nav-link" data-scroll-target="#task-name-trialids"><span class="header-section-number">9.6.1.4</span> Task name &amp; trialid’s</a></li>
  <li><a href="#probar-la-tarea" id="toc-probar-la-tarea" class="nav-link" data-scroll-target="#probar-la-tarea"><span class="header-section-number">9.6.1.5</span> Probar la tarea</a></li>
  <li><a href="#correcci%C3%B3n-de-la-tarea" id="toc-corrección-de-la-tarea" class="nav-link" data-scroll-target="#correcci%C3%B3n-de-la-tarea"><span class="header-section-number">9.6.1.6</span> Corrección de la tarea</a></li>
  </ul>
</li>
  <li><a href="#ejercicio-crear-nueva-tarea" id="toc-ejercicio-crear-nueva-tarea" class="nav-link" data-scroll-target="#ejercicio-crear-nueva-tarea">Ejercicio Crear nueva tarea</a></li>
  </ul>
</li>
  <li><a href="#como-preparar-datos-para-una-tarea-nueva" id="toc-como-preparar-datos-para-una-tarea-nueva" class="nav-link" data-scroll-target="#como-preparar-datos-para-una-tarea-nueva"><span class="header-section-number">9.7</span> Como preparar datos para una tarea nueva</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Experimentos reproducibles</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p><img src="../data/images/jsPsych-trinity.png" class="img-fluid"></p>
<p>En el CSCN usamos distintas tecnologías para desarrollar experimentos. Algunos ejemplos son <a href="https://www.psychopy.org/">Psychopy</a>, <a href="https://www.qualtrics.com/">Qualtrics</a>, <a href="https://www.limesurvey.org/">Limesurvey</a>, <a href="https://www.jspsych.org/plugins/jspsych-preload/">jsPsych</a>, <a href="https://gorilla.sc/">Gorilla</a>, etc. Cada una de estas tiene ventajas y desventajas, y en general es importante tener en cuenta aspectos pragmáticos a la hora de adoptar una u otra tecnología (costo económico, tipo de experimento [EEG/conductual, laboratorio/online]).</p>
<p>Algunos de nosotros hemos optado principalmente por <a href="https://www.jspsych.org/">jsPsych</a> para experimentos conductuales por tratarse de una librería javascript de <strong>código abierto</strong>, basada en tecnologías web standard, y que puede ser usada online y offline. Dado que en el CSCN disponemos de servidor propio, los costos habituales de hosting no se aplican.</p>
<p>En los últimos años, hemos empezado a trabajar en un conjunto de herramientas (<a href="https://gorkang.github.io/jsPsychR-manual/">jsPsychR</a>) para crear experimentos usando la librería <a href="https://www.jspsych.org/">jsPsych</a> con <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a>, simular participantes con <a href="https://github.com/gorkang/jsPsychMonkeys">jspsychMonkeys</a> y estandarizar y automatizar la preparación de datos con <a href="https://github.com/gorkang/jsPsychHelpeR">jsPsychHelpeR</a>.</p>
<p>Nuestro objetivo final es tener un gran número de tareas disponibles para ser usadas en el repositorio de <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a>. Cada una de estas tareas funcionará en <a href="https://github.com/gorkang/jsPsychMonkeys">jspsychMonkeys</a> para crear participantes virtuales. Cada tarea tendrá un script hermano en <a href="https://github.com/gorkang/jsPsychHelpeR">jsPsychHelpeR</a> para automatizar la preparación de datos.</p>
<p>Puedes consultar <a href="https://gorkang.github.io/jsPsychR-manual/qmd/03-jsPsychMaker.html#available-tasks">las tareas disponibles en el manual de jsPsychR</a> para más detalles.</p>
<section id="pipeline-experimental-abierto-y-reproducible" class="level2" data-number="9.1"><h2 data-number="9.1" class="anchored" data-anchor-id="pipeline-experimental-abierto-y-reproducible">
<span class="header-section-number">9.1</span> Pipeline experimental abierto y reproducible</h2>
<p>Replicar el experimento a partir de una publicación no es trivial. Una de las fortalezas fundamentales de este sistema es que compartir y reproducir un experimento y los análisis asociados se convierte en algo muy sencillo.</p>
<p>Además, todos los componentes del proceso son código abierto, lo que permite que revisores, colaboradores, etc. puedan verificar que no hay errores en el código.</p>
<p>Con este sistema podremos crear fácilmente el código del experimento, simular datos y preparar datos de manera casi automática (incluyendo anonimización).</p>
<p>El output del sistema es estandarizado, lo que implica que los <a href="https://gorkang.github.io/jsPsychR-manual/qmd/05-jsPsychHelpeR.html#output-dataframes-column-names">nombres de las variables y la estructura de datos son predecibles</a>. Finalmente, la generación de gráficas, tablas, reportes y los análisis son reproducibles.</p>
</section><section id="como-crear-un-protocolo-experimental" class="level2" data-number="9.2"><h2 data-number="9.2" class="anchored" data-anchor-id="como-crear-un-protocolo-experimental">
<span class="header-section-number">9.2</span> Como crear un protocolo experimental</h2>
<p>En el <a href="https://gorkang.github.io/jsPsychR-manual/qmd/03-jsPsychMaker.html#available-tasks">manual de jsPsychR</a> puedes ver las tareas disponibles junto con una breve descripción de cada una de ellas. Alternativamente, puedes ver <a href="https://docs.google.com/spreadsheets/d/1Eo0F4GcmqWZ1cghTpQlA4aHsc8kTABss-HAeimE2IqA/edit#gid=0">el documento con todos los detalles de las tareas disponibles</a>.</p>
<p>Si quieres consultar los <a href="https://github.com/gorkang/jsPsychMaker/tree/main/canonical_protocol/tasks">scripts de las tareas</a> puedes hacerlo en la carpeta <code>canonical_protocol/</code> del repositorio de <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a>.</p>
<p>Sigue los siguientes 3 pasos para crear tu protocolo:</p>
<hr>
<ol type="1">
<li>Descargamos el proyecto de RStudio jsPsychMaker:</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-2_7c746b0ba0969cc3fae899bc6efbe49b">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/zip-utils.html">use_course</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"gorkang/jsPsychMaker"</span>, destdir <span class="op">=</span> <span class="st">"~/Downloads/"</span><span class="op">)</span></span>
<span><span class="co"># Select YES to delete zip</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<ol start="2" type="1">
<li>En a la carpeta <code>canonical_protocols</code>:</li>
</ol>
<ul>
<li><p>Editamos <code>config.js</code> para indicar las tareas que queremos usar en la sección <code>// ORDER OF TASKS</code></p></li>
<li><p>Alternativamente, podemos usar la <a href="https://gorkang.shinyapps.io/jsPsychMaker_config/">jsPsychMaker Shiny APP</a> para crear nuestro archivo <code>config.js</code> (recuerda copiar el archivo <code>config.js</code> a la carpeta de tu protocolo)</p></li>
<li><p>Finalmente, en <code>config.js</code> revisamos la sección <code>// Main parameters</code> para asegurarnos que todo esta bien (e.g.&nbsp;<code>online = false;</code>)</p></li>
</ul>
<hr>
<ol start="3" type="1">
<li>El experimento esta listo para ser utilizado localmente. Podemos hacerlo ejecutando <code>index.html</code>
</li>
</ol>
<hr>
<section id="ejercicio-1" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-1">Ejercicio 1</h3>
<p>Ve al <a href="10-ejercicios.html#ejercicio-1">ejercicio 1 del siguiente capítulo</a></p>
</section></section><section id="como-simular-datos" class="level2" data-number="9.3"><h2 data-number="9.3" class="anchored" data-anchor-id="como-simular-datos">
<span class="header-section-number">9.3</span> Como simular datos</h2>
<p>El sistema para simular participantes utiliza <a href="https://www.selenium.dev/">Selenium</a> dentro de un contenedor de <a href="https://www.docker.com/">Docker</a>. En Linux es trivial su uso, pero en Windows su configuración puede ser más compleja.</p>
<p>Puedes seguir los siguientes pasos, pero si no tienes una instalación funcional de Docker que utilice contenedores Linux, el sistema fallará. En ese caso, quedan las siguientes opciones:</p>
<ul>
<li>Correr un par de participantes manualmente<br>
</li>
<li>Usar un ordenador con Linux o crear una partición Linux<br>
</li>
<li>Crear una máquina virtual linux desde la que simular participantes. Puedes usar <a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox</a> para instalar <a href="https://releases.ubuntu.com/20.04/">Ubuntu</a>. Una vez dentro, tendrás que seguir los pasos del <a href="https://gorkang.github.io/R_preparacion_visualizacion_datos/preparando-sistema.html#empezando-en-a-b-c">manual para prepara el sistema para correr R y RStudio</a>
</li>
</ul>
<!-- sudo apt install libssl-dev libcurl4-openssl-dev libxml2-dev  --><p>De nuevo, podemos hacer esto en 3 pasos:</p>
<hr>
<ol type="1">
<li>Instalamos docker (descarga de ~ 500MB):</li>
</ol>
<ul>
<li>
<a href="https://docs.docker.com/desktop/install/windows-install/">Windows</a>, o <a href="https://docs.docker.com/desktop/mac/apple-silicon/">Apple</a>
</li>
<li>Ubuntu: <code>sudo apt install docker</code>
</li>
</ul>
<hr>
<ol start="2" type="1">
<li>Descargamos el proyecto de RStudio jsPsychMonkeys. En la Consola de RStudio:</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-3_857787a2e3021d8fec2595a34ee789b7">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/zip-utils.html">use_course</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"gorkang/jsPsychMonkeys"</span>, destdir <span class="op">=</span> <span class="st">"~/Downloads/"</span><span class="op">)</span></span>
<span><span class="co"># Select YES to delete zip</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<ol start="3" type="1">
<li>Abrimos <code>run.R</code> y seguimos las instrucciones.</li>
</ol>
<hr></section><section id="como-preparar-datos" class="level2" data-number="9.4"><h2 data-number="9.4" class="anchored" data-anchor-id="como-preparar-datos">
<span class="header-section-number">9.4</span> Como preparar datos</h2>
<p>Cada tarea de <a href="https://github.com/gorkang/jsPsychMaker">jsPsychMaker</a> debería tener un script hermano en <a href="https://github.com/gorkang/jsPsychHelpeR">jsPsychHelpeR</a> para automatizar la preparación de datos. Una vez tengamos nuestro protocolo listo para el pilotaje, con una función de jsPsychHelpeR crearemos todo lo necesario para que la preparación de datos corra automáticamente.</p>
<p>Una vez más, nuestros 3 pasos:</p>
<hr>
<ol type="1">
<li>Descargamos el proyecto de RStudio jsPsychHelper:</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-4_148c65844268bffea59f3d54203e4129">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/zip-utils.html">use_course</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"gorkang/jsPsychHelper"</span>, destdir <span class="op">=</span> <span class="st">"~/Downloads/"</span><span class="op">)</span></span>
<span><span class="co"># Select YES to delete zip</span></span>
<span></span>
<span><span class="co">#Si es la primera vez que abrimos jsPsychHelper: </span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"setup/setup.R"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<ol start="2" type="1">
<li>
<p>Abrimos <code>run.R</code> y seguimos las instrucciones. En esencia:</p>
<ol type="A">
<li>Averiguamos cual es nuestro número de protocolo:</li>
</ol>
<ul>
<li>Si lo desconoces, es el primer número de los archivos de datos, antes del “_“. Por ejemplo, <strong>134</strong>_Consent_original_2022-04-02T205622_18840434.csv -&gt; número de protocolo 134</li>
</ul>
<ol start="2" type="A">
<li>Ponemos los datos (archivos csv) en la carpeta <code>data/ID_PROTOCOLO</code> (<strong>reemplazar ID_PROTOCOLO por el número de nuestro protocolo</strong>.</li>
</ol>
<ul>
<li>Si la carpeta <code>data/ID_PROTOCOLO</code> contiene algun archivo, borrar antes de copiar nuestros datos: Por ejemplo, si usas el 999, BORRA el archivo 999.zip que hay en <code>data/999</code> antes de copiar tus datos.</li>
</ul>
<ol start="3" type="A">
<li>Correr las líneas de abajo (<strong>el parametro <code>pid</code> en <code>run_initial_setup()</code> tiene que tener tu número de protocolo</strong>. Por ejemplo, si mi protocolo es el 134, <code>pid = 134</code>)</li>
</ol>
</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-5_2884e8cb43ac87192bf963ca57972c4e">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Setup de nuestro sistema</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="st">"./R"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">".R$"</span><span class="op">)</span>, <span class="va">source</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">run_initial_setup</span><span class="op">(</span>pid <span class="op">=</span> <span class="fl">999</span>, download_files <span class="op">=</span> <span class="cn">FALSE</span>, download_task_script <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Corremos el pipeline de preparación de datos</span></span>
<span><span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_make.html">tar_make</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<ol start="3" type="1">
<li>Para ver el data frame final listo para el análisis</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-6_57f1577dabccbac4f8af6f9cb97b11bf">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>  <span class="co"># List available objects</span></span>
<span>  <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_objects.html">tar_objects</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Load DF_analysis file</span></span>
<span>  <span class="fu">targets</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/targets/reference/tar_load.html">tar_load</a></span><span class="op">(</span><span class="va">DF_analysis</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># See DF_analysis dataframe</span></span>
<span>  <span class="va">DF_analysis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr></section><section id="como-crear-un-reporte-dentro-del-jspsychhelper" class="level2" data-number="9.5"><h2 data-number="9.5" class="anchored" data-anchor-id="como-crear-un-reporte-dentro-del-jspsychhelper">
<span class="header-section-number">9.5</span> Como crear un reporte dentro del jsPsychHelpeR</h2>
<p>Dentro del proyecto en el que has preparado los datos, simplemente tienes que:</p>
<hr>
<ol type="1">
<li>Abre la plantilla report_analysis.Rmd:</li>
</ol>
<p><code>rstudioapi::navigateToFile("Rmd/report_analysis.Rmd")</code></p>
<hr>
<ol start="2" type="1">
<li>En el archivo <code>_targets.R</code>, en la sección análisis, descomenta las dos líneas de abajo</li>
</ol>
<pre><code>
  # tar_render(report_analysis, "Rmd/report_analysis.Rmd",
  #            output_file = paste0("../outputs/reports/report_analysis.html")),
  </code></pre>
<hr>
<ol start="3" type="1">
<li>Finalmente, puedes trabajar en report_analysis.Rmd tal y como hiciste en el capítulo anterior. Cuando acabes, o quieras probar si todo funciona bien, solo tienes que correr <code><a href="https://docs.ropensci.org/targets/reference/tar_make.html">targets::tar_make()</a></code> desde la Consola.</li>
</ol>
<hr>
<section id="ejercicio-final" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-final">Ejercicio FINAL</h3>
<p>Ya estáis listas/os para enfrentaros al <a href="10-ejercicios.html#ejercicio-final">ejercicio FINAL</a></p>
<hr></section></section><section id="como-crear-una-nueva-tarea" class="level2" data-number="9.6"><h2 data-number="9.6" class="anchored" data-anchor-id="como-crear-una-nueva-tarea">
<span class="header-section-number">9.6</span> Como crear una nueva tarea</h2>
<p>Tenemos un buen número de tareas disponibles para usar (puedes verlas en el <a href="https://gorkang.github.io/jsPsychR-manual/qmd/03-jsPsychMaker.html#available-tasks">manual de jsPsychR</a>). Si la tarea que necesitas no está disponible, puedes crearla usando una de las plantillas que encontrarás en <a href="https://github.com/gorkang/jsPsychMaker/tree/main/canonical_protocol_clean">canonical_protocol_clean</a>. Están preparadas para que puedas modificarlas fácilmente y crear tu propia tarea. Alternativamente, también puedes usar como punto de partida las <a href="https://github.com/gorkang/jsPsychMaker/tree/main/canonical_protocol/tasks">tareas que tenemos en jsPSychMaker</a>.</p>
<p>Veamos como usar las plantillas de <a href="https://github.com/gorkang/jsPsychMaker/tree/main/canonical_protocol_clean">canonical_protocol_clean</a> para crear nuestra tarea:</p>
<hr>
<ol type="1">
<li>Descargamos el proyecto de RStudio jsPsychMaker. En la Consola de RStudio:</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-7_000d8d2792f9e7f16998ba5b5f895a0d">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/zip-utils.html">use_course</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"gorkang/jsPsychMaker"</span>, destdir <span class="op">=</span> <span class="st">"~/Downloads/"</span><span class="op">)</span></span>
<span><span class="co"># Select YES to delete zip</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><p>Ve a la carpeta <code>canonical_protocols_clean</code> del proyecto RStudio jsPsychMaker</p></li>
<li>
<p>En la carpeta <code>tasks</code> tienes tareas que empiezan por <code>SHORNAMETASK</code>, por ejemplo:</p>
<ul>
<li><p><code>SHORNAMETASKmultichoice.js</code></p></li>
<li><p><code>SHORNAMETASKslider.js</code></p></li>
</ul>
</li>
</ol>
<ul>
<li>Elige el tipo de tarea que quieres, y modifica el archivo para adaptar las instrucciones y los ítems.</li>
</ul>
<hr>
<section id="como-adaptar-la-tarea" class="level3" data-number="9.6.1"><h3 data-number="9.6.1" class="anchored" data-anchor-id="como-adaptar-la-tarea">
<span class="header-section-number">9.6.1</span> Como adaptar la tarea</h3>
<section id="nombre-de-la-tarea" class="level4" data-number="9.6.1.1"><h4 data-number="9.6.1.1" class="anchored" data-anchor-id="nombre-de-la-tarea">
<span class="header-section-number">9.6.1.1</span> Nombre de la tarea</h4>
<ol type="1">
<li>Lo primero es elegir el nombre de la tarea, para ello, recuerda:
<ul>
<li><p>Generalmente será un acrónimo, breve, por ejemplo, EA.</p></li>
<li><p>El nombre NO debe contener espacios ni caracteres extraños. NO: (?!“#$%&amp;/=?¡¿;:_.,-).</p></li>
<li>
<p>Puedes hacer una mínima verificación con esta función:</p>
<p><code>janitor::make_clean_names("NOMBRE tarea!", case = "upper_lower")</code> : NOMBREtarea</p>
</li>
<li>
<p>Deber ser un nombre UNICO. Comprueba que no existe en:</p>
<ul>
<li><p><a href="https://docs.google.com/spreadsheets/d/1Eo0F4GcmqWZ1cghTpQlA4aHsc8kTABss-HAeimE2IqA/edit#gid=0">Tareas jsPsychR</a></p></li>
<li><p><a href="https://docs.google.com/spreadsheets/d/1LAsyTZ2ZRP_xLiUBkqmawwnKWgy8OCwq4mmWrrc_rpQ/edit#gid=0">NUEVAS Tareas jsPsychR</a></p></li>
</ul>
</li>
</ul>
</li>
<li>Renombra el archivo para que coincida con el nombre de tu tarea</li>
</ol></section><section id="instrucciones" class="level4" data-number="9.6.1.2"><h4 data-number="9.6.1.2" class="anchored" data-anchor-id="instrucciones">
<span class="header-section-number">9.6.1.2</span> Instrucciones</h4>
<p>Puedes tener tantas páginas de instrucciones como desees, simplemente, modifica la variables <code>pages: []</code> para que contenga lo que necesitas. Cada página de instrucciones estará separada por <code>,</code>:</p>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-8_e60810d93b9ce55caf686930ea2e089d">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pages<span class="op">:</span> [<span class="vs">`pagina1`</span><span class="op">,</span> <span class="vs">`pagina2`</span><span class="op">,</span> <span class="vs">`pagina3`</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<script type="text/javascript">
pages: [`pagina1`, `pagina2`, `pagina3`] 
</script>
</div>
<p>Para darle formato tendrás que usar lenguaje <a href="https://www.w3schools.com/html/html_formatting.asp">HTML</a>.</p>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-9_444340afa1b2a8c75bcf3fdf245774cf">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> instruction_screen_experiment <span class="op">=</span> {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">type</span><span class="op">:</span> <span class="st">'instructions'</span><span class="op">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pages</span><span class="op">:</span> [<span class="vs">`&lt;p&gt;&lt;left&gt;&lt;b&gt;&lt;big&gt;NAME TASK&lt;/big&gt;&lt;/b&gt;&lt;br/&gt;&lt;br&gt; Instrucciones detalladas de tarea con slider&lt;br&gt;&lt;br&gt; Muchas gracias por tu colaboración.&lt;/p&gt;`</span><span class="op">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="vs">`&lt;p&gt;Pagina 2 de instrucciones. &lt;BR&gt;&lt;BR&gt;Dale a siguiente para empezar la tarea&lt;/p&gt;`</span>]<span class="op">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">data</span><span class="op">:</span>{<span class="dt">trialid</span><span class="op">:</span> <span class="st">'SHORNAMETASKslider_000'</span><span class="op">,</span> <span class="dt">procedure</span><span class="op">:</span> <span class="st">'SHORNAMETASKslider'</span>}<span class="op">,</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">show_clickable_nav</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">on_trial_start</span><span class="op">:</span> <span class="kw">function</span>(){</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        bloquear_enter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<script type="text/javascript">

var instruction_screen_experiment = {
    type: 'instructions',
    pages: [`<p><left><b><big>NAME TASK</big></b><br/><br> Instrucciones detalladas de tarea con slider<br><br> Muchas gracias por tu colaboración.</p>`,
    `<p>Pagina 2 de instrucciones. <BR><BR>Dale a siguiente para empezar la tarea</p>`],
    data:{trialid: 'SHORNAMETASKslider_000', procedure: 'SHORNAMETASKslider'},
    show_clickable_nav: true,
    on_trial_start: function(){
        bloquear_enter = 0;
    }
};
</script>
</div>
</section><section id="items" class="level4" data-number="9.6.1.3"><h4 data-number="9.6.1.3" class="anchored" data-anchor-id="items">
<span class="header-section-number">9.6.1.3</span> Items</h4>
<p>En las plantillas encontrarás dos ítems. Si necesitas mas de dos:</p>
<ul>
<li><p>Copia la definición del ítem <code>var question01 = {…}</code>, más la línea <code>SHORNAMETASKslider.push(...)</code> tantas veces como ítems necesites</p></li>
<li>
<p>Incrementa en 1 los números de <code>question0X</code> y <code>SHORNAMETASKslider_00X</code> para que sean correlativos</p>
<ul>
<li>
<p>Fijate que <code>question0X</code> aparece en dos lugares. En el ejemplo de abajo:</p>
<ul>
<li><p><code>var question01 = {</code></p></li>
<li><p><code>SHORNAMETASKslider.push(question01);</code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Modifica el contenido de <code>stimulus:</code> en los ítems.</p></li>
<li>
<p>Modifica las <code>labels</code> o <code>options</code></p>
<ul>
<li><p>Recuerda que estamos usando javascript. Los vectores son: <code>labels: ["una cosa", "otra cosa"]</code></p></li>
<li><p>Puedes usar buscar y reemplazar todos para hacerlo de un solo paso.</p></li>
</ul>
</li>
</ul>
<p>Cada uno de los plugins de jsPsych tiene múltiples parámetros que podemos definir. Puedes ver la <a href="https://www.jspsych.org/7.0/plugins/list-of-plugins/">ayuda de jsPsych aquí</a>. Por ejemplo, si se trata de un slider, modificando la variable <code>labels: []</code> controlarás los anclajes de la escala. Si se trata de un multichoice, podrás establecer las alternativas con la variable <code>options: []</code>.</p>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-10_2a7adf40090405f2bac6b68f1de70b99">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">//Un item</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> question01 <span class="op">=</span> {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">type</span><span class="op">:</span> <span class="st">'html-slider-response'</span><span class="op">,</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">stimulus</span><span class="op">:</span> <span class="st">"&lt;div class='justified'&gt;Una pregunta&lt;/div&gt;&lt;/br&gt;"</span><span class="op">,</span> <span class="dt">require_movement</span><span class="op">:</span><span class="kw">true</span><span class="op">,</span> <span class="dt">required</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">slider_width</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">slider_start</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">labels</span><span class="op">:</span> [<span class="st">"No me describe bien"</span><span class="op">,</span> <span class="st">"Me describe muy bien"</span>]<span class="op">,</span> <span class="dt">button_label</span><span class="op">:</span> <span class="st">"Siguiente"</span><span class="op">,</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">data</span><span class="op">:</span> {<span class="dt">trialid</span><span class="op">:</span> <span class="st">'SHORNAMETASKslider_001'</span><span class="op">,</span> <span class="dt">procedure</span><span class="op">:</span> <span class="st">'SHORNAMETASKslider'</span>}</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>SHORNAMETASKslider<span class="op">.</span><span class="fu">push</span>(question01)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<script type="text/javascript">
//Un item
var question01 = {
  type: 'html-slider-response',
  stimulus: "<div class='justified'>Una pregunta</div></br>", require_movement:true, required: true, min: 0, max: 4, slider_width: 500, slider_start: 2, step: 1, labels: ["No me describe bien", "Me describe muy bien"], button_label: "Siguiente",
  data: {trialid: 'SHORNAMETASKslider_001', procedure: 'SHORNAMETASKslider'}
};
SHORNAMETASKslider.push(question01);
</script>
</div>
</section><section id="task-name-trialids" class="level4" data-number="9.6.1.4"><h4 data-number="9.6.1.4" class="anchored" data-anchor-id="task-name-trialids">
<span class="header-section-number">9.6.1.4</span> Task name &amp; trialid’s</h4>
<p>Por último, tienes que hacer una cosa muy sencilla:</p>
<ol type="1">
<li>Buscar y reemplazar (<code>CONTROL + F</code>) todas las instancias de <code>SHORNAMETASKslider</code> o <code>SHORNAMETASKmultichoice</code> por el nombre de tu tarea.</li>
</ol>
<hr></section><section id="probar-la-tarea" class="level4" data-number="9.6.1.5"><h4 data-number="9.6.1.5" class="anchored" data-anchor-id="probar-la-tarea">
<span class="header-section-number">9.6.1.5</span> Probar la tarea</h4>
<p>Ve a <code>config.js</code> y haz lo siguiente:</p>
<ul>
<li><p>cambia la línea: <code>randomly_ordered_tasks_1 = ['SHORNAMETASKslider', 'SHORNAMETASKmultichoice'];</code> por <code>randomly_ordered_tasks_1 = ['NOMBREtarea'];</code></p></li>
<li><p>Asegurate que <code>online = false;</code></p></li>
</ul>
<p>Ahora ya puedes abrir el archivo <code>index.html</code> en tu navegador</p>
<ul>
<li>Es recomendable usar el modo incógnito (en Google Chrome: <code>CONTROL  + ALT + N</code>)</li>
</ul></section><section id="corrección-de-la-tarea" class="level4" data-number="9.6.1.6"><h4 data-number="9.6.1.6" class="anchored" data-anchor-id="corrección-de-la-tarea">
<span class="header-section-number">9.6.1.6</span> Corrección de la tarea</h4>
<p>Para cada tarea en jsPsychMaker, aspiramos a tener un script de corrección en jsPsychHelpeR. Si has creado una nueva tarea, por favor, completa la información de <a href="https://docs.google.com/spreadsheets/d/1LAsyTZ2ZRP_xLiUBkqmawwnKWgy8OCwq4mmWrrc_rpQ/edit#gid=0">NUEVAS Tareas jsPsychR</a> para que podamos integrar tu tarea en el repositorio común.</p>
</section></section><section id="ejercicio-crear-nueva-tarea" class="level3 ejercicio unnumbered"><h3 class="ejercicio unnumbered anchored" data-anchor-id="ejercicio-crear-nueva-tarea">Ejercicio Crear nueva tarea</h3>
<p>Ve al <a href="ejercicios-7.html#ejercicio-2-1">ejercicio 2 del siguiente capítulo</a></p>
</section></section><section id="como-preparar-datos-para-una-tarea-nueva" class="level2" data-number="9.7"><h2 data-number="9.7" class="anchored" data-anchor-id="como-preparar-datos-para-una-tarea-nueva">
<span class="header-section-number">9.7</span> Como preparar datos para una tarea nueva</h2>
<p>Tendremos que crear primero el script de preparación para la nueva tarea. En jsPsychHelpeR tienes una tarea que te ayudará con esto. Si has completado los datos en <a href="https://docs.google.com/spreadsheets/d/1LAsyTZ2ZRP_xLiUBkqmawwnKWgy8OCwq4mmWrrc_rpQ/edit#gid=0">NUEVAS Tareas jsPsychR</a>, el proceso será muy sencillo.</p>
<ol type="1">
<li>Descargamos el proyecto de RStudio jsPsychHelper. En la Consola de RStudio:</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-11_c1676618f16205b3d515977cd2d3a603">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/zip-utils.html">use_course</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">"gorkang/jsPsychHelper"</span>, destdir <span class="op">=</span> <span class="st">"~/Downloads/"</span><span class="op">)</span></span>
<span><span class="co"># Select YES to delete zip</span></span>
<span></span>
<span><span class="co">#Si es la primera vez que abrimos jsPsychHelper: </span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"setup/setup.R"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Creamos el nuevo archivo <code>prepare_NOMBRETAREA()</code>:</li>
</ol>
<div class="cell" data-hash="09-experimentos-reproducibles_cache/html/unnamed-chunk-12_625299bfd8036b8cca32561499491a08">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="st">"./R"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, pattern <span class="op">=</span> <span class="st">".R$"</span><span class="op">)</span>, <span class="va">source</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">create_new_task</span><span class="op">(</span>short_name_task <span class="op">=</span> <span class="st">"NAMETASK"</span>, get_info_googledoc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Esta función:</p>
<ol type="1">
<li>Creará un nuevo archivo de corrección a partir de la plantilla</li>
<li>Lo adaptará para que funciones con el nombre que le has asignado a la tarea</li>
<li>Abrirá el archivo para que lo puedas editar</li>
</ol>
<p>Si hay información en todas las pestañas de <a href="https://docs.google.com/spreadsheets/d/1LAsyTZ2ZRP_xLiUBkqmawwnKWgy8OCwq4mmWrrc_rpQ/edit#gid=0">NUEVAS Tareas jsPsychR</a>, en la consola se mostrará información lista para copiar y pegar en tu script sobre:</p>
<ul>
<li><p>nombres de dimensiones</p></li>
<li><p>ítems para cada dimensión</p></li>
<li><p>cálculo de dimensiones</p></li>
<li><p>ítems invertidos</p></li>
<li><p>conversión numérica</p></li>
</ul>
<!-- ## Bibliografía {.bibliografia -} --><!-- Wickham, H., & Grolemund, G. (2016). R for data science: import, tidy, transform, visualize, and model data. O'Reilly Media, Inc. https://r4ds.had.co.nz/   -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../qmd/08-git.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Control de cambios con Git y Github</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../qmd/10-ejercicios.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Ejercicios</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>